var CM=Object.defineProperty,DM=Object.defineProperties;var TM=Object.getOwnPropertyDescriptors;var _I=Object.getOwnPropertySymbols,SM=Object.getPrototypeOf,AM=Object.prototype.hasOwnProperty,xM=Object.prototype.propertyIsEnumerable,MM=Reflect.get;var wI=(t,e,n)=>e in t?CM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})AM.call(e,n)&&wI(t,n,e[n]);if(_I)for(var n of _I(e))xM.call(e,n)&&wI(t,n,e[n]);return t},ye=(t,e)=>DM(t,TM(e));var Ar=(t,e,n)=>MM(SM(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function II(t,e){return Object.is(t,e)}var et=null,Jc=!1,Zc=1,Zn=Symbol("SIGNAL");function Ce(t){let e=et;return et=t,e}function EI(){return et}var qs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tf(t){if(Jc)throw new Error("");if(et===null)return;et.consumerOnSignalRead(t);let e=et.nextProducerIndex++;if(nu(et),e<et.producerNode.length&&et.producerNode[e]!==t&&zs(et)){let n=et.producerNode[e];tu(n,et.producerIndexOfThis[e])}et.producerNode[e]!==t&&(et.producerNode[e]=t,et.producerIndexOfThis[e]=zs(et)?TI(t,et,e):0),et.producerLastReadVersion[e]=t.version}function RM(){Zc++}function bI(t){if(!(zs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Zc)){if(!t.producerMustRecompute(t)&&!Af(t)){t.dirty=!1,t.lastCleanEpoch=Zc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Zc}}function CI(t){if(t.liveConsumerNode===void 0)return;let e=Jc;Jc=!0;try{for(let n of t.liveConsumerNode)n.dirty||NM(n)}finally{Jc=e}}function DI(){return et?.consumerAllowSignalWrites!==!1}function NM(t){t.dirty=!0,CI(t),t.consumerMarkedDirty?.(t)}function eu(t){return t&&(t.nextProducerIndex=0),Ce(t)}function Sf(t,e){if(Ce(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(zs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)tu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Af(t){nu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(bI(n),r!==n.version))return!0}return!1}function xf(t){if(nu(t),zs(t))for(let e=0;e<t.producerNode.length;e++)tu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function TI(t,e,n){if(SI(t),t.liveConsumerNode.length===0&&AI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=TI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function tu(t,e){if(SI(t),t.liveConsumerNode.length===1&&AI(t))for(let r=0;r<t.producerNode.length;r++)tu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];nu(i),i.producerIndexOfThis[r]=e}}function zs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function nu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function SI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function AI(t){return t.producerNode!==void 0}function xI(t){let e=Object.create(PM);e.computation=t;let n=()=>{if(bI(e),Tf(e),e.value===Xc)throw e.error;return e.value};return n[Zn]=e,n}var Cf=Symbol("UNSET"),Df=Symbol("COMPUTING"),Xc=Symbol("ERRORED"),PM=ye(L({},qs),{value:Cf,dirty:!0,error:null,equal:II,producerMustRecompute(t){return t.value===Cf||t.value===Df},producerRecomputeValue(t){if(t.value===Df)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Df;let n=eu(t),r;try{r=t.computation()}catch(i){r=Xc,t.error=i}finally{Sf(t,n)}if(e!==Cf&&e!==Xc&&r!==Xc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function OM(){throw new Error}var MI=OM;function RI(){MI()}function NI(t){MI=t}var kM=null;function PI(t){let e=Object.create(kI);e.value=t;let n=()=>(Tf(e),e.value);return n[Zn]=e,n}function Mf(t,e){DI()||RI(),t.equal(t.value,e)||(t.value=e,FM(t))}function OI(t,e){DI()||RI(),Mf(t,e(t.value))}var kI=ye(L({},qs),{equal:II,value:void 0});function FM(t){t.version++,RM(),CI(t),kM?.()}function oe(t){return typeof t=="function"}function no(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ru=no(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Gs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var We=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof ru?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{FI(o)}catch(s){e=e??[],s instanceof ru?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ru(e)}}add(e){var n;if(e&&e!==this)if(this.closed)FI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Gs(n,e)}remove(e){let{_finalizers:n}=this;n&&Gs(n,e),e instanceof t&&e._removeParent(this)}};We.EMPTY=(()=>{let t=new We;return t.closed=!0,t})();var Rf=We.EMPTY;function iu(t){return t instanceof We||t&&"closed"in t&&oe(t.remove)&&oe(t.add)&&oe(t.unsubscribe)}function FI(t){oe(t)?t():t.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ro={setTimeout(t,e,...n){let{delegate:r}=ro;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ro;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ou(t){ro.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(t);else throw t})}function Ws(){}var VI=Nf("C",void 0,void 0);function LI(t){return Nf("E",void 0,t)}function jI(t){return Nf("N",t,void 0)}function Nf(t,e,n){return{kind:t,value:e,error:n}}var ci=null;function io(t){if(on.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ci;if(ci=null,n)throw r}}else t()}function UI(t){on.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=t)}var ui=class extends We{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,iu(e)&&e.add(this)):this.destination=jM}static create(e,n,r){return new oo(e,n,r)}next(e){this.isStopped?Of(jI(e),this):this._next(e)}error(e){this.isStopped?Of(LI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Of(VI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},VM=Function.prototype.bind;function Pf(t,e){return VM.call(t,e)}var kf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){su(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){su(r)}else su(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){su(n)}}},oo=class extends ui{constructor(e,n,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Pf(e.next,o),error:e.error&&Pf(e.error,o),complete:e.complete&&Pf(e.complete,o)}):i=e}this.destination=new kf(i)}};function su(t){on.useDeprecatedSynchronousErrorHandling?UI(t):ou(t)}function LM(t){throw t}function Of(t,e){let{onStoppedNotification:n}=on;n&&ro.setTimeout(()=>n(t,e))}var jM={closed:!0,next:Ws,error:LM,complete:Ws};var so=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vt(t){return t}function Ff(...t){return Vf(t)}function Vf(t){return t.length===0?Vt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=BM(n)?n:new oo(n,r,i);return io(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=BI(r),new r((i,o)=>{let s=new oo({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[so](){return this}pipe(...n){return Vf(n)(this)}toPromise(n){return n=BI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function BI(t){var e;return(e=t??on.Promise)!==null&&e!==void 0?e:Promise}function UM(t){return t&&oe(t.next)&&oe(t.error)&&oe(t.complete)}function BM(t){return t&&t instanceof ui||UM(t)&&iu(t)}function Lf(t){return oe(t?.lift)}function Ee(t){return e=>{if(Lf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(t,e,n,r,i){return new jf(t,e,n,r,i)}var jf=class extends ui{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ao(){return Ee((t,e)=>{let n=null;t._refCount++;let r=ve(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var co=class extends Se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Lf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new We;let n=this.getSubject();e.add(this.source.subscribe(ve(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=We.EMPTY)}return e}refCount(){return ao()(this)}};var $I=no(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class t extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new au(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $I}next(n){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Rf:(this.currentObservers=null,o.push(n),new We(()=>{this.currentObservers=null,Gs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Se;return n.source=this,n}}return t.create=(e,n)=>new au(e,n),t})(),au=class extends Ke{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Rf}};var tt=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Lt=new Se(t=>t.complete());function HI(t){return t&&oe(t.schedule)}function zI(t){return t[t.length-1]}function cu(t){return oe(zI(t))?t.pop():void 0}function xr(t){return HI(zI(t))?t.pop():void 0}function uu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function GI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function qI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function li(t){return this instanceof li?(this.v=t,this):new li(t)}function WI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(P){return new Promise(function(R,H){o.push([y,P,R,H])>1||u(y,P)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(P){g(o[0][3],P)}}function l(y){y.value instanceof li?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function KI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qI=="function"?qI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var lu=t=>t&&typeof t.length=="number"&&typeof t!="function";function du(t){return oe(t?.then)}function hu(t){return oe(t[so])}function fu(t){return Symbol.asyncIterator&&oe(t?.[Symbol.asyncIterator])}function pu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $M(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mu=$M();function gu(t){return oe(t?.[mu])}function yu(t){return WI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield li(n.read());if(i)return yield li(void 0);yield yield li(r)}}finally{n.releaseLock()}})}function vu(t){return oe(t?.getReader)}function Qe(t){if(t instanceof Se)return t;if(t!=null){if(hu(t))return HM(t);if(lu(t))return zM(t);if(du(t))return qM(t);if(fu(t))return QI(t);if(gu(t))return GM(t);if(vu(t))return WM(t)}throw pu(t)}function HM(t){return new Se(e=>{let n=t[so]();if(oe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zM(t){return new Se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function qM(t){return new Se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ou)})}function GM(t){return new Se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function QI(t){return new Se(e=>{KM(t,e).catch(n=>e.error(n))})}function WM(t){return QI(yu(t))}function KM(t,e){var n,r,i,o;return GI(this,void 0,void 0,function*(){try{for(n=KI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function xt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function _u(t,e=0){return Ee((n,r)=>{n.subscribe(ve(r,i=>xt(r,t,()=>r.next(i),e),()=>xt(r,t,()=>r.complete(),e),i=>xt(r,t,()=>r.error(i),e)))})}function wu(t,e=0){return Ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function YI(t,e){return Qe(t).pipe(wu(e),_u(e))}function JI(t,e){return Qe(t).pipe(wu(e),_u(e))}function ZI(t,e){return new Se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function XI(t,e){return new Se(n=>{let r;return xt(n,e,()=>{r=t[mu](),xt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function Iu(t,e){if(!t)throw new Error("Iterable cannot be null");return new Se(n=>{xt(n,e,()=>{let r=t[Symbol.asyncIterator]();xt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function e0(t,e){return Iu(yu(t),e)}function t0(t,e){if(t!=null){if(hu(t))return YI(t,e);if(lu(t))return ZI(t,e);if(du(t))return JI(t,e);if(fu(t))return Iu(t,e);if(gu(t))return XI(t,e);if(vu(t))return e0(t,e)}throw pu(t)}function Ge(t,e){return e?t0(t,e):Qe(t)}function se(...t){let e=xr(t);return Ge(t,e)}function uo(t,e){let n=oe(t)?t:()=>t,r=i=>i.error(n());return new Se(e?i=>e.schedule(r,0,i):r)}function Uf(t){return!!t&&(t instanceof Se||oe(t.lift)&&oe(t.subscribe))}var Xn=no(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function me(t,e){return Ee((n,r)=>{let i=0;n.subscribe(ve(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:QM}=Array;function YM(t,e){return QM(e)?t(...e):t(e)}function Eu(t){return me(e=>YM(t,e))}var{isArray:JM}=Array,{getPrototypeOf:ZM,prototype:XM,keys:eR}=Object;function bu(t){if(t.length===1){let e=t[0];if(JM(e))return{args:e,keys:null};if(tR(e)){let n=eR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function tR(t){return t&&typeof t=="object"&&ZM(t)===XM}function Cu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Du(...t){let e=xr(t),n=cu(t),{args:r,keys:i}=bu(t);if(r.length===0)return Ge([],e);let o=new Se(nR(r,e,i?s=>Cu(i,s):Vt));return n?o.pipe(Eu(n)):o}function nR(t,e,n=Vt){return r=>{n0(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)n0(e,()=>{let l=Ge(t[u],e),h=!1;l.subscribe(ve(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function n0(t,e,n){t?xt(n,t,e):e()}function r0(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?S(P):u.push(P),S=P=>{o&&e.next(P),l++;let R=!1;Qe(n(P,h++)).subscribe(ve(e,H=>{i?.(H),o?y(H):e.next(H)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let H=u.shift();s?xt(e,s,()=>S(H)):S(H)}g()}catch(H){e.error(H)}}))};return t.subscribe(ve(e,y,()=>{p=!0,g()})),()=>{a?.()}}function nt(t,e,n=1/0){return oe(e)?nt((r,i)=>me((o,s)=>e(r,o,i,s))(Qe(t(r,i))),n):(typeof e=="number"&&(n=e),Ee((r,i)=>r0(r,i,t,n)))}function Bf(t=1/0){return nt(Vt,t)}function i0(){return Bf(1)}function lo(...t){return i0()(Ge(t,xr(t)))}function Tu(t){return new Se(e=>{Qe(t()).subscribe(e)})}function $f(...t){let e=cu(t),{args:n,keys:r}=bu(t),i=new Se(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Qe(n[h]).subscribe(ve(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Cu(r,a):a),o.complete())}))}});return e?i.pipe(Eu(e)):i}function sn(t,e){return Ee((n,r)=>{let i=0;n.subscribe(ve(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Mr(t){return Ee((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ve(n,void 0,void 0,s=>{o=Qe(t(s,Mr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function o0(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ve(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ho(t,e){return oe(e)?nt(t,e,1):nt(t,1)}function Rr(t){return Ee((e,n)=>{let r=!1;e.subscribe(ve(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function er(t){return t<=0?()=>Lt:Ee((e,n)=>{let r=0;e.subscribe(ve(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Hf(t){return me(()=>t)}function Su(t=rR){return Ee((e,n)=>{let r=!1;e.subscribe(ve(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function rR(){return new Xn}function Ks(t){return Ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Cn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sn((i,o)=>t(i,o,r)):Vt,er(1),n?Rr(e):Su(()=>new Xn))}function fo(t){return t<=0?()=>Lt:Ee((e,n)=>{let r=[];e.subscribe(ve(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function zf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sn((i,o)=>t(i,o,r)):Vt,fo(1),n?Rr(e):Su(()=>new Xn))}function qf(t,e){return Ee(o0(t,e,arguments.length>=2,!0))}function Gf(...t){let e=xr(t);return Ee((n,r)=>{(e?lo(t,n,e):lo(t,n)).subscribe(r)})}function an(t,e){return Ee((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ve(r,u=>{i?.unsubscribe();let l=0,h=o++;Qe(t(u,h)).subscribe(i=ve(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Wf(t){return Ee((e,n)=>{Qe(t).subscribe(ve(n,()=>n.complete(),Ws)),!n.closed&&e.subscribe(n)})}function ht(t,e,n){let r=oe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ve(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Vt}var K0="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,n){super(Yp(e,n)),this.code=e}};function Yp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function aa(t){return{toString:t}.toString()}var Au="__parameters__";function iR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Q0(t,e,n){return aa(()=>{let r=iR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Au)?u[Au]:Object.defineProperty(u,Au,{value:[]})[Au];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Js=globalThis;function ke(t){for(let e in t)if(t[e]===ke)return e;throw Error("Could not find renamed property on target object.")}function oR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function St(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(St).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function s0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var sR=ke({__forward_ref__:ke});function nr(t){return t.__forward_ref__=nr,t.toString=function(){return St(this())},t}function Tt(t){return Y0(t)?t():t}function Y0(t){return typeof t=="function"&&t.hasOwnProperty(sR)&&t.__forward_ref__===nr}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function xo(t){return{providers:t.providers||[],imports:t.imports||[]}}function dl(t){return a0(t,Z0)||a0(t,X0)}function J0(t){return dl(t)!==null}function a0(t,e){return t.hasOwnProperty(e)?t[e]:null}function aR(t){let e=t&&(t[Z0]||t[X0]);return e||null}function c0(t){return t&&(t.hasOwnProperty(u0)||t.hasOwnProperty(cR))?t[u0]:null}var Z0=ke({\u0275prov:ke}),u0=ke({\u0275inj:ke}),X0=ke({ngInjectableDef:ke}),cR=ke({ngInjectorDef:ke}),ee=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function eE(t){return t&&!!t.\u0275providers}var uR=ke({\u0275cmp:ke}),lR=ke({\u0275dir:ke}),dR=ke({\u0275pipe:ke}),hR=ke({\u0275mod:ke}),Uu=ke({\u0275fac:ke}),Ys=ke({__NG_ELEMENT_ID__:ke}),l0=ke({__NG_ENV_ID__:ke});function hl(t){return typeof t=="string"?t:t==null?"":String(t)}function fR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():hl(t)}function pR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,t)}function Jp(t,e){throw new Q(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),ap;function tE(){return ap}function Mt(t){let e=ap;return ap=t,e}function nE(t,e,n){let r=dl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&fe.Optional)return null;if(e!==void 0)return e;Jp(t,"Injector")}var mR={},Zs=mR,cp="__NG_DI_FLAG__",Bu="ngTempTokenPath",gR="ngTokenPath",yR=/\n/gm,vR="\u0275",d0="__source",yo;function _R(){return yo}function Nr(t){let e=yo;return yo=t,e}function wR(t,e=fe.Default){if(yo===void 0)throw new Q(-203,!1);return yo===null?nE(t,void 0,e):yo.get(t,e&fe.Optional?null:void 0,e)}function Z(t,e=fe.Default){return(tE()||wR)(Tt(t),e)}function U(t,e=fe.Default){return Z(t,fl(e))}function fl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function up(t){let e=[];for(let n=0;n<t.length;n++){let r=Tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=fe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=IR(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Z(i,o))}else e.push(Z(r))}return e}function rE(t,e){return t[cp]=e,t.prototype[cp]=e,t}function IR(t){return t[cp]}function ER(t,e,n,r){let i=t[Bu];throw e[d0]&&i.unshift(e[d0]),t.message=bR(`
`+t.message,i,n,r),t[gR]=i,t[Bu]=null,t}function bR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==vR?t.slice(2):t;let i=St(e);if(Array.isArray(e))i=e.map(St).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):St(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(yR,`
  `)}`}var Zp=rE(Q0("Optional"),8);var iE=rE(Q0("SkipSelf"),4);function fi(t,e){let n=t.hasOwnProperty(Uu);return n?t[Uu]:null}function Xp(t,e){t.forEach(n=>Array.isArray(n)?Xp(n,e):e(n))}function oE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $u(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function CR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function DR(t,e,n){let r=ca(t,e);return r>=0?t[r|1]=n:(r=~r,CR(t,r,e,n)),r}function Kf(t,e){let n=ca(t,e);if(n>=0)return t[n|1]}function ca(t,e){return TR(t,e,1)}function TR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var _o={},Gt=[],wo=new ee(""),sE=new ee("",-1),aE=new ee(""),Hu=class{get(e,n=Zs){if(n===Zs){let r=new Error(`NullInjectorError: No provider for ${St(e)}!`);throw r.name="NullInjectorError",r}return n}},cE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(cE||{}),Sn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Sn||{}),kr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(kr||{});function SR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function lp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];xR(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function AR(t){return t===3||t===4||t===6}function xR(t){return t.charCodeAt(0)===64}function Xs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?h0(t,n,i,null,e[++r]):h0(t,n,i,null,null))}}return t}function h0(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var uE="ng-template";function MR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(em(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function em(t){return t.type===4&&t.value!==uE}function RR(t,e,n){let r=t.type===4&&!n?uE:t.value;return e===r}function NR(t,e,n){let r=4,i=t.attrs,o=i!==null?kR(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!cn(r)&&!cn(u))return!1;if(s&&cn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!RR(t,u,n)||u===""&&e.length===1){if(cn(r))return!1;s=!0}}else if(r&8){if(i===null||!MR(t,i,u,n)){if(cn(r))return!1;s=!0}}else{let l=e[++a],h=PR(u,i,em(t),n);if(h===-1){if(cn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(cn(r))return!1;s=!0}}}}return cn(r)||s}function cn(t){return(t&1)===0}function PR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return FR(e,t)}function OR(t,e,n=!1){for(let r=0;r<e.length;r++)if(NR(t,e[r],n))return!0;return!1}function kR(t){for(let e=0;e<t.length;e++){let n=t[e];if(AR(n))return e}return t.length}function FR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function f0(t,e){return t?":not("+e.trim()+")":e}function VR(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!cn(s)&&(e+=f0(o,i),i=""),r=s,o=o||!cn(r);n++}return i!==""&&(e+=f0(o,i)),e}function LR(t){return t.map(VR).join(",")}function jR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!cn(i))break;i=o}r++}return{attrs:e,classes:n}}function xe(t){return aa(()=>{let e=pE(t),n=ye(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===cE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Sn.Emulated,styles:t.styles||Gt,_:null,schemas:t.schemas||null,tView:null,id:""});mE(n);let r=t.dependencies;return n.directiveDefs=m0(r,!1),n.pipeDefs=m0(r,!0),n.id=$R(n),n})}function UR(t){return pi(t)||lE(t)}function BR(t){return t!==null}function Mo(t){return aa(()=>({type:t.type,bootstrap:t.bootstrap||Gt,declarations:t.declarations||Gt,imports:t.imports||Gt,exports:t.exports||Gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function p0(t,e){if(t==null)return _o;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=kr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==kr.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Ye(t){return aa(()=>{let e=pE(t);return mE(e),e})}function tm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function pi(t){return t[uR]||null}function lE(t){return t[lR]||null}function dE(t){return t[dR]||null}function hE(t){let e=pi(t)||lE(t)||dE(t);return e!==null?e.standalone:!1}function fE(t,e){let n=t[hR]||null;if(!n&&e===!0)throw new Error(`Type ${St(t)} does not have '\u0275mod' property.`);return n}function pE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||_o,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:p0(t.inputs,e),outputs:p0(t.outputs),debugInfo:null}}function mE(t){t.features?.forEach(e=>e(t))}function m0(t,e){if(!t)return null;let n=e?dE:UR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(BR)}function $R(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pl(t){return{\u0275providers:t}}function HR(...t){return{\u0275providers:gE(!0,t),\u0275fromNgModule:!0}}function gE(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Xp(e,s=>{let a=s;dp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&yE(i,o),n}function yE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];nm(i,o=>{e(o,r)})}}function dp(t,e,n,r){if(t=Tt(t),!t)return!1;let i=null,o=c0(t),s=!o&&pi(t);if(!o&&!s){let u=t.ngModule;if(o=c0(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)dp(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Xp(o.imports,h=>{dp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&yE(l,e)}if(!a){let l=fi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gt},i),e({provide:aE,useValue:i,multi:!0},i),e({provide:wo,useValue:()=>Z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;nm(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function nm(t,e){for(let n of t)eE(n)&&(n=n.\u0275providers),Array.isArray(n)?nm(n,e):e(n)}var zR=ke({provide:String,useValue:ke});function vE(t){return t!==null&&typeof t=="object"&&zR in t}function qR(t){return!!(t&&t.useExisting)}function GR(t){return!!(t&&t.useFactory)}function Io(t){return typeof t=="function"}function WR(t){return!!t.useClass}var ml=new ee(""),ku={},KR={},Qf;function rm(){return Qf===void 0&&(Qf=new Hu),Qf}var Qt=class{},ea=class extends Qt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fp(e,s=>this.processProvider(s)),this.records.set(sE,po(void 0,this)),i.has("environment")&&this.records.set(Qt,po(void 0,this));let o=this.records.get(ml);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(aE,Gt,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Nr(this),r=Mt(void 0),i;try{return e()}finally{Nr(n),Mt(r)}}get(e,n=Zs,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(l0))return e[l0](this);r=fl(r);let i,o=Nr(this),s=Mt(void 0);try{if(!(r&fe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=XR(e)&&dl(e);l&&this.injectableDefInScope(l)?u=po(hp(e),ku):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&fe.Self?rm():this.parent;return n=r&fe.Optional&&n===Zs?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Bu]=a[Bu]||[]).unshift(St(e)),o)throw a;return ER(a,e,"R3InjectorError",this.source)}else throw a}finally{Mt(s),Nr(o)}}resolveInjectorInitializers(){let e=Ce(null),n=Nr(this),r=Mt(void 0),i;try{let o=this.get(wo,Gt,fe.Self);for(let s of o)s()}finally{Nr(n),Mt(r),Ce(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(St(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=Tt(e);let n=Io(e)?e:Tt(e&&e.provide),r=YR(e);if(!Io(e)&&e.multi===!0){let i=this.records.get(n);i||(i=po(void 0,ku,!0),i.factory=()=>up(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ce(null);try{return n.value===ku&&(n.value=KR,n.value=n.factory()),typeof n.value=="object"&&n.value&&ZR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function hp(t){let e=dl(t),n=e!==null?e.factory:fi(t);if(n!==null)return n;if(t instanceof ee)throw new Q(204,!1);if(t instanceof Function)return QR(t);throw new Q(204,!1)}function QR(t){if(t.length>0)throw new Q(204,!1);let n=aR(t);return n!==null?()=>n.factory(t):()=>new t}function YR(t){if(vE(t))return po(void 0,t.useValue);{let e=_E(t);return po(e,ku)}}function _E(t,e,n){let r;if(Io(t)){let i=Tt(t);return fi(i)||hp(i)}else if(vE(t))r=()=>Tt(t.useValue);else if(GR(t))r=()=>t.useFactory(...up(t.deps||[]));else if(qR(t))r=()=>Z(Tt(t.useExisting));else{let i=Tt(t&&(t.useClass||t.provide));if(JR(t))r=()=>new i(...up(t.deps));else return fi(i)||hp(i)}return r}function po(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function JR(t){return!!t.deps}function ZR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function XR(t){return typeof t=="function"||typeof t=="object"&&t instanceof ee}function fp(t,e){for(let n of t)Array.isArray(n)?fp(n,e):n&&eE(n)?fp(n.\u0275providers,e):e(n)}function rr(t,e){t instanceof ea&&t.assertNotDestroyed();let n,r=Nr(t),i=Mt(void 0);try{return e()}finally{Nr(r),Mt(i)}}function eN(){return tE()!==void 0||_R()!=null}function tN(t){return typeof t=="function"}var ir=0,ge=1,re=2,At=3,un=4,dn=5,zu=6,qu=7,ln=8,Eo=9,An=10,it=11,ta=12,g0=13,Ro=14,xn=15,bo=16,mo=17,Co=18,gl=19,wE=20,Pr=21,Yf=22,Wt=23,Mn=25,IE=1;var mi=7,Gu=8,Wu=9,Kt=10,Ku=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ku||{});function Or(t){return Array.isArray(t)&&typeof t[IE]=="object"}function or(t){return Array.isArray(t)&&t[IE]===!0}function EE(t){return(t.flags&4)!==0}function yl(t){return t.componentOffset>-1}function im(t){return(t.flags&1)===1}function Fr(t){return!!t.template}function pp(t){return(t[re]&512)!==0}var mp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function bE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ur(){return CE}function CE(t){return t.type.prototype.ngOnChanges&&(t.setInput=rN),nN}Ur.ngInherit=!0;function nN(){let t=TE(this),e=t?.current;if(e){let n=t.previous;if(n===_o)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function rN(t,e,n,r,i){let o=this.declaredInputs[r],s=TE(t)||iN(t,{previous:_o,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new mp(l&&l.currentValue,n,u===_o),bE(t,e,i,n)}var DE="__ngSimpleChanges__";function TE(t){return t[DE]||null}function iN(t,e){return t[DE]=e}var y0=null;var Dn=function(t,e,n){y0?.(t,e,n)},SE="svg",oN="math";function Rn(t){for(;Array.isArray(t);)t=t[ir];return t}function AE(t,e){return Rn(e[t])}function hn(t,e){return Rn(e[t.index])}function xE(t,e){return t.data[e]}function sN(t,e){return t[e]}function Br(t,e){let n=e[t];return Or(n)?n:n[ir]}function om(t){return(t[re]&128)===128}function aN(t){return or(t[At])}function Qu(t,e){return e==null?null:t[e]}function ME(t){t[mo]=0}function RE(t){t[re]&1024||(t[re]|=1024,om(t)&&vl(t))}function cN(t,e){for(;t>0;)e=e[Ro],t--;return e}function na(t){return!!(t[re]&9216||t[Wt]?.dirty)}function gp(t){t[An].changeDetectionScheduler?.notify(7),t[re]&64&&(t[re]|=1024),na(t)&&vl(t)}function vl(t){t[An].changeDetectionScheduler?.notify(0);let e=gi(t);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!om(e)));)e=gi(e)}function NE(t,e){if((t[re]&256)===256)throw new Q(911,!1);t[Pr]===null&&(t[Pr]=[]),t[Pr].push(e)}function uN(t,e){if(t[Pr]===null)return;let n=t[Pr].indexOf(e);n!==-1&&t[Pr].splice(n,1)}function gi(t){let e=t[At];return or(e)?e[At]:e}var pe={lFrame:BE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var PE=!1;function lN(){return pe.lFrame.elementDepthCount}function dN(){pe.lFrame.elementDepthCount++}function hN(){pe.lFrame.elementDepthCount--}function OE(){return pe.bindingsEnabled}function fN(){return pe.skipHydrationRootTNode!==null}function pN(t){return pe.skipHydrationRootTNode===t}function mN(){pe.skipHydrationRootTNode=null}function Pe(){return pe.lFrame.lView}function Rt(){return pe.lFrame.tView}function ae(t){return pe.lFrame.contextLView=t,t[ln]}function ce(t){return pe.lFrame.contextLView=null,t}function Nt(){let t=kE();for(;t!==null&&t.type===64;)t=t.parent;return t}function kE(){return pe.lFrame.currentTNode}function gN(){let t=pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ua(t,e){let n=pe.lFrame;n.currentTNode=t,n.isParent=e}function FE(){return pe.lFrame.isParent}function yN(){pe.lFrame.isParent=!1}function VE(){return PE}function v0(t){PE=t}function sm(){let t=pe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function vN(t){return pe.lFrame.bindingIndex=t}function am(){return pe.lFrame.bindingIndex++}function _N(t){let e=pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function wN(){return pe.lFrame.inI18n}function IN(t,e){let n=pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,yp(e)}function EN(){return pe.lFrame.currentDirectiveIndex}function yp(t){pe.lFrame.currentDirectiveIndex=t}function bN(t){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function LE(t){pe.lFrame.currentQueryIndex=t}function CN(t){let e=t[ge];return e.type===2?e.declTNode:e.type===1?t[dn]:null}function jE(t,e,n){if(n&fe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&fe.Host);)if(i=CN(o),i===null||(o=o[Ro],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=pe.lFrame=UE();return r.currentTNode=e,r.lView=t,!0}function cm(t){let e=UE(),n=t[ge];pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function UE(){let t=pe.lFrame,e=t===null?null:t.child;return e===null?BE(t):e}function BE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function $E(){let t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var HE=$E;function um(){let t=$E();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function DN(t){return(pe.lFrame.contextLView=cN(t,pe.lFrame.contextLView))[ln]}function No(){return pe.lFrame.selectedIndex}function yi(t){pe.lFrame.selectedIndex=t}function lm(){let t=pe.lFrame;return xE(t.tView,t.selectedIndex)}function zE(){pe.lFrame.currentNamespace=SE}function TN(){return pe.lFrame.currentNamespace}var qE=!0;function dm(){return qE}function hm(t){qE=t}function SN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=CE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function fm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Fu(t,e,n){GE(t,e,3,n)}function Vu(t,e,n,r){(t[re]&3)===n&&GE(t,e,n,r)}function Jf(t,e){let n=t[re];(n&3)===e&&(n&=16383,n+=1,t[re]=n)}function GE(t,e,n,r){let i=r!==void 0?t[mo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[mo]+=65536),(a<o||o==-1)&&(AN(t,n,e,u),t[mo]=(t[mo]&4294901760)+u+2),u++}function _0(t,e){Dn(4,t,e);let n=Ce(null);try{e.call(t)}finally{Ce(n),Dn(5,t,e)}}function AN(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[re]>>14<t[mo]>>16&&(t[re]&3)===e&&(t[re]+=16384,_0(a,o)):_0(a,o)}var vo=-1,vi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function xN(t){return t instanceof vi}function MN(t){return(t.flags&8)!==0}function RN(t){return(t.flags&16)!==0}var Zf={},vp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=fl(r);let i=this.injector.get(e,Zf,r);return i!==Zf||n===Zf?i:this.parentInjector.get(e,n,r)}};function WE(t){return t!==vo}function Yu(t){return t&32767}function NN(t){return t>>16}function Ju(t,e){let n=NN(t),r=e;for(;n>0;)r=r[Ro],n--;return r}var _p=!0;function Zu(t){let e=_p;return _p=t,e}var PN=256,KE=PN-1,QE=5,ON=0,Tn={};function kN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ys)&&(r=n[Ys]),r==null&&(r=n[Ys]=ON++);let i=r&KE,o=1<<i;e.data[t+(i>>QE)]|=o}function Xu(t,e){let n=YE(t,e);if(n!==-1)return n;let r=e[ge];r.firstCreatePass&&(t.injectorIndex=e.length,Xf(r.data,t),Xf(e,null),Xf(r.blueprint,null));let i=pm(t,e),o=t.injectorIndex;if(WE(i)){let s=Yu(i),a=Ju(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Xf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function YE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function pm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=tb(i),r===null)return vo;if(n++,i=i[Ro],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vo}function wp(t,e,n){kN(t,e,n)}function JE(t,e,n){if(n&fe.Optional||t!==void 0)return t;Jp(e,"NodeInjector")}function ZE(t,e,n,r){if(n&fe.Optional&&r===void 0&&(r=null),!(n&(fe.Self|fe.Host))){let i=t[Eo],o=Mt(void 0);try{return i?i.get(e,r,n&fe.Optional):nE(e,r,n&fe.Optional)}finally{Mt(o)}}return JE(r,e,n)}function XE(t,e,n,r=fe.Default,i){if(t!==null){if(e[re]&2048&&!(r&fe.Self)){let s=UN(t,e,n,r,Tn);if(s!==Tn)return s}let o=eb(t,e,n,r,Tn);if(o!==Tn)return o}return ZE(e,n,r,i)}function eb(t,e,n,r,i){let o=LN(n);if(typeof o=="function"){if(!jE(e,t,r))return r&fe.Host?JE(i,n,r):ZE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&fe.Optional))Jp(n);else return s}finally{HE()}}else if(typeof o=="number"){let s=null,a=YE(t,e),u=vo,l=r&fe.Host?e[xn][dn]:null;for((a===-1||r&fe.SkipSelf)&&(u=a===-1?pm(t,e):e[a+8],u===vo||!I0(r,!1)?a=-1:(s=e[ge],a=Yu(u),e=Ju(u,e)));a!==-1;){let h=e[ge];if(w0(o,a,h.data)){let p=FN(a,e,n,s,r,l);if(p!==Tn)return p}u=e[a+8],u!==vo&&I0(r,e[ge].data[a+8]===l)&&w0(o,a,e)?(s=h,a=Yu(u),e=Ju(u,e)):a=-1}}return i}function FN(t,e,n,r,i,o){let s=e[ge],a=s.data[t+8],u=r==null?yl(a)&&_p:r!=s&&(a.type&3)!==0,l=i&fe.Host&&o===a,h=VN(a,s,n,u,l);return h!==null?Do(e,s,h,a):Tn}function VN(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&Fr(y)&&y.type===n)return u}return null}function Do(t,e,n,r){let i=t[n],o=e.data;if(xN(i)){let s=i;s.resolving&&pR(fR(o[n]));let a=Zu(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Mt(s.injectImpl):null,h=jE(t,r,fe.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&SN(n,o[n],e)}finally{l!==null&&Mt(l),Zu(a),s.resolving=!1,HE()}}return i}function LN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ys)?t[Ys]:void 0;return typeof e=="number"?e>=0?e&KE:jN:e}function w0(t,e,n){let r=1<<t;return!!(n[e+(t>>QE)]&r)}function I0(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var hi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return XE(this._tNode,this._lView,e,fl(r),n)}};function jN(){return new hi(Nt(),Pe())}function $r(t){return aa(()=>{let e=t.prototype.constructor,n=e[Uu]||Ip(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Uu]||Ip(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ip(t){return Y0(t)?()=>{let e=Ip(Tt(t));return e&&e()}:fi(t)}function UN(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!(s[re]&512);){let a=eb(o,s,n,r|fe.Self,Tn);if(a!==Tn)return a;let u=o.parent;if(!u){let l=s[wE];if(l){let h=l.get(n,Tn,r);if(h!==Tn)return h}u=tb(s),s=s[Ro]}o=u}return i}function tb(t){let e=t[ge],n=e.type;return n===2?e.declTNode:n===1?t[dn]:null}function E0(t,e=null,n=null,r){let i=nb(t,e,n,r);return i.resolveInjectorInitializers(),i}function nb(t,e=null,n=null,r,i=new Set){let o=[n||Gt,HR(t)];return r=r||(typeof t=="object"?void 0:St(t)),new ea(o,e||rm(),r||null,i)}var di=class di{static create(e,n){if(Array.isArray(e))return E0({name:""},n,e,"");{let r=e.name??"";return E0({name:r},e.parent,e.providers,r)}}};di.THROW_IF_NOT_FOUND=Zs,di.NULL=new Hu,di.\u0275prov=W({token:di,providedIn:"any",factory:()=>Z(sE)}),di.__NG_ELEMENT_ID__=-1;var Vr=di;var BN=new ee("");BN.__NG_ELEMENT_ID__=t=>{let e=Nt();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(t&fe.Optional)return null;throw new Q(204,!1)};var $N="ngOriginalError";function ep(t){return t[$N]}var rb=!0,ib=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HN,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Ep=class extends ib{constructor(e){super(),this._lView=e}onDestroy(e){return NE(this._lView,e),()=>uN(this._lView,e)}};function HN(){return new Ep(Pe())}var Po=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var bp=class extends Ke{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,eN()&&(this.destroyRef=U(ib,{optional:!0})??void 0,this.pendingTasks=U(Po,{optional:!0})??void 0)}emit(e){let n=Ce(null);try{super.next(e)}finally{Ce(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof We&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ae=bp;function el(...t){}function ob(t){let e,n;function r(){t=el;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function b0(t){return queueMicrotask(()=>t()),()=>{t=el}}var mm="isAngularZone",tl=mm+"_ID",zN=0,rt=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ae(!1),this.onMicrotaskEmpty=new Ae(!1),this.onStable=new Ae(!1),this.onError=new Ae(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=rb}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,WN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(mm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,qN,el,el);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},qN={};function gm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function GN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){ob(()=>{t.callbackScheduled=!1,Cp(t),t.isCheckStableRunning=!0,gm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Cp(t)}function WN(t){let e=()=>{GN(t)},n=zN++;t._inner=t._inner.fork({name:"angular",properties:{[mm]:!0,[tl]:n,[tl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(KN(u))return r.invokeTask(o,s,a,u);try{return C0(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),D0(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return C0(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!QN(u)&&e(),D0(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Cp(t),gm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Cp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function C0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function D0(t){t._nesting--,gm(t)}var Dp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ae,this.onMicrotaskEmpty=new Ae,this.onStable=new Ae,this.onError=new Ae}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function KN(t){return sb(t,"__ignore_ng_zone__")}function QN(t){return sb(t,"__scheduler_tick__")}function sb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Lr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ep(e);for(;n&&ep(n);)n=ep(n);return n||null}},YN=new ee("",{providedIn:"root",factory:()=>{let t=U(rt),e=U(Lr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function JN(){return _l(Nt(),Pe())}function _l(t,e){return new Nn(hn(t,e))}var Nn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=JN;let t=e;return t})();function ab(t){return(t.flags&128)===128}var cb=new Map,ZN=0;function XN(){return ZN++}function e1(t){cb.set(t[gl],t)}function t1(t){cb.delete(t[gl])}var T0="__ngContext__";function _i(t,e){Or(e)?(t[T0]=e[gl],e1(e)):t[T0]=e}function ub(t){return db(t[ta])}function lb(t){return db(t[un])}function db(t){for(;t!==null&&!or(t);)t=t[un];return t}var Tp;function hb(t){Tp=t}function fb(){if(Tp!==void 0)return Tp;if(typeof document<"u")return document;throw new Q(210,!1)}var ym=new ee("",{providedIn:"root",factory:()=>n1}),n1="ng",vm=new ee(""),Oo=new ee("",{providedIn:"platform",factory:()=>"unknown"});var _m=new ee("",{providedIn:"root",factory:()=>fb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var r1="h",i1="b";var o1=()=>null;function wm(t,e,n=!1){return o1(t,e,n)}var pb=!1,s1=new ee("",{providedIn:"root",factory:()=>pb});var xu;function a1(){if(xu===void 0&&(xu=null,Js.trustedTypes))try{xu=Js.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return xu}function wl(t){return a1()?.createHTML(t)||t}var Mu;function c1(){if(Mu===void 0&&(Mu=null,Js.trustedTypes))try{Mu=Js.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Mu}function S0(t){return c1()?.createHTML(t)||t}var nl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${K0})`}};function la(t){return t instanceof nl?t.changingThisBreaksApplicationSecurity:t}function Im(t,e){let n=u1(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${K0})`)}return n===e}function u1(t){return t instanceof nl&&t.getTypeName()||null}function l1(t){let e=new Ap(t);return d1()?new Sp(e):e}var Sp=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(wl(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},Ap=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=wl(e),n}};function d1(){try{return!!new window.DOMParser().parseFromString(wl(""),"text/html")}catch{return!1}}var h1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Em(t){return t=String(t),t.match(h1)?t:"unsafe:"+t}function sr(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function da(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var mb=sr("area,br,col,hr,img,wbr"),gb=sr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),yb=sr("rp,rt"),f1=da(yb,gb),p1=da(gb,sr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),m1=da(yb,sr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),A0=da(mb,p1,m1,f1),vb=sr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),g1=sr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),y1=sr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),v1=da(vb,g1,y1),_1=sr("script,style,template"),xp=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=E1(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=I1(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=x0(e).toLowerCase();if(!A0.hasOwnProperty(n))return this.sanitizedSomething=!0,!_1.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!v1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;vb[a]&&(u=Em(u)),this.buf.push(" ",s,'="',M0(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=x0(e).toLowerCase();A0.hasOwnProperty(n)&&!mb.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(M0(e))}};function w1(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function I1(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw _b(e);return e}function E1(t){let e=t.firstChild;if(e&&w1(t,e))throw _b(e);return e}function x0(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function _b(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var b1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C1=/([^\#-~ |!])/g;function M0(t){return t.replace(/&/g,"&amp;").replace(b1,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(C1,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ru;function wb(t,e){let n=null;try{Ru=Ru||l1(t);let r=e?String(e):"";n=Ru.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Ru.getInertBodyElement(r)}while(r!==o);let a=new xp().sanitizeChildren(R0(n)||n);return wl(a)}finally{if(n){let r=R0(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function R0(t){return"content"in t&&D1(t)?t.content:null}function D1(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Il=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Il||{});function Ib(t){let e=bb();return e?S0(e.sanitize(Il.HTML,t)||""):Im(t,"HTML")?S0(la(t)):wb(fb(),hl(t))}function Eb(t){let e=bb();return e?e.sanitize(Il.URL,t)||"":Im(t,"URL")?la(t):Em(hl(t))}function bb(){let t=Pe();return t&&t[An].sanitizer}function Cb(t){return t instanceof Function?t():t}var tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(tr||{}),T1;function bm(t,e){return T1(t,e)}function go(t,e,n,r,i){if(r!=null){let o,s=!1;or(r)?o=r:Or(r)&&(s=!0,r=r[ir]);let a=Rn(r);t===0&&n!==null?i==null?xb(e,n,a):rl(e,n,a,i||null,!0):t===1&&n!==null?rl(e,n,a,i||null,!0):t===2?B1(e,a,s):t===3&&e.destroyNode(a),o!=null&&H1(e,t,o,n,i)}}function S1(t,e){return t.createText(e)}function A1(t,e,n){t.setValue(e,n)}function Db(t,e,n){return t.createElement(e,n)}function x1(t,e){Tb(t,e),e[ir]=null,e[dn]=null}function M1(t,e,n,r,i,o){r[ir]=i,r[dn]=e,El(t,r,n,1,i,o)}function Tb(t,e){e[An].changeDetectionScheduler?.notify(8),El(t,e,e[it],2,null,null)}function R1(t){let e=t[ta];if(!e)return tp(t[ge],t);for(;e;){let n=null;if(Or(e))n=e[ta];else{let r=e[Kt];r&&(n=r)}if(!n){for(;e&&!e[un]&&e!==t;)Or(e)&&tp(e[ge],e),e=e[At];e===null&&(e=t),Or(e)&&tp(e[ge],e),n=e&&e[un]}e=n}}function N1(t,e,n,r){let i=Kt+r,o=n.length;r>0&&(n[i-1][un]=e),r<o-Kt?(e[un]=n[i],oE(n,Kt+r,e)):(n.push(e),e[un]=null),e[At]=n;let s=e[bo];s!==null&&n!==s&&Sb(s,e);let a=e[Co];a!==null&&a.insertView(t),gp(e),e[re]|=128}function Sb(t,e){let n=t[Wu],r=e[At];if(Or(r))t[re]|=Ku.HasTransplantedViews;else{let i=r[At][xn];e[xn]!==i&&(t[re]|=Ku.HasTransplantedViews)}n===null?t[Wu]=[e]:n.push(e)}function Cm(t,e){let n=t[Wu],r=n.indexOf(e);n.splice(r,1)}function Mp(t,e){if(t.length<=Kt)return;let n=Kt+e,r=t[n];if(r){let i=r[bo];i!==null&&i!==t&&Cm(i,r),e>0&&(t[n-1][un]=r[un]);let o=$u(t,Kt+e);x1(r[ge],r);let s=o[Co];s!==null&&s.detachView(o[ge]),r[At]=null,r[un]=null,r[re]&=-129}return r}function Ab(t,e){if(!(e[re]&256)){let n=e[it];n.destroyNode&&El(t,e,n,3,null,null),R1(e)}}function tp(t,e){if(e[re]&256)return;let n=Ce(null);try{e[re]&=-129,e[re]|=256,e[Wt]&&xf(e[Wt]),O1(t,e),P1(t,e),e[ge].type===1&&e[it].destroy();let r=e[bo];if(r!==null&&or(e[At])){r!==e[At]&&Cm(r,e);let i=e[Co];i!==null&&i.detachView(t)}t1(e)}finally{Ce(n)}}function P1(t,e){let n=t.cleanup,r=e[qu];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[qu]=null);let i=e[Pr];if(i!==null){e[Pr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function O1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof vi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Dn(4,a,u);try{u.call(a)}finally{Dn(5,a,u)}}else{Dn(4,i,o);try{o.call(i)}finally{Dn(5,i,o)}}}}}function k1(t,e,n){return F1(t,e.parent,n)}function F1(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[ir];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Sn.None||o===Sn.Emulated)return null}return hn(r,n)}}function rl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function xb(t,e,n){t.appendChild(e,n)}function N0(t,e,n,r,i){r!==null?rl(t,e,n,r,i):xb(t,e,n)}function Mb(t,e){return t.parentNode(e)}function V1(t,e){return t.nextSibling(e)}function L1(t,e,n){return U1(t,e,n)}function j1(t,e,n){return t.type&40?hn(t,n):null}var U1=j1,P0;function Dm(t,e,n,r){let i=k1(t,r,e),o=e[it],s=r.parent||e[dn],a=L1(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)N0(o,i,n[u],a,!1);else N0(o,i,n,a,!1);P0!==void 0&&P0(o,r,e,n,i)}function Qs(t,e){if(e!==null){let n=e.type;if(n&3)return hn(e,t);if(n&4)return Rp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Qs(t,r);{let i=t[e.index];return or(i)?Rp(-1,i):Rn(i)}}else{if(n&128)return Qs(t,e.next);if(n&32)return bm(e,t)()||Rn(t[e.index]);{let r=Rb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(t[xn]);return Qs(i,r)}else return Qs(t,e.next)}}}return null}function Rb(t,e){if(e!==null){let r=t[xn][dn],i=e.projection;return r.projection[i]}return null}function Rp(t,e){let n=Kt+t+1;if(n<e.length){let r=e[n],i=r[ge].firstChild;if(i!==null)return Qs(r,i)}return e[mi]}function B1(t,e,n){t.removeChild(null,e,n)}function Tm(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&_i(Rn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Tm(t,e,n.child,r,i,o,!1),go(e,t,i,a,o);else if(u&32){let l=bm(n,r),h;for(;h=l();)go(e,t,i,h,o);go(e,t,i,a,o)}else u&16?$1(t,e,r,n,i,o):go(e,t,i,a,o);n=s?n.projectionNext:n.next}}function El(t,e,n,r,i,o){Tm(n,r,t.firstChild,e,i,o,!1)}function $1(t,e,n,r,i,o){let s=n[xn],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];go(e,t,i,h,o)}else{let l=u,h=s[At];ab(r)&&(l.flags|=128),Tm(t,e,l,h,i,o,!0)}}function H1(t,e,n,r,i){let o=n[mi],s=Rn(n);o!==s&&go(e,t,r,o,i);for(let a=Kt;a<n.length;a++){let u=n[a];El(u[ge],u,t,e,r,o)}}function z1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:tr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=tr.Important),t.setStyle(n,r,i,o))}}function q1(t,e,n){t.setAttribute(e,"style",n)}function Nb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Pb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&lp(t,e,r),i!==null&&Nb(t,e,i),o!==null&&q1(t,e,o)}var ar={};function F(t=1){Ob(Rt(),Pe(),No()+t,!1)}function Ob(t,e,n,r){if(!r)if((e[re]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Fu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Vu(e,o,0,n)}yi(n)}function j(t,e=fe.Default){let n=Pe();if(n===null)return Z(t,e);let r=Nt();return XE(r,n,Tt(t),e)}function kb(t,e,n,r,i,o){let s=Ce(null);try{let a=null;i&kr.SignalBased&&(a=e[r][Zn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&kr.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):bE(e,a,r,o)}finally{Ce(s)}}function G1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)yi(~i);else{let o=i,s=n[++r],a=n[++r];IN(s,o);let u=e[o];a(2,u)}}}finally{yi(-1)}}function bl(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[ir]=i,p[re]=r|4|128|8|64,(l!==null||t&&t[re]&2048)&&(p[re]|=2048),ME(p),p[At]=p[Ro]=t,p[ln]=n,p[An]=s||t&&t[An],p[it]=a||t&&t[it],p[Eo]=u||t&&t[Eo]||null,p[dn]=o,p[gl]=XN(),p[zu]=h,p[wE]=l,p[xn]=e.type==2?t[xn]:p,p}function Cl(t,e,n,r,i){let o=t.data[e];if(o===null)o=W1(t,e,n,r,i),wN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=gN();o.injectorIndex=s===null?-1:s.injectorIndex}return ua(o,!0),o}function W1(t,e,n,r,i){let o=kE(),s=FE(),a=s?o:o&&o.parent,u=t.data[e]=Z1(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function Fb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vb(t,e,n,r,i){let o=No(),s=r&2;try{yi(-1),s&&e.length>Mn&&Ob(t,e,Mn,!1),Dn(s?2:0,i),n(r,i)}finally{yi(o),Dn(s?3:1,i)}}function Lb(t,e,n){if(EE(e)){let r=Ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Ce(r)}}}function jb(t,e,n){OE()&&(iP(t,e,n,hn(n,e)),(n.flags&64)===64&&zb(t,e,n))}function Ub(t,e,n=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Bb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Sm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Sm(t,e,n,r,i,o,s,a,u,l,h){let p=Mn+r,g=p+i,y=K1(p,g),S=typeof l=="function"?l():l;return y[ge]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function K1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ar);return n}function Q1(t,e,n,r){let o=r.get(s1,pb)||n===Sn.ShadowDom,s=t.selectRootElement(e,o);return Y1(s),s}function Y1(t){J1(t)}var J1=()=>null;function Z1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return fN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function O0(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=kr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?k0(r,n,l,a,u):k0(r,n,l,a)}return r}function k0(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function X1(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],g=n?n.get(p):null,y=g?g.inputs:null,S=g?g.outputs:null;u=O0(0,p.inputs,h,u,y),l=O0(1,p.outputs,h,l,S);let P=u!==null&&s!==null&&!em(e)?fP(u,h,s):null;a.push(P)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function eP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Am(t,e,n,r,i,o,s,a){let u=hn(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(xm(t,n,h,r,i),yl(e)&&tP(n,e.index)):e.type&3?(r=eP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function tP(t,e){let n=Br(e,t);n[re]&16||(n[re]|=64)}function $b(t,e,n,r){if(OE()){let i=r===null?null:{"":-1},o=sP(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Hb(t,e,n,s,i,a),i&&aP(n,r,i)}n.mergedAttrs=Xs(n.mergedAttrs,n.attrs)}function Hb(t,e,n,r,i,o){for(let l=0;l<r.length;l++)wp(Xu(n,e),t,r[l].type);uP(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=Fb(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Xs(n.mergedAttrs,h.hostAttrs),lP(t,n,e,u,h),cP(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}X1(t,n,o)}function nP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;rP(s)!=a&&s.push(a),s.push(n,r,o)}}function rP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function iP(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;yl(n)&&dP(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Xu(n,e),_i(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=Do(e,t,a,n);if(_i(l,e),s!==null&&hP(e,a-i,l,u,n,s),Fr(u)){let h=Br(n.index,e);h[ln]=Do(e,t,a,n)}}}function zb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=EN();try{yi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];yp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&oP(u,l)}}finally{yi(-1),yp(s)}}function oP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function sP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(OR(e,s.selectors,!1))if(r||(r=[]),Fr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Np(t,e,u)}else r.unshift(s),Np(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Np(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function aP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}}function cP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Fr(e)&&(n[""]=t)}}function uP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function lP(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=fi(i.type,!0)),s=new vi(o,Fr(i),j);t.blueprint[r]=s,n[r]=s,nP(t,e,r,Fb(t,n,i.hostVars,ar),i)}function dP(t,e,n){let r=hn(e,t),i=Bb(n),o=t[An].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Dl(t,bl(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function hP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];kb(r,n,u,l,h,p)}}function fP(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function qb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Gb(t,e){let n=t.contentQueries;if(n!==null){let r=Ce(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];LE(o),a.contentQueries(2,e[s],s)}}}finally{Ce(r)}}}function Dl(t,e){return t[ta]?t[g0][un]=e:t[ta]=e,t[g0]=e,e}function Pp(t,e,n){LE(0);let r=Ce(null);try{e(t,n)}finally{Ce(r)}}function pP(t){return t[qu]??=[]}function mP(t){return t.cleanup??=[]}function Wb(t,e){let n=t[Eo],r=n?n.get(Lr,null):null;r&&r.handleError(e)}function xm(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],h=t.data[s];kb(h,l,r,a,u,i)}}function gP(t,e,n){let r=AE(e,t);A1(t[it],r,n)}function yP(t,e){let n=Br(e,t),r=n[ge];vP(r,n);let i=n[ir];i!==null&&n[zu]===null&&(n[zu]=wm(i,n[Eo])),Mm(r,n,n[ln])}function vP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Mm(t,e,n){cm(e);try{let r=t.viewQuery;r!==null&&Pp(1,r,n);let i=t.template;i!==null&&Vb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Co]?.finishViewCreation(t),t.staticContentQueries&&Gb(t,e),t.staticViewQueries&&Pp(2,t.viewQuery,n);let o=t.components;o!==null&&_P(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[re]&=-5,um()}}function _P(t,e){for(let n=0;n<e.length;n++)yP(t,e[n])}function wP(t,e,n,r){let i=Ce(null);try{let o=e.tView,a=t[re]&4096?4096:16,u=bl(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[bo]=l;let h=t[Co];return h!==null&&(u[Co]=h.createEmbeddedView(o)),Mm(o,u,n),u}finally{Ce(i)}}function F0(t,e){return!e||e.firstChild===null||ab(t)}function IP(t,e,n,r=!0){let i=e[ge];if(N1(i,e,t,n),r){let s=Rp(n,t),a=e[it],u=Mb(a,t[mi]);u!==null&&M1(i,t[dn],a,e,u,s)}let o=e[zu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function il(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Rn(o)),or(o)&&EP(o,r);let s=n.type;if(s&8)il(t,e,n.child,r);else if(s&32){let a=bm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Rb(e,n);if(Array.isArray(a))r.push(...a);else{let u=gi(e[xn]);il(u[ge],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function EP(t,e){for(let n=Kt;n<t.length;n++){let r=t[n],i=r[ge].firstChild;i!==null&&il(r[ge],r,i,e)}t[mi]!==t[ir]&&e.push(t[mi])}var Kb=[];function bP(t){return t[Wt]??CP(t)}function CP(t){let e=Kb.pop()??Object.create(TP);return e.lView=t,e}function DP(t){t.lView[Wt]!==t&&(t.lView=null,Kb.push(t))}var TP=ye(L({},qs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{vl(t.lView)},consumerOnSignalRead(){this.lView[Wt]=this}});function SP(t){let e=t[Wt]??Object.create(AP);return e.lView=t,e}var AP=ye(L({},qs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=gi(t.lView);for(;e&&!Qb(e[ge]);)e=gi(e);e&&RE(e)},consumerOnSignalRead(){this.lView[Wt]=this}});function Qb(t){return t.type!==2}var xP=100;function Yb(t,e=!0,n=0){let r=t[An],i=r.rendererFactory,o=!1;o||i.begin?.();try{MP(t,n)}catch(s){throw e&&Wb(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function MP(t,e){let n=VE();try{v0(!0),Op(t,e);let r=0;for(;na(t);){if(r===xP)throw new Q(103,!1);r++,Op(t,1)}}finally{v0(n)}}function RP(t,e,n,r){let i=e[re];if((i&256)===256)return;let o=!1,s=!1;!o&&e[An].inlineEffectRunner?.flush(),cm(e);let a=!0,u=null,l=null;o||(Qb(t)?(l=bP(e),u=eu(l)):EI()===null?(a=!1,l=SP(e),u=eu(l)):e[Wt]&&(xf(e[Wt]),e[Wt]=null));try{ME(e),vN(t.bindingStartIndex),n!==null&&Vb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Fu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Vu(e,y,0,null),Jf(e,0)}if(s||NP(e),Jb(e,0),t.contentQueries!==null&&Gb(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Fu(e,y)}else{let y=t.contentHooks;y!==null&&Vu(e,y,1),Jf(e,1)}G1(t,e);let p=t.components;p!==null&&Xb(e,p,0);let g=t.viewQuery;if(g!==null&&Pp(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Fu(e,y)}else{let y=t.viewHooks;y!==null&&Vu(e,y,2),Jf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Yf]){for(let y of e[Yf])y();e[Yf]=null}o||(e[re]&=-73)}catch(h){throw o||vl(e),h}finally{l!==null&&(Sf(l,u),a&&DP(l)),um()}}function Jb(t,e){for(let n=ub(t);n!==null;n=lb(n))for(let r=Kt;r<n.length;r++){let i=n[r];Zb(i,e)}}function NP(t){for(let e=ub(t);e!==null;e=lb(e)){if(!(e[re]&Ku.HasTransplantedViews))continue;let n=e[Wu];for(let r=0;r<n.length;r++){let i=n[r];RE(i)}}}function PP(t,e,n){let r=Br(e,t);Zb(r,n)}function Zb(t,e){om(t)&&Op(t,e)}function Op(t,e){let r=t[ge],i=t[re],o=t[Wt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Af(o)),s||=!1,o&&(o.dirty=!1),t[re]&=-9217,s)RP(r,t,r.template,t[ln]);else if(i&8192){Jb(t,1);let a=r.components;a!==null&&Xb(t,a,1)}}function Xb(t,e,n){for(let r=0;r<e.length;r++)PP(t,e[r],n)}function Rm(t,e){let n=VE()?64:1088;for(t[An].changeDetectionScheduler?.notify(e);t;){t[re]|=n;let r=gi(t);if(pp(t)&&!r)return t;t=r}return null}var wi=class{get rootNodes(){let e=this._lView,n=e[ge];return il(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ln]}set context(e){this._lView[ln]=e}get destroyed(){return(this._lView[re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[At];if(or(e)){let n=e[Gu],r=n?n.indexOf(this):-1;r>-1&&(Mp(e,r),$u(n,r))}this._attachedToViewContainer=!1}Ab(this._lView[ge],this._lView)}onDestroy(e){NE(this._lView,e)}markForCheck(){Rm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){gp(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,Yb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=pp(this._lView),n=this._lView[bo];n!==null&&!e&&Cm(n,this._lView),Tb(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let n=pp(this._lView),r=this._lView[bo];r!==null&&!n&&Sb(r,this._lView),gp(this._lView)}},Tl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FP;let t=e;return t})(),OP=Tl,kP=class extends OP{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=wP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new wi(i)}};function FP(){return VP(Nt(),Pe())}function VP(t,e){return t.type&4?new kP(e,t,_l(t,e)):null}var iq=new RegExp(`^(\\d+)*(${i1}|${r1})*(.*)`);var LP=()=>null;function V0(t,e){return LP(t,e)}var ra=class{},Nm=new ee("",{providedIn:"root",factory:()=>!1});var eC=new ee(""),tC=new ee(""),kp=class{},ol=class{};function jP(t){let e=Error(`No component factory found for ${St(t)}.`);return e[UP]=t,e}var UP="ngComponent";var Fp=class{resolveComponentFactory(e){throw jP(e)}},Um=class Um{};Um.NULL=new Fp;var To=Um,So=class{},cr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>BP();let t=e;return t})();function BP(){let t=Pe(),e=Nt(),n=Br(e.index,t);return(Or(n)?n:t)[it]}var $P=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var L0=new Set;function ha(t){L0.has(t)||(L0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var nC=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Vp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=s0(i,a);else if(o==2){let u=a,l=e[++s];r=s0(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var sl=class extends To{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=pi(e);return new ia(n,this.ngModule)}};function j0(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:kr.None;e?n.push({propName:s,templateName:r,isSignal:(a&kr.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function HP(t){let e=t.toLowerCase();return e==="svg"?SE:e==="math"?oN:null}var ia=class extends ol{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=j0(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return j0(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=LR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Ce(null);try{i=i||this.ngModule;let s=i instanceof Qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new vp(e,s):e,u=a.get(So,null);if(u===null)throw new Q(407,!1);let l=a.get($P,null),h=a.get(nC,null),p=a.get(ra,null),g={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},y=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",P=r?Q1(y,r,this.componentDef.encapsulation,a):Db(y,S,HP(S)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let H=null;P!==null&&(H=wm(P,a,!0));let X=Sm(0,null,null,1,0,null,null,null,null,null,null),K=bl(null,X,null,R,null,null,g,y,a,null,H);cm(K);let Ie,He;try{let de=this.componentDef,b,v=null;de.findHostDirectiveDefs?(b=[],v=new Map,de.findHostDirectiveDefs(de,b,v),b.push(de)):b=[de];let w=zP(K,P),E=qP(w,P,de,b,K,g,y);He=xE(X,Mn),P&&KP(y,de,P,r),n!==void 0&&QP(He,this.ngContentSelectors,n),Ie=WP(E,de,b,v,K,[YP]),Mm(X,K,null)}finally{um()}return new Lp(this.componentType,Ie,_l(He,K),K,He)}finally{Ce(o)}}},Lp=class extends kp{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new wi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;xm(o[ge],o,i,e,n),this.previousInputValues.set(e,n);let s=Br(this._tNode.index,o);Rm(s,1)}}get injector(){return new hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zP(t,e){let n=t[ge],r=Mn;return t[r]=e,Cl(n,r,2,"#host",null)}function qP(t,e,n,r,i,o,s){let a=i[ge];GP(r,t,e,s);let u=null;e!==null&&(u=wm(e,i[Eo]));let l=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=bl(i,Bb(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&Np(a,t,r.length-1),Dl(i,p),i[t.index]=p}function GP(t,e,n,r){for(let i of t)e.mergedAttrs=Xs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vp(e,e.mergedAttrs,!0),n!==null&&Pb(r,n,e))}function WP(t,e,n,r,i,o){let s=Nt(),a=i[ge],u=hn(s,i);Hb(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let p=s.directiveStart+h,g=Do(i,a,p,s);_i(g,i)}zb(a,i,s),u&&_i(u,i);let l=Do(i,a,s.directiveStart+s.componentOffset,s);if(t[ln]=i[ln]=l,o!==null)for(let h of o)h(l,e);return Lb(a,s,i),l}function KP(t,e,n,r){if(r)lp(t,n,["ng-version","18.2.1"]);else{let{attrs:i,classes:o}=jR(e.selectors[0]);i&&lp(t,n,i),o&&o.length>0&&Nb(t,n,o.join(" "))}}function QP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function YP(){let t=Nt();fm(Pe()[ge],t)}var ko=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=JP;let t=e;return t})();function JP(){let t=Nt();return XP(t,Pe())}var ZP=ko,rC=class extends ZP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return _l(this._hostTNode,this._hostLView)}get injector(){return new hi(this._hostTNode,this._hostLView)}get parentInjector(){let e=pm(this._hostTNode,this._hostLView);if(WE(e)){let n=Ju(e,this._hostLView),r=Yu(e),i=n[ge].data[r+8];return new hi(i,n)}else return new hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=U0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Kt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=V0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,F0(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!tN(e),a;if(s)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new ia(pi(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let P=(s?l:this.parentInjector).get(Qt,null);P&&(o=P)}let h=pi(u.componentType??{}),p=V0(this._lContainer,h?.id??null),g=p?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,F0(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(aN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[At],l=new rC(u,u[dn],u[At]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return IP(s,i,o,r),e.attachToViewContainerRef(),oE(np(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=U0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Mp(this._lContainer,n);r&&($u(np(this._lContainer),n),Ab(r[ge],r))}detach(e){let n=this._adjustIndex(e,-1),r=Mp(this._lContainer,n);return r&&$u(np(this._lContainer),n)!=null?new wi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function U0(t){return t[Gu]}function np(t){return t[Gu]||(t[Gu]=[])}function XP(t,e){let n,r=e[t.index];return or(r)?n=r:(n=qb(r,e,null,t),e[t.index]=n,Dl(e,n)),tO(n,e,t,r),new rC(n,t,e)}function eO(t,e){let n=t[it],r=n.createComment(""),i=hn(e,t),o=Mb(n,i);return rl(n,o,r,V1(n,i),!1),r}var tO=iO,nO=()=>!1;function rO(t,e,n){return nO(t,e,n)}function iO(t,e,n,r){if(t[mi])return;let i;n.type&8?i=Rn(r):i=eO(e,n),t[mi]=i}function oO(t){return typeof t=="function"&&t[Zn]!==void 0}function fa(t,e){ha("NgSignals");let n=PI(t),r=n[Zn];return e?.equal&&(r.equal=e.equal),n.set=i=>Mf(r,i),n.update=i=>OI(r,i),n.asReadonly=sO.bind(n),n}function sO(){let t=this[Zn];if(t.readonlyFn===void 0){let e=()=>this();e[Zn]=t,t.readonlyFn=e}return t.readonlyFn}function iC(t){return oO(t)&&typeof t.set=="function"}function aO(t){return Object.getPrototypeOf(t.prototype).constructor}function fn(t){let e=aO(t.type),n=!0,r=[t];for(;e;){let i;if(Fr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Nu(t.inputs),s.inputTransforms=Nu(t.inputTransforms),s.declaredInputs=Nu(t.declaredInputs),s.outputs=Nu(t.outputs);let a=i.hostBindings;a&&hO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&lO(t,u),l&&dO(t,l),cO(t,i),oR(t.outputs,i.outputs),Fr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===fn&&(n=!1)}}e=Object.getPrototypeOf(e)}uO(r)}function cO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function uO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xs(i.hostAttrs,n=Xs(n,i.hostAttrs))}}function Nu(t){return t===_o?{}:t===Gt?[]:t}function lO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function dO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function hO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var jr=class{},oa=class{};var jp=class extends jr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sl(this);let o=fE(e);this._bootstrapComponents=Cb(o.bootstrap),this._r3Injector=nb(e,n,[{provide:jr,useValue:this},{provide:To,useValue:this.componentFactoryResolver},...r],St(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Up=class extends oa{constructor(e){super(),this.moduleType=e}create(e){return new jp(this.moduleType,e,[])}};var al=class extends jr{constructor(e){super(),this.componentFactoryResolver=new sl(this),this.instance=null;let n=new ea([...e.providers,{provide:jr,useValue:this},{provide:To,useValue:this.componentFactoryResolver}],e.parent||rm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pm(t,e,n=null){return new al({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function oC(t){return pO(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function fO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function pO(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function sC(t,e,n){return t[e]=n}function mO(t,e){return t[e]}function pa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function gO(t){return(t.flags&32)===32}function yO(t,e,n,r,i,o,s,a,u){let l=e.consts,h=Cl(e,t,4,s||null,a||null);$b(e,n,h,Qu(l,u)),fm(e,h);let p=h.tView=Sm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function vO(t,e,n,r,i,o,s,a,u,l){let h=n+Mn,p=e.firstCreatePass?yO(h,e,t,r,i,o,s,a,u):e.data[h];ua(p,!1);let g=_O(e,t,p,n);dm()&&Dm(e,t,g,p),_i(g,t);let y=qb(g,t,g,p);return t[h]=y,Dl(t,y),rO(y,p,t),im(p)&&jb(e,t,p),u!=null&&Ub(t,p,l),p}function ue(t,e,n,r,i,o,s,a){let u=Pe(),l=Rt(),h=Qu(l.consts,o);return vO(u,l,t,e,n,r,i,h,s,a),ue}var _O=wO;function wO(t,e,n,r){return hm(!0),e[it].createComment("")}function aC(t,e,n,r){return pa(t,am(),n)?e+hl(n)+r:ar}function Pu(t,e){return t<<17|e<<2}function Ii(t){return t>>17&32767}function IO(t){return(t&2)==2}function EO(t,e){return t&131071|e<<17}function Bp(t){return t|2}function Ao(t){return(t&131068)>>2}function rp(t,e){return t&-131069|e<<2}function bO(t){return(t&1)===1}function $p(t){return t|1}function CO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ii(s),u=Ao(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ca(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Ii(t[a+1]);t[r+1]=Pu(g,a),g!==0&&(t[g+1]=rp(t[g+1],r)),t[a+1]=EO(t[a+1],r)}else t[r+1]=Pu(a,0),a!==0&&(t[a+1]=rp(t[a+1],r)),a=r;else t[r+1]=Pu(u,0),a===0?a=r:t[u+1]=rp(t[u+1],r),u=r;l&&(t[r+1]=Bp(t[r+1])),B0(t,h,r,!0),B0(t,h,r,!1),DO(e,h,t,r,o),s=Pu(a,u),o?e.classBindings=s:e.styleBindings=s}function DO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ca(o,e)>=0&&(n[r+1]=$p(n[r+1]))}function B0(t,e,n,r){let i=t[n+1],o=e===null,s=r?Ii(i):Ao(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];TO(u,e)&&(a=!0,t[s+1]=r?$p(l):Bp(l)),s=r?Ii(l):Ao(l)}a&&(t[n+1]=r?Bp(i):$p(i))}function TO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ca(t,e)>=0:!1}function B(t,e,n){let r=Pe(),i=am();if(pa(r,i,e)){let o=Rt(),s=lm();Am(o,s,r,t,e,r[it],n,!1)}return B}function $0(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";xm(t,n,o[s],s,r)}function Fo(t,e){return SO(t,e,null,!0),Fo}function SO(t,e,n,r){let i=Pe(),o=Rt(),s=_N(2);if(o.firstUpdatePass&&xO(o,t,s,r),e!==ar&&pa(i,s,e)){let a=o.data[No()];OO(o,a,i,i[it],t,i[s+1]=kO(e,n),r,s)}}function AO(t,e){return e>=t.expandoStartIndex}function xO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[No()],s=AO(t,n);FO(o,r)&&e===null&&!s&&(e=!1),e=MO(i,o,e,r),CO(i,o,e,n,s,r)}}function MO(t,e,n,r){let i=bN(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ip(null,t,e,n,r),n=sa(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=ip(i,t,e,n,r),o===null){let u=RO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=ip(null,t,e,u[1],r),u=sa(u,e.attrs,r),NO(t,e,r,u))}else o=PO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function RO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ao(r)!==0)return t[Ii(r)]}function NO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ii(i)]=r}function PO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=sa(r,s,n)}return sa(r,e.attrs,n)}function ip(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=sa(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function sa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),DR(t,s,n?!0:e[++o]))}return t===void 0?null:t}function OO(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=bO(l)?H0(u,e,n,i,Ao(l),s):void 0;if(!cl(h)){cl(o)||IO(l)&&(o=H0(u,null,n,i,a,s));let p=AE(No(),n);z1(r,s,p,i,o)}}function H0(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===ar&&(g=p?Gt:void 0);let y=p?Kf(g,r):h===r?g:void 0;if(l&&!cl(y)&&(y=Kf(u,r)),cl(y)&&(a=y,s))return a;let S=t[i+1];i=s?Ii(S):Ao(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Kf(u,r))}return a}function cl(t){return t!==void 0}function kO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=St(la(t)))),t}function FO(t,e){return(t.flags&(e?8:16))!==0}function VO(t,e,n,r,i,o){let s=e.consts,a=Qu(s,i),u=Cl(e,t,2,r,a);return $b(e,n,u,Qu(s,o)),u.attrs!==null&&Vp(u,u.attrs,!1),u.mergedAttrs!==null&&Vp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function x(t,e,n,r){let i=Pe(),o=Rt(),s=Mn+t,a=i[it],u=o.firstCreatePass?VO(s,o,i,e,n,r):o.data[s],l=LO(o,i,u,a,e,t);i[s]=l;let h=im(u);return ua(u,!0),Pb(a,l,u),!gO(u)&&dm()&&Dm(o,i,l,u),lN()===0&&_i(l,i),dN(),h&&(jb(o,i,u),Lb(o,u,i)),r!==null&&Ub(i,u),x}function N(){let t=Nt();FE()?yN():(t=t.parent,ua(t,!1));let e=t;pN(e)&&mN(),hN();let n=Rt();return n.firstCreatePass&&(fm(n,t),EE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&MN(e)&&$0(n,e,Pe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&RN(e)&&$0(n,e,Pe(),e.stylesWithoutHost,!1),N}function Le(t,e,n,r){return x(t,e,n,r),N(),Le}var LO=(t,e,n,r,i,o)=>(hm(!0),Db(r,i,TN()));function Me(){return Pe()}var ul="en-US";var jO=ul;function UO(t){typeof t=="string"&&(jO=t.toLowerCase().replace(/_/g,"-"))}var BO=(t,e,n)=>{};function J(t,e,n,r){let i=Pe(),o=Rt(),s=Nt();return cC(o,i,i[it],s,t,e,r),J}function $O(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[qu],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function cC(t,e,n,r,i,o,s){let a=im(r),l=t.firstCreatePass&&mP(t),h=e[ln],p=pP(e),g=!0;if(r.type&3||s){let P=hn(r,e),R=s?s(P):P,H=p.length,X=s?Ie=>s(Rn(Ie[r.index])):r.index,K=null;if(!s&&a&&(K=$O(t,e,i,r.index)),K!==null){let Ie=K.__ngLastListenerFn__||K;Ie.__ngNextListenerFn__=o,K.__ngLastListenerFn__=o,g=!1}else{o=q0(r,e,h,o),BO(P,i,o);let Ie=n.listen(R,i,o);p.push(o,Ie),l&&l.push(i,X,H,H+1)}}else o=q0(r,e,h,o);let y=r.outputs,S;if(g&&y!==null&&(S=y[i])){let P=S.length;if(P)for(let R=0;R<P;R+=2){let H=S[R],X=S[R+1],He=e[H][X].subscribe(o),de=p.length;p.push(o,He),l&&l.push(i,r.index,de,-(de+1))}}}function z0(t,e,n,r){let i=Ce(null);try{return Dn(6,e,n),n(r)!==!1}catch(o){return Wb(t,o),!1}finally{Dn(7,e,n),Ce(i)}}function q0(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Br(t.index,e):e;Rm(s,5);let a=z0(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=z0(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function V(t=1){return DN(t)}function Om(t,e,n){return uC(t,"",e,"",n),Om}function uC(t,e,n,r,i){let o=Pe(),s=aC(o,e,n,r);if(s!==ar){let a=Rt(),u=lm();Am(a,u,o,t,s,o[it],i,!1)}return uC}function HO(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function G(t,e=""){let n=Pe(),r=Rt(),i=t+Mn,o=r.firstCreatePass?Cl(r,i,1,e,null):r.data[i],s=zO(r,n,o,e,t);n[i]=s,dm()&&Dm(r,n,s,o),ua(o,!1)}var zO=(t,e,n,r,i)=>(hm(!0),S1(e[it],r));function Ue(t){return Sl("",t,""),Ue}function Sl(t,e,n){let r=Pe(),i=aC(r,t,e,n);return i!==ar&&gP(r,No(),i),Sl}function Yt(t,e,n){iC(e)&&(e=e());let r=Pe(),i=am();if(pa(r,i,e)){let o=Rt(),s=lm();Am(o,s,r,t,e,r[it],n,!1)}return Yt}function pn(t,e){let n=iC(t);return n&&t.set(e),n}function Jt(t,e){let n=Pe(),r=Rt(),i=Nt();return cC(r,n,n[it],i,t,e),Jt}function qO(t,e,n){let r=Rt();if(r.firstCreatePass){let i=Fr(t);Hp(n,r.data,r.blueprint,i,!0),Hp(e,r.data,r.blueprint,i,!1)}}function Hp(t,e,n,r,i){if(t=Tt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Hp(t[o],e,n,r,i);else{let o=Rt(),s=Pe(),a=Nt(),u=Io(t)?t:Tt(t.provide),l=_E(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Io(t)||!t.multi){let y=new vi(l,i,j),S=sp(u,e,i?h:h+g,p);S===-1?(wp(Xu(a,s),o,u),op(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[S]=y,s[S]=y)}else{let y=sp(u,e,h+g,p),S=sp(u,e,h,h+g),P=y>=0&&n[y],R=S>=0&&n[S];if(i&&!R||!i&&!P){wp(Xu(a,s),o,u);let H=KO(i?WO:GO,n.length,i,r,l);!i&&R&&(n[S].providerFactory=H),op(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(H),s.push(H)}else{let H=lC(n[i?S:y],l,!i&&r);op(o,t,y>-1?y:S,H)}!i&&r&&R&&n[S].componentProviders++}}}function op(t,e,n,r){let i=Io(e),o=WR(e);if(i||o){let u=(o?Tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function lC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function sp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function GO(t,e,n,r){return zp(this.multi,[])}function WO(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Do(n,n[ge],this.providerFactory.index,r);o=a.slice(0,s),zp(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],zp(i,o);return o}function zp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function KO(t,e,n,r,i){let o=new vi(t,n,j);return o.multi=[],o.index=e,o.componentProviders=0,lC(o,i,r&&!n),o}function Ei(t,e=[]){return n=>{n.providersResolver=(r,i)=>qO(r,i?i(t):t,e)}}var QO=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=gE(!1,r.type),o=i.length>0?Pm([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(Z(Qt))});let t=e;return t})();function Re(t){ha("NgStandalone"),t.getStandaloneInjector=e=>e.get(QO).getOrCreateStandaloneInjector(t)}function Al(t,e,n){let r=sm()+t,i=Pe();return i[r]===ar?sC(i,r,n?e.call(n):e()):mO(i,r)}function Vo(t,e,n,r){return dC(Pe(),sm(),t,e,n,r)}function YO(t,e){let n=t[e];return n===ar?void 0:n}function dC(t,e,n,r,i,o){let s=e+n;return pa(t,s,i)?sC(t,s+1,o?r.call(o,i):r(i)):YO(t,s+1)}function xl(t,e){let n=Rt(),r,i=t+Mn;n.firstCreatePass?(r=JO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=fi(r.type,!0)),s,a=Mt(j);try{let u=Zu(!1),l=o();return Zu(u),HO(n,Pe(),i,l),l}finally{Mt(a)}}function JO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ml(t,e,n){let r=t+Mn,i=Pe(),o=sN(i,r);return ZO(i,r)?dC(i,sm(),e,o.transform,n,o):o.transform(n)}function ZO(t,e){return t[ge].data[e].pure}var Rl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var hC=new ee("");function Hr(t){return!!t&&typeof t.then=="function"}function km(t){return!!t&&typeof t.subscribe=="function"}var Nl=new ee(""),fC=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=U(Nl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Hr(s))r.push(s);else if(km(s)){let a=new Promise((u,l)=>{s.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fm=new ee("");function XO(){NI(()=>{throw new Q(600,!1)})}function ek(t){return t.isBoundToModule}var tk=10;function nk(t,e,n){try{let r=n();return Hr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var bi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(YN),this.afterRenderEffectManager=U(nC),this.zonelessEnabled=U(Nm),this.externalTestViews=new Set,this.beforeRender=new Ke,this.afterTick=new Ke,this.componentTypes=[],this.components=[],this.isStable=U(Po).hasPendingTasks.pipe(me(r=>!r)),this._injector=U(Qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof ol;if(!this._injector.get(fC).done){let y=!o&&hE(r),S=!1;throw new Q(405,S)}let a;o?a=r:a=this._injector.get(To).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=ek(a)?void 0:this._injector.get(jr),l=i||a.selector,h=a.create(Vr.NULL,[],l,u),p=h.location.nativeElement,g=h.injector.get(hC,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Lu(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Q(101,!1);let i=Ce(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,Ce(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(So,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<tk;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:u,notifyErrorHandler:l}of this._views)rk(u,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:u})=>na(u))&&(s.execute(),!this.allViews.some(({_lView:u})=>na(u))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Lu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Fm,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Lu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Lu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function rk(t,e,n,r){if(!n&&!na(t))return;Yb(t,e,n&&!r?0:1)}var qp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Vm=(()=>{let e=class e{compileModuleSync(r){return new Up(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=fE(r),s=Cb(o.declarations).reduce((a,u)=>{let l=pi(u);return l&&a.push(new ia(l)),a},[]);return new qp(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ik=(()=>{let e=class e{constructor(){this.zone=U(rt),this.changeDetectionScheduler=U(ra),this.applicationRef=U(bi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ok=new ee("",{factory:()=>!1});function pC({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new rt(ye(L({},gC()),{scheduleInRootZone:n})),[{provide:rt,useFactory:t},{provide:wo,multi:!0,useFactory:()=>{let r=U(ik,{optional:!0});return()=>r.initialize()}},{provide:wo,multi:!0,useFactory:()=>{let r=U(sk);return()=>{r.initialize()}}},e===!0?{provide:eC,useValue:!0}:[],{provide:tC,useValue:n??rb}]}function mC(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=pC({ngZoneFactory:()=>{let i=gC(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ha("NgZone_CoalesceEvent"),new rt(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return pl([{provide:ok,useValue:!0},{provide:Nm,useValue:!1},r])}function gC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sk=(()=>{let e=class e{constructor(){this.subscription=new We,this.initialized=!1,this.zone=U(rt),this.pendingTasks=U(Po)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{rt.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{rt.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ak=(()=>{let e=class e{constructor(){this.appRef=U(bi),this.taskService=U(Po),this.ngZone=U(rt),this.zonelessEnabled=U(Nm),this.disableScheduling=U(eC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new We,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(tl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(tC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Dp||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?b0:ob;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick(this.shouldRefreshViews))):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick(this.shouldRefreshViews)))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(tl+this.angularZoneId))}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,b0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ck(){return typeof $localize<"u"&&$localize.locale||ul}var Lm=new ee("",{providedIn:"root",factory:()=>U(Lm,fe.Optional|fe.SkipSelf)||ck()});var yC=new ee("");function Ou(t){return!!t.platformInjector}function uk(t){let e=Ou(t)?t.r3Injector:t.moduleRef.injector,n=e.get(rt);return n.run(()=>{Ou(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Lr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Ou(t)){let o=()=>e.destroy(),s=t.platformInjector.get(yC);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else t.moduleRef.onDestroy(()=>{Lu(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return nk(r,n,()=>{let o=e.get(fC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Lm,ul);if(UO(s||ul),Ou(t)){let a=e.get(bi);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return lk(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function lk(t,e){let n=t.injector.get(bi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new Q(-403,!1);e.push(t)}var ju=null;function dk(t=[],e){return Vr.create({name:e,providers:[{provide:ml,useValue:"platform"},{provide:yC,useValue:new Set([()=>ju=null])},...t]})}function hk(t=[]){if(ju)return ju;let e=dk(t);return ju=e,XO(),fk(e),e}function fk(t){t.get(vm,null)?.forEach(n=>n())}var zr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=pk;let t=e;return t})();function pk(t){return mk(Nt(),Pe(),(t&16)===16)}function mk(t,e,n){if(yl(t)&&!n){let r=Br(t.index,e);return new wi(r,r)}else if(t.type&175){let r=e[xn];return new wi(r,e)}return null}var Gp=class{constructor(){}supports(e){return oC(e)}create(e){return new Wp(e)}},gk=(t,e)=>e,Wp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<G0(r,i,o)?n:r,a=G0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,S=y+g;h<=S&&S<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!oC(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,fO(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Kp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ll),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ll),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Kp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Qp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ll=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Qp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function G0(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function W0(){return new jm([new Gp])}var jm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||W0()),deps:[[e,new iE,new Zp]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new Q(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:W0});let t=e;return t})();function vC(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=hk(r),o=[pC({}),{provide:ra,useExisting:ak},...n||[]],s=new al({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return uk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var _C=new ee("");function Pl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ma(t,e){ha("NgSignals");let n=xI(t);return e?.equal&&(n[Zn].equal=e.equal),n}function mn(t){let e=Ce(null);try{return t()}finally{Ce(e)}}var DC=null;function ur(){return DC}function TC(t){DC??=t}var Ol=class{};var jt=new ee(""),SC=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(_k),providedIn:"platform"});let t=e;return t})();var _k=(()=>{let e=class e extends SC{constructor(){super(),this._doc=U(jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ur().getBaseHref(this._doc)}onPopState(r){let i=ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function AC(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function wC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ci(t){return t&&t[0]!=="?"?"?"+t:t}var Fl=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(xC),providedIn:"root"});let t=e;return t})(),wk=new ee(""),xC=(()=>{let e=class e extends Fl{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??U(jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return AC(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ci(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Ci(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Ci(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Z(SC),Z(wk,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ga=(()=>{let e=class e{constructor(r){this._subject=new Ae,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=bk(wC(IC(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ci(i))}normalize(r){return e.stripTrailingSlash(Ek(this._basePath,IC(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ci(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ci(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Ci,e.joinWithSlash=AC,e.stripTrailingSlash=wC,e.\u0275fac=function(i){return new(i||e)(Z(Fl))},e.\u0275prov=W({token:e,factory:()=>Ik(),providedIn:"root"});let t=e;return t})();function Ik(){return new ga(Z(Fl))}function Ek(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function IC(t){return t.replace(/\/index.html$/,"")}function bk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function MC(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Bm=/\s+/,EC=[],Vl=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=EC,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Bm):EC}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Bm):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Bm).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(j(Nn),j(cr))},e.\u0275dir=Ye({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var $m=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Pn=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new $m(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),bC(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);bC(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(j(ko),j(Tl),j(jm))},e.\u0275dir=Ye({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function bC(t,e){t.context.$implicit=e.item}var ot=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Hm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){CC("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){CC("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(j(ko),j(Tl))},e.\u0275dir=Ye({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Hm=class{constructor(){this.$implicit=null,this.ngIf=null}};function CC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${St(e)}'.`)}function RC(t,e){return new Q(2100,!1)}var zm=class{createSubscription(e,n){return mn(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){mn(()=>e.unsubscribe())}},qm=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},Ck=new qm,Dk=new zm,NC=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Hr(r))return Ck;if(km(r))return Dk;throw RC(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(j(zr,16))},e.\u0275pipe=tm({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var PC=(()=>{let e=class e{transform(r){if(r==null)return null;if(typeof r!="string")throw RC(e,r);return r.toUpperCase()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=tm({name:"uppercase",type:e,pure:!0,standalone:!0});let t=e;return t})();var OC="browser",Tk="server";function Wm(t){return t===Tk}var kl=class{};var Ym=class extends Ol{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Jm=class t extends Ym{static makeCurrent(){TC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Sk();return n==null?null:Ak(n)}resetBaseElement(){ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return MC(document.cookie,e)}},ya=null;function Sk(){return ya=ya||document.querySelector("base"),ya?ya.getAttribute("href"):null}function Ak(t){return new URL(t,document.baseURI).pathname}var xk=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Ll=new ee(""),LC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Z(Ll),Z(rt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),va=class{constructor(e){this._doc=e}},Km="ng-app-id",jC=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wm(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Km}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Km),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Km,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Z(jt),Z(ym),Z(_m,8),Z(Oo))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Qm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xm=/%COMP%/g,UC="%COMP%",Mk=`_nghost-${UC}`,Rk=`_ngcontent-${UC}`,Nk=!0,Pk=new ee("",{providedIn:"root",factory:()=>Nk});function Ok(t){return Rk.replace(Xm,t)}function kk(t){return Mk.replace(Xm,t)}function BC(t,e){return e.map(n=>n.replace(Xm,t))}var kC=(()=>{let e=class e{constructor(r,i,o,s,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Wm(u),this.defaultRenderer=new _a(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Sn.ShadowDom&&(i=ye(L({},i),{encapsulation:Sn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof jl?o.applyToHost(r):o instanceof wa&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Sn.Emulated:s=new jl(l,h,i,this.appId,p,a,u,g);break;case Sn.ShadowDom:return new Zm(l,h,r,i,a,u,this.nonce,g);default:s=new wa(l,h,i,p,a,u,g);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Z(LC),Z(jC),Z(ym),Z(Pk),Z(jt),Z(Oo),Z(rt),Z(_m))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),_a=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Qm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(FC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(FC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Qm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Qm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(tr.DashCase|tr.Important)?e.style.setProperty(n,r,i&tr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ur().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function FC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Zm=class extends _a{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=BC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wa=class extends _a{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?BC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jl=class extends wa{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=Ok(l),this.hostAttr=kk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Fk=(()=>{let e=class e extends va{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(Z(jt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Vk=(()=>{let e=class e extends va{constructor(r){super(r),this.delegate=U(_C,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(Z(jt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),VC=["alt","control","meta","shift"],Lk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Uk=(()=>{let e=class e extends va{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ur().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),VC.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=Lk[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),VC.forEach(a=>{if(a!==o){let u=jk[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Z(jt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function $C(t,e){return vC(L({rootComponent:t},Bk(e)))}function Bk(t){return{appProviders:[...Gk,...t?.providers??[]],platformProviders:qk}}function $k(){Jm.makeCurrent()}function Hk(){return new Lr}function zk(){return hb(document),document}var qk=[{provide:Oo,useValue:OC},{provide:vm,useValue:$k,multi:!0},{provide:jt,useFactory:zk,deps:[]}];var Gk=[{provide:ml,useValue:"root"},{provide:Lr,useFactory:Hk,deps:[]},{provide:Ll,useClass:Fk,multi:!0,deps:[jt,rt,Oo]},{provide:Ll,useClass:Uk,multi:!0,deps:[jt]},{provide:Ll,useClass:Vk,multi:!0},kC,jC,LC,{provide:So,useExisting:kC},{provide:kl,useClass:xk,deps:[]},[]];var HC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Z(jt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var he="primary",Va=Symbol("RouteTitle"),ig=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ho(t){return new ig(t)}function Qk(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Yk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!On(t[n],e[n]))return!1;return!0}function On(t,e){let n=t?og(t):void 0,r=e?og(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!JC(t[i],e[i]))return!1;return!0}function og(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function JC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function ZC(t){return t.length>0?t[t.length-1]:null}function qr(t){return Uf(t)?t:Hr(t)?Ge(Promise.resolve(t)):se(t)}var Jk={exact:eD,subset:tD},XC={exact:Zk,subset:Xk,ignored:()=>!0};function zC(t,e,n){return Jk[n.paths](t.root,e.root,n.matrixParams)&&XC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Zk(t,e){return On(t,e)}function eD(t,e,n){if(!Ti(t.segments,e.segments)||!$l(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!eD(t.children[r],e.children[r],n))return!1;return!0}function Xk(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>JC(t[n],e[n]))}function tD(t,e,n){return nD(t,e,e.segments,n)}function nD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ti(i,n)||e.hasChildren()||!$l(i,n,r))}else if(t.segments.length===n.length){if(!Ti(t.segments,n)||!$l(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!tD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ti(t.segments,i)||!$l(t.segments,i,r)||!t.children[he]?!1:nD(t.children[he],e,o,r)}}function $l(t,e,n){return e.every((r,i)=>XC[n](t[i].parameters,r.parameters))}var dr=class{constructor(e=new Ne([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ho(this.queryParams),this._queryParamMap}toString(){return nF.serialize(this)}},Ne=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hl(this)}},Di=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ho(this.parameters),this._parameterMap}toString(){return iD(this)}};function eF(t,e){return Ti(t,e)&&t.every((n,r)=>On(n.parameters,e[r].parameters))}function Ti(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function tF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===he&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==he&&(n=n.concat(e(i,r)))}),n}var Rg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new Sa,providedIn:"root"});let t=e;return t})(),Sa=class{parse(e){let n=new ag(e);return new dr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ia(e.root,!0)}`,r=oF(e.queryParams),i=typeof e.fragment=="string"?`#${rF(e.fragment)}`:"";return`${n}${r}${i}`}},nF=new Sa;function Hl(t){return t.segments.map(e=>iD(e)).join("/")}function Ia(t,e){if(!t.hasChildren())return Hl(t);if(e){let n=t.children[he]?Ia(t.children[he],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==he&&r.push(`${i}:${Ia(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=tF(t,(r,i)=>i===he?[Ia(t.children[he],!1)]:[`${i}:${Ia(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[he]!=null?`${Hl(t)}/${n[0]}`:`${Hl(t)}/(${n.join("//")})`}}function rD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ul(t){return rD(t).replace(/%3B/gi,";")}function rF(t){return encodeURI(t)}function sg(t){return rD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zl(t){return decodeURIComponent(t)}function qC(t){return zl(t.replace(/\+/g,"%20"))}function iD(t){return`${sg(t.path)}${iF(t.parameters)}`}function iF(t){return Object.entries(t).map(([e,n])=>`;${sg(e)}=${sg(n)}`).join("")}function oF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ul(n)}=${Ul(i)}`).join("&"):`${Ul(n)}=${Ul(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var sF=/^[^\/()?;#]+/;function eg(t){let e=t.match(sF);return e?e[0]:""}var aF=/^[^\/()?;=#]+/;function cF(t){let e=t.match(aF);return e?e[0]:""}var uF=/^[^=?&#]+/;function lF(t){let e=t.match(uF);return e?e[0]:""}var dF=/^[^&#]+/;function hF(t){let e=t.match(dF);return e?e[0]:""}var ag=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[he]=new Ne(e,n)),r}parseSegment(){let e=eg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Di(zl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=cF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=eg(this.remaining);i&&(r=i,this.capture(r))}e[zl(n)]=zl(r)}parseQueryParam(e){let n=lF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=hF(this.remaining);s&&(r=s,this.capture(r))}let i=qC(n),o=qC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=eg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[he]:new Ne([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function oD(t){return t.segments.length>0?new Ne([],{[he]:t}):t}function sD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=sD(i);if(r===he&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ne(t.segments,e);return fF(n)}function fF(t){if(t.numberOfChildren===1&&t.children[he]){let e=t.children[he];return new Ne(t.segments.concat(e.segments),e.children)}return t}function Aa(t){return t instanceof dr}function pF(t,e,n=null,r=null){let i=aD(t);return cD(i,e,n,r)}function aD(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Ne(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=oD(r);return e??i}function cD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return tg(i,i,i,n,r);let o=mF(e);if(o.toRoot())return tg(i,i,new Ne([],{}),n,r);let s=gF(o,i,t),a=s.processChildren?Ca(s.segmentGroup,s.index,o.commands):lD(s.segmentGroup,s.index,o.commands);return tg(i,s.segmentGroup,a,n,r)}function ql(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function xa(t){return typeof t=="object"&&t!=null&&t.outlets}function tg(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=uD(t,e,n);let a=oD(sD(s));return new dr(a,o,i)}function uD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=uD(o,e,n)}),new Ne(t.segments,r)}var Gl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ql(r[0]))throw new Q(4003,!1);let i=r.find(xa);if(i&&i!==ZC(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function mF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Gl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Gl(n,e,r)}var Uo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function gF(t,e,n){if(t.isAbsolute)return new Uo(e,!0,0);if(!n)return new Uo(e,!1,NaN);if(n.parent===null)return new Uo(n,!0,0);let r=ql(t.commands[0])?0:1,i=n.segments.length-1+r;return yF(n,i,t.numberOfDoubleDots)}function yF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Uo(r,!1,i-o)}function vF(t){return xa(t[0])?t[0].outlets:{[he]:t}}function lD(t,e,n){if(t??=new Ne([],{}),t.segments.length===0&&t.hasChildren())return Ca(t,e,n);let r=_F(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ne(t.segments.slice(0,r.pathIndex),{});return o.children[he]=new Ne(t.segments.slice(r.pathIndex),t.children),Ca(o,0,i)}else return r.match&&i.length===0?new Ne(t.segments,{}):r.match&&!t.hasChildren()?cg(t,e,n):r.match?Ca(t,0,i):cg(t,e,n)}function Ca(t,e,n){if(n.length===0)return new Ne(t.segments,{});{let r=vF(n),i={};if(Object.keys(r).some(o=>o!==he)&&t.children[he]&&t.numberOfChildren===1&&t.children[he].segments.length===0){let o=Ca(t.children[he],e,n);return new Ne(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ne(t.segments,i)}}function _F(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(xa(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!WC(u,l,s))return o;r+=2}else{if(!WC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function cg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(xa(o)){let u=wF(o.outlets);return new Ne(r,u)}if(i===0&&ql(n[0])){let u=t.segments[e];r.push(new Di(u.path,GC(n[0]))),i++;continue}let s=xa(o)?o.outlets[he]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ql(a)?(r.push(new Di(s,GC(a))),i+=2):(r.push(new Di(s,{})),i++)}return new Ne(r,{})}function wF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=cg(new Ne([],{}),0,r))}),e}function GC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function WC(t,e,n){return t==n.path&&On(e,n.parameters)}var Da="imperative",ft=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ft||{}),Zt=class{constructor(e,n){this.id=e,this.url=n}},Ma=class extends Zt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yn=class extends Zt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Bt||{}),ug=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ug||{}),lr=class extends Zt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Si=class extends Zt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ft.NavigationSkipped}},Ra=class extends Zt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wl=class extends Zt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lg=class extends Zt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dg=class extends Zt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hg=class extends Zt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fg=class extends Zt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pg=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mg=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gg=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yg=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vg=class{constructor(e){this.snapshot=e,this.type=ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_g=class{constructor(e){this.snapshot=e,this.type=ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Na=class{},zo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function IF(t,e){return t.providers&&!t._injector&&(t._injector=Pm(t.providers,e,`Route: ${t.path}`)),t._injector??e}function gn(t){return t.outlet||he}function EF(t,e){let n=t.filter(r=>gn(r)===e);return n.push(...t.filter(r=>gn(r)!==e)),n}function La(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var wg=class{get injector(){return La(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ed(this.rootInjector),this.attachRef=null}},ed=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new wg(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(Z(Qt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ig(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ig(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Eg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Eg(e,this._root).map(n=>n.value)}};function Ig(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ig(t,n);if(r)return r}return null}function Eg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Eg(t,n);if(r.length)return r.unshift(e),r}return[]}var Ut=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function jo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ql=class extends Kl{constructor(e,n){super(e),this.snapshot=n,Ng(this,e)}toString(){return this.snapshot.toString()}};function dD(t){let e=bF(t),n=new tt([new Di("",{})]),r=new tt({}),i=new tt({}),o=new tt({}),s=new tt(""),a=new kn(n,r,o,s,i,he,t,e.root);return a.snapshot=e.root,new Ql(new Ut(a,[]),e)}function bF(t){let e={},n={},r={},i="",o=new Bo([],e,r,i,n,he,t,null,{});return new Jl("",new Ut(o,[]))}var kn=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(me(l=>l[Va]))??se(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>Ho(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>Ho(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&fD(i)&&(r.resolve[Va]=i.title),r}var Bo=class{get title(){return this.data?.[Va]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ho(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ho(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Jl=class extends Kl{constructor(e,n){super(n),this.url=e,Ng(this,n)}toString(){return hD(this._root)}};function Ng(t,e){e.value._routerState=t,e.children.forEach(n=>Ng(t,n))}function hD(t){let e=t.children.length>0?` { ${t.children.map(hD).join(", ")} } `:"";return`${t.value}${e}`}function ng(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,On(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),On(e.params,n.params)||t.paramsSubject.next(n.params),Yk(e.url,n.url)||t.urlSubject.next(n.url),On(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function bg(t,e){let n=On(t.params,e.params)&&eF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||bg(t.parent,e.parent))}function fD(t){return typeof t.title=="string"||t.title===null}var Pg=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new Ae,this.deactivateEvents=new Ae,this.attachEvents=new Ae,this.detachEvents=new Ae,this.parentContexts=U(ed),this.location=U(ko),this.changeDetector=U(zr),this.inputBinder=U(Og,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Cg(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ye({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ur]});let t=e;return t})(),Cg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===kn?this.route:e===ed?this.childContexts:this.parent.get(e,n)}},Og=new ee("");function CF(t,e,n){let r=Pa(t,e._root,n?n._root:void 0);return new Ql(r,e)}function Pa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=DF(t,e,n);return new Ut(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Pa(t,a)),s}}let r=TF(e.value),i=e.children.map(o=>Pa(t,o));return new Ut(r,i)}}function DF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Pa(t,r,i);return Pa(t,r)})}function TF(t){return new kn(new tt(t.url),new tt(t.params),new tt(t.queryParams),new tt(t.fragment),new tt(t.data),t.outlet,t.component,t)}var Oa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},pD="ngNavigationCancelingError";function Zl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Aa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mD(!1,Bt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function mD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[pD]=!0,n.cancellationCode=e,n}function SF(t){return gD(t)&&Aa(t.url)}function gD(t){return!!t&&t[pD]}var AF=(t,e,n,r)=>me(i=>(new Dg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Dg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ng(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=jo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=jo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new _g(o.value.snapshot))}),e.children.length&&this.forwardEvent(new yg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(ng(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ng(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Xl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$o=class{constructor(e,n){this.component=e,this.route=n}};function xF(t,e,n){let r=t._root,i=e?e._root:null;return Ea(r,i,n,[r.value])}function MF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Go(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!J0(t)?t:e.get(t):r}function Ea(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=jo(e);return t.children.forEach(s=>{RF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ta(a,n.getContext(s),i)),i}function RF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=NF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Xl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ea(t,e,a?a.children:null,r,i):Ea(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $o(a.outlet.component,s))}else s&&Ta(e,a,i),i.canActivateChecks.push(new Xl(r)),o.component?Ea(t,null,a?a.children:null,r,i):Ea(t,null,n,r,i);return i}function NF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ti(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ti(t.url,e.url)||!On(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bg(t,e)||!On(t.queryParams,e.queryParams);case"paramsChange":default:return!bg(t,e)}}function Ta(t,e,n){let r=jo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ta(s,e.children.getContext(o),n):Ta(s,null,n):Ta(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new $o(e.outlet.component,i)):n.canDeactivateChecks.push(new $o(null,i)):n.canDeactivateChecks.push(new $o(null,i))}function ja(t){return typeof t=="function"}function PF(t){return typeof t=="boolean"}function OF(t){return t&&ja(t.canLoad)}function kF(t){return t&&ja(t.canActivate)}function FF(t){return t&&ja(t.canActivateChild)}function VF(t){return t&&ja(t.canDeactivate)}function LF(t){return t&&ja(t.canMatch)}function yD(t){return t instanceof Xn||t?.name==="EmptyError"}var Bl=Symbol("INITIAL_VALUE");function qo(){return an(t=>Du(t.map(e=>e.pipe(er(1),Gf(Bl)))).pipe(me(e=>{for(let n of e)if(n!==!0){if(n===Bl)return Bl;if(n===!1||jF(n))return n}return!0}),sn(e=>e!==Bl),er(1)))}function jF(t){return Aa(t)||t instanceof Oa}function UF(t,e){return nt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?se(ye(L({},n),{guardsResult:!0})):BF(s,r,i,t).pipe(nt(a=>a&&PF(a)?$F(r,o,t,e):se(a)),me(a=>ye(L({},n),{guardsResult:a})))})}function BF(t,e,n,r){return Ge(t).pipe(nt(i=>WF(i.component,i.route,n,e,r)),Cn(i=>i!==!0,!0))}function $F(t,e,n,r){return Ge(e).pipe(ho(i=>lo(zF(i.route.parent,r),HF(i.route,r),GF(t,i.path,n),qF(t,i.route,n))),Cn(i=>i!==!0,!0))}function HF(t,e){return t!==null&&e&&e(new vg(t)),se(!0)}function zF(t,e){return t!==null&&e&&e(new gg(t)),se(!0)}function qF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Tu(()=>{let s=La(e)??n,a=Go(o,s),u=kF(a)?a.canActivate(e,t):rr(s,()=>a(e,t));return qr(u).pipe(Cn())}));return se(i).pipe(qo())}function GF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>MF(s)).filter(s=>s!==null).map(s=>Tu(()=>{let a=s.guards.map(u=>{let l=La(s.node)??n,h=Go(u,l),p=FF(h)?h.canActivateChild(r,t):rr(l,()=>h(r,t));return qr(p).pipe(Cn())});return se(a).pipe(qo())}));return se(o).pipe(qo())}function WF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let u=La(e)??i,l=Go(a,u),h=VF(l)?l.canDeactivate(t,e,n,r):rr(u,()=>l(t,e,n,r));return qr(h).pipe(Cn())});return se(s).pipe(qo())}function KF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=Go(s,t),u=OF(a)?a.canLoad(e,n):rr(t,()=>a(e,n));return qr(u)});return se(o).pipe(qo(),vD(r))}function vD(t){return Ff(ht(e=>{if(typeof e!="boolean")throw Zl(t,e)}),me(e=>e===!0))}function QF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=Go(s,t),u=LF(a)?a.canMatch(e,n):rr(t,()=>a(e,n));return qr(u)});return se(o).pipe(qo(),vD(r))}var ka=class{constructor(e){this.segmentGroup=e||null}},Fa=class extends Error{constructor(e){super(),this.urlTree=e}};function Lo(t){return uo(new ka(t))}function YF(t){return uo(new Q(4e3,!1))}function JF(t){return uo(mD(!1,Bt.GuardRejected))}var Tg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[he])return YF(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,params:y,data:S,title:P}=i,R=rr(o,()=>a({params:y,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,title:P}));if(R instanceof dr)throw new Fa(R);n=R}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Fa(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new dr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ne(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Sg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZF(t,e,n,r,i){let o=kg(t,e,n);return o.matched?(r=IF(e,r),QF(r,e,n,i).pipe(me(s=>s===!0?o:L({},Sg)))):se(o)}function kg(t,e,n){if(e.path==="**")return XF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},Sg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Qk)(n,t,e);if(!i)return L({},Sg);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function XF(t){return{matched:!0,parameters:t.length>0?ZC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function KC(t,e,n,r){return n.length>0&&nV(t,n,r)?{segmentGroup:new Ne(e,tV(r,new Ne(n,t.children))),slicedSegments:[]}:n.length===0&&rV(t,n,r)?{segmentGroup:new Ne(t.segments,eV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ne(t.segments,t.children),slicedSegments:n}}function eV(t,e,n,r){let i={};for(let o of n)if(td(t,e,o)&&!r[gn(o)]){let s=new Ne([],{});i[gn(o)]=s}return L(L({},r),i)}function tV(t,e){let n={};n[he]=e;for(let r of t)if(r.path===""&&gn(r)!==he){let i=new Ne([],{});n[gn(r)]=i}return n}function nV(t,e,n){return n.some(r=>td(t,e,r)&&gn(r)!==he)}function rV(t,e,n){return n.some(r=>td(t,e,r))}function td(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function iV(t,e,n,r){return gn(t)!==r&&(r===he||!td(e,n,t))?!1:kg(e,t,n).matched}function oV(t,e,n){return e.length===0&&!t.children[n]}var Ag=class{};function sV(t,e,n,r,i,o,s="emptyOnly"){return new xg(t,e,n,r,i,s,o).recognize()}var aV=31,xg=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Tg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=KC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:n,rootSnapshot:r})=>{let i=new Ut(r,n),o=new Jl("",i),s=pF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Bo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,n).pipe(me(r=>({children:r,rootSnapshot:n})),Mr(r=>{if(r instanceof Fa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ka?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(me(s=>s instanceof Ut?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ge(o).pipe(ho(s=>{let a=r.children[s],u=EF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),qf((s,a)=>(s.push(...a),s)),Rr(null),zf(),nt(s=>{if(s===null)return Lo(r);let a=_D(s);return cV(a),se(a)}))}processSegment(e,n,r,i,o,s,a){return Ge(n).pipe(ho(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Mr(l=>{if(l instanceof ka)return se(null);throw l}))),Cn(u=>!!u),Mr(u=>{if(yD(u))return oV(r,i,o)?se(new Ag):Lo(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return iV(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Lo(i):Lo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=kg(n,i,o);if(!u)return Lo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>aV&&(this.allowRedirects=!1));let y=new Bo(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,QC(i),gn(i),i.component??i._loadedComponent??null,i,YC(i)),S=Yl(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let P=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(nt(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=ZF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(an(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(an(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,S=new Bo(g,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,QC(r),gn(r),r.component??r._loadedComponent??null,r,YC(r)),P=Yl(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(P.params),S.data=Object.freeze(P.data);let{segmentGroup:R,slicedSegments:H}=KC(n,g,y,l);if(H.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(me(K=>new Ut(S,K)));if(l.length===0&&H.length===0)return se(new Ut(S,[]));let X=gn(r)===o;return this.processSegment(h,l,R,H,X?he:o,!0,S).pipe(me(K=>new Ut(S,K instanceof Ut?[K]:[])))}))):Lo(n)))}getChildConfig(e,n,r){return n.children?se({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?se({routes:n._loadedRoutes,injector:n._loadedInjector}):KF(e,n,r,this.urlSerializer).pipe(nt(i=>i?this.configLoader.loadChildren(e,n).pipe(ht(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):JF(n))):se({routes:[],injector:e})}};function cV(t){t.sort((e,n)=>e.value.outlet===he?-1:n.value.outlet===he?1:e.value.outlet.localeCompare(n.value.outlet))}function uV(t){let e=t.value.routeConfig;return e&&e.path===""}function _D(t){let e=[],n=new Set;for(let r of t){if(!uV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=_D(r.children);e.push(new Ut(r.value,i))}return e.filter(r=>!n.has(r))}function QC(t){return t.data||{}}function YC(t){return t.resolve||{}}function lV(t,e,n,r,i,o){return nt(s=>sV(t,e,n,r,s.extractedUrl,i,o).pipe(me(({state:a,tree:u})=>ye(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function dV(t,e){return nt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return se(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of wD(u))s.add(l);let a=0;return Ge(s).pipe(ho(u=>o.has(u)?hV(u,r,t,e):(u.data=Yl(u,u.parent,t).resolve,se(void 0))),ht(()=>a++),fo(1),nt(u=>a===s.size?se(n):Lt))})}function wD(t){let e=t.children.map(n=>wD(n)).flat();return[t,...e]}function hV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!fD(i)&&(o[Va]=i.title),fV(o,t,e,r).pipe(me(s=>(t._resolvedData=s,t.data=Yl(t,t.parent,n).resolve,null)))}function fV(t,e,n,r){let i=og(t);if(i.length===0)return se({});let o={};return Ge(i).pipe(nt(s=>pV(t[s],e,n,r).pipe(Cn(),ht(a=>{if(a instanceof Oa)throw Zl(new Sa,a);o[s]=a}))),fo(1),Hf(o),Mr(s=>yD(s)?Lt:uo(s)))}function pV(t,e,n,r){let i=La(e)??r,o=Go(t,i),s=o.resolve?o.resolve(e,n):rr(i,()=>o(e,n));return qr(s)}function rg(t){return an(e=>{let n=t(e);return n?Ge(n).pipe(me(()=>e)):se(e)})}var ID=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===he);return i}getResolvedTitleForRoute(r){return r.data[Va]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(mV),providedIn:"root"});let t=e;return t})(),mV=(()=>{let e=class e extends ID{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Z(HC))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fg=new ee("",{providedIn:"root",factory:()=>({})}),gV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=xe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Re],decls:1,vars:0,template:function(i,o){i&1&&Le(0,"router-outlet")},dependencies:[Pg],encapsulation:2});let t=e;return t})();function Vg(t){let e=t.children&&t.children.map(Vg),n=e?ye(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==he&&(n.component=gV),n}var Lg=new ee(""),yV=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(Vm)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=qr(r.loadComponent()).pipe(me(ED),ht(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ks(()=>{this.componentLoaders.delete(r)})),o=new co(i,()=>new Ke).pipe(ao());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=vV(i,this.compiler,r,this.onLoadEndListener).pipe(Ks(()=>{this.childrenLoaders.delete(i)})),a=new co(s,()=>new Ke).pipe(ao());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vV(t,e,n,r){return qr(t.loadChildren()).pipe(me(ED),nt(i=>i instanceof oa||Array.isArray(i)?se(i):Ge(e.compileModuleAsync(i))),me(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Lg,[],{optional:!0,self:!0}).flat()),{routes:s.map(Vg),injector:o}}))}function _V(t){return t&&typeof t=="object"&&"default"in t}function ED(t){return _V(t)?t.default:t}var jg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(wV),providedIn:"root"});let t=e;return t})(),wV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IV=new ee("");var EV=new ee(""),bV=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ke,this.transitionAbortSubject=new Ke,this.configLoader=U(yV),this.environmentInjector=U(Qt),this.urlSerializer=U(Rg),this.rootContexts=U(ed),this.location=U(ga),this.inputBindingEnabled=U(Og,{optional:!0})!==null,this.titleStrategy=U(ID),this.options=U(Fg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(jg),this.createViewTransition=U(IV,{optional:!0}),this.navigationErrorHandler=U(EV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let r=o=>this.events.next(new pg(o)),i=o=>this.events.next(new mg(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ye(L(L({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new tt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Da,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(sn(s=>s.id!==0),me(s=>ye(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),an(s=>{let a=!1,u=!1;return se(s).pipe(an(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Bt.SupersededByNewNavigation),Lt;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ye(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let g="";return this.events.next(new Si(l.id,this.urlSerializer.serialize(l.rawUrl),g,ug.IgnoredSameUrlNavigation)),l.resolve(!1),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(an(g=>{let y=this.transitions?.getValue();return this.events.next(new Ma(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?Lt:Promise.resolve(g)}),lV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ht(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=ye(L({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new Wl(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:S,restoredState:P,extras:R}=l,H=new Ma(g,this.urlSerializer.serialize(y),S,P);this.events.next(H);let X=dD(this.rootComponentType).snapshot;return this.currentTransition=s=ye(L({},l),{targetSnapshot:X,urlAfterRedirects:y,extras:ye(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,se(s)}else{let g="";return this.events.next(new Si(l.id,this.urlSerializer.serialize(l.extractedUrl),g,ug.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Lt}}),ht(l=>{let h=new lg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),me(l=>(this.currentTransition=s=ye(L({},l),{guards:xF(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),UF(this.environmentInjector,l=>this.events.next(l)),ht(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Zl(this.urlSerializer,l.guardsResult);let h=new dg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),sn(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Bt.GuardRejected),!1)),rg(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(ht(h=>{let p=new hg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),an(h=>{let p=!1;return se(h).pipe(dV(this.paramsInheritanceStrategy,this.environmentInjector),ht({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Bt.NoDataFromResolver)}}))}),ht(h=>{let p=new fg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),rg(l=>{let h=p=>{let g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(ht(y=>{p.component=y}),me(()=>{})));for(let y of p.children)g.push(...h(y));return g};return Du(h(l.targetSnapshot.root)).pipe(Rr(null),er(1))}),rg(()=>this.afterPreactivation()),an(()=>{let{currentSnapshot:l,targetSnapshot:h}=s,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ge(p).pipe(me(()=>s)):se(s)}),me(l=>{let h=CF(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ye(L({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),ht(()=>{this.events.next(new Na)}),AF(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),er(1),ht({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Wf(this.transitionAbortSubject.pipe(ht(l=>{throw l}))),Ks(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Mr(l=>{if(u=!0,gD(l))this.events.next(new lr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),SF(l)?this.events.next(new zo(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let h=new Ra(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let p=rr(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof Oa){let{message:g,cancellationCode:y}=Zl(this.urlSerializer,p);this.events.next(new lr(s.id,this.urlSerializer.serialize(s.extractedUrl),g,y)),this.events.next(new zo(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let g=r.errorHandler(l);s.resolve(!!g)}}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return Lt}))}))}cancelNavigationTransition(r,i,o){let s=new lr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CV(t){return t!==Da}var DV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(TV),providedIn:"root"});let t=e;return t})(),Mg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},TV=(()=>{let e=class e extends Mg{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$r(e)))(o||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(SV),providedIn:"root"});let t=e;return t})(),SV=(()=>{let e=class e extends bD{constructor(){super(...arguments),this.location=U(ga),this.urlSerializer=U(Rg),this.options=U(Fg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(jg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new dr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=dD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ma)this.stateMemento=this.createStateMemento();else if(r instanceof Si)this.rawUrlTree=i.initialUrl;else if(r instanceof Wl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof Na?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof lr&&(r.code===Bt.GuardRejected||r.code===Bt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ra?this.restoreHistory(i,!0):r instanceof yn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof dr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=L(L({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$r(e)))(o||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ba=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ba||{});function AV(t,e){t.events.pipe(sn(n=>n instanceof yn||n instanceof lr||n instanceof Ra||n instanceof Si),me(n=>n instanceof yn||n instanceof Si?ba.COMPLETE:(n instanceof lr?n.code===Bt.Redirect||n.code===Bt.SupersededByNewNavigation:!1)?ba.REDIRECTING:ba.FAILED),sn(n=>n!==ba.REDIRECTING),er(1)).subscribe(()=>{e()})}function xV(t){throw t}var MV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},st=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(Rl),this.stateManager=U(bD),this.options=U(Fg,{optional:!0})||{},this.pendingTasks=U(Po),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(bV),this.urlSerializer=U(Rg),this.location=U(ga),this.urlHandlingStrategy=U(jg),this._events=new Ke,this.errorHandler=this.options.errorHandler||xV,this.navigated=!1,this.routeReuseStrategy=U(DV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(Lg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(Og,{optional:!0}),this.eventsSubscription=new We,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof lr&&i.code!==Bt.Redirect&&i.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof yn)this.navigated=!0;else if(i instanceof zo){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=L({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||CV(o.source)},a);this.scheduleNavigation(u,Da,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}PV(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Da,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=L({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Vg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":p=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let g;try{let y=o?o.snapshot:this.routerState.snapshot.root;g=aD(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return cD(g,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Aa(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Da,null,i)}navigate(r,i={skipLocationChange:!1}){return NV(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=L({},MV):i===!1?o=L({},RV):o=i,Aa(r))return zC(this.currentUrlTree,r,o);let s=this.parseUrl(r);return zC(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((g,y)=>{u=g,l=y});let p=this.pendingTasks.add();return AV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function PV(t){return!(t instanceof Na)&&!(t instanceof zo)}var OV=new ee("");function CD(t,...e){return pl([{provide:Lg,multi:!0,useValue:t},[],{provide:kn,useFactory:kV,deps:[st]},{provide:Fm,multi:!0,useFactory:FV},e.map(n=>n.\u0275providers)])}function kV(t){return t.routerState.root}function FV(){let t=U(Vr);return e=>{let n=t.get(bi);if(e!==n.components[0])return;let r=t.get(st),i=t.get(VV);t.get(LV)===1&&r.initialNavigation(),t.get(jV,null,fe.Optional)?.setUpPreloading(),t.get(OV,null,fe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var VV=new ee("",{factory:()=>new Ke}),LV=new ee("",{providedIn:"root",factory:()=>1});var jV=new ee("");var TD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},UV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},SD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Bg;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Bg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},BV=function(t){let e=TD(t);return SD.encodeByteArray(e,!0)},Ua=function(t){return BV(t).replace(/\./g,"")},Hg=function(t){try{return SD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $V(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var HV=()=>$V().__FIREBASE_DEFAULTS__,zV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Hg(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return HV()||zV()||qV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zg=t=>{var e,n;return(n=(e=rd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AD=t=>{let e=zg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qg=()=>{var t;return(t=rd())===null||t===void 0?void 0:t.config},Gg=t=>{var e;return(e=rd())===null||e===void 0?void 0:e[`_${t}`]};var nd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function xD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ua(JSON.stringify(n)),Ua(JSON.stringify(s)),""].join(".")}function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function GV(){var t;let e=(t=rd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function id(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ND(){let t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PD(){return!GV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ba(){try{return typeof indexedDB=="object"}catch{return!1}}function od(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function OD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var WV="FirebaseError",pt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}},$t=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?KV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new pt(i,a,r)}};function KV(t,e){return t.replace(QV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var QV=/\{\$([^}]+)}/g;function kD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(DD(o)&&DD(s)){if(!hr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function DD(t){return t!==null&&typeof t=="object"}function Wo(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function FD(t,e){let n=new $g(t,e);return n.subscribe.bind(n)}var $g=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ug),i.error===void 0&&(i.error=Ug),i.complete===void 0&&(i.complete=Ug);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function YV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ug(){}var JV=1e3,ZV=2,XV=4*60*60*1e3,eL=.5;function Wg(t,e=JV,n=ZV){let r=e*Math.pow(n,t),i=Math.round(eL*r*(Math.random()-.5)*2);return Math.min(XV,r+i)}function ct(t){return t&&t._delegate?t._delegate:t}var ut=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xi="[DEFAULT]";var Kg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new nd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nL(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tL(t){return t===xi?void 0:t}function nL(t){return t.instantiationMode==="EAGER"}var sd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Kg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var rL=[],_e=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(_e||{}),iL={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},oL=_e.INFO,sL={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},aL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=sL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Fn=class{constructor(e){this.name=e,this._logLevel=oL,this._logHandler=aL,this._userLogHandler=null,rL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}};var cL=(t,e)=>e.some(n=>t instanceof n),VD,LD;function uL(){return VD||(VD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lL(){return LD||(LD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jD=new WeakMap,Yg=new WeakMap,UD=new WeakMap,Qg=new WeakMap,Zg=new WeakMap;function dL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Vn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&jD.set(n,t)}).catch(()=>{}),Zg.set(e,t),e}function hL(t){if(Yg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Yg.set(t,e)}var Jg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BD(t){Jg=t(Jg)}function fL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ad(this),e,...n);return UD.set(r,e.sort?e.sort():[e]),Vn(r)}:lL().includes(t)?function(...e){return t.apply(ad(this),e),Vn(jD.get(this))}:function(...e){return Vn(t.apply(ad(this),e))}}function pL(t){return typeof t=="function"?fL(t):(t instanceof IDBTransaction&&hL(t),cL(t,uL())?new Proxy(t,Jg):t)}function Vn(t){if(t instanceof IDBRequest)return dL(t);if(Qg.has(t))return Qg.get(t);let e=pL(t);return e!==t&&(Qg.set(t,e),Zg.set(e,t)),e}var ad=t=>Zg.get(t);function cd(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Vn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Vn(s.result),u.oldVersion,u.newVersion,Vn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var mL=["get","getKey","getAll","getAllKeys","count"],gL=["put","add","delete","clear"],Xg=new Map;function $D(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xg.get(e))return Xg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=gL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mL.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Xg.set(e,o),o}BD(t=>ye(L({},t),{get:(e,n,r)=>$D(e,n)||t.get(e,n,r),has:(e,n)=>!!$D(e,n)||t.has(e,n)}));var ty=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function yL(t){let e=t.getComponent();return e?.type==="VERSION"}var ny="@firebase/app",HD="0.10.9";var fr=new Fn("@firebase/app"),vL="@firebase/app-compat",_L="@firebase/analytics-compat",wL="@firebase/analytics",IL="@firebase/app-check-compat",EL="@firebase/app-check",bL="@firebase/auth",CL="@firebase/auth-compat",DL="@firebase/database",TL="@firebase/database-compat",SL="@firebase/functions",AL="@firebase/functions-compat",xL="@firebase/installations",ML="@firebase/installations-compat",RL="@firebase/messaging",NL="@firebase/messaging-compat",PL="@firebase/performance",OL="@firebase/performance-compat",kL="@firebase/remote-config",FL="@firebase/remote-config-compat",VL="@firebase/storage",LL="@firebase/storage-compat",jL="@firebase/firestore",UL="@firebase/vertexai-preview",BL="@firebase/firestore-compat",$L="firebase",HL="10.13.0";var ry="[DEFAULT]",zL={[ny]:"fire-core",[vL]:"fire-core-compat",[wL]:"fire-analytics",[_L]:"fire-analytics-compat",[EL]:"fire-app-check",[IL]:"fire-app-check-compat",[bL]:"fire-auth",[CL]:"fire-auth-compat",[DL]:"fire-rtdb",[TL]:"fire-rtdb-compat",[SL]:"fire-fn",[AL]:"fire-fn-compat",[xL]:"fire-iid",[ML]:"fire-iid-compat",[RL]:"fire-fcm",[NL]:"fire-fcm-compat",[PL]:"fire-perf",[OL]:"fire-perf-compat",[kL]:"fire-rc",[FL]:"fire-rc-compat",[VL]:"fire-gcs",[LL]:"fire-gcs-compat",[jL]:"fire-fst",[BL]:"fire-fst-compat",[UL]:"fire-vertex","fire-js":"fire-js",[$L]:"fire-js-all"};var ud=new Map,qL=new Map,iy=new Map;function zD(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pt(t){let e=t.name;if(iy.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;iy.set(e,t);for(let n of ud.values())zD(n,t);for(let n of qL.values())zD(n,t);return!0}function vn(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t.settings!==void 0}var GL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gr=new $t("app","Firebase",GL);var oy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}};var Wr=HL;function cy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ry,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gr.create("bad-app-name",{appName:String(i)});if(n||(n=qg()),!n)throw Gr.create("no-options");let o=ud.get(i);if(o){if(hr(n,o.options)&&hr(r,o.config))return o;throw Gr.create("duplicate-app",{appName:i})}let s=new sd(i);for(let u of iy.values())s.addComponent(u);let a=new oy(n,r,s);return ud.set(i,a),a}function Mi(t=ry){let e=ud.get(t);if(!e&&t===ry&&qg())return cy();if(!e)throw Gr.create("no-app",{appName:t});return e}function mt(t,e,n){var r;let i=(r=zL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(a.join(" "));return}Pt(new ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var WL="firebase-heartbeat-database",KL=1,$a="firebase-heartbeat-store",ey=null;function KD(){return ey||(ey=cd(WL,KL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($a)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gr.create("idb-open",{originalErrorMessage:t.message})})),ey}function QL(t){return _(this,null,function*(){try{let n=(yield KD()).transaction($a),r=yield n.objectStore($a).get(QD(t));return yield n.done,r}catch(e){if(e instanceof pt)fr.warn(e.message);else{let n=Gr.create("idb-get",{originalErrorMessage:e?.message});fr.warn(n.message)}}})}function qD(t,e){return _(this,null,function*(){try{let r=(yield KD()).transaction($a,"readwrite");yield r.objectStore($a).put(e,QD(t)),yield r.done}catch(n){if(n instanceof pt)fr.warn(n.message);else{let r=Gr.create("idb-set",{originalErrorMessage:n?.message});fr.warn(r.message)}}})}function QD(t){return`${t.name}!${t.options.appId}`}var YL=1024,JL=30*24*60*60*1e3,sy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ay(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n,r;try{let o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=GD();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let u=new Date(a.date).valueOf();return Date.now()-u<=JL}),this._storage.overwrite(this._heartbeatsCache))}catch(i){fr.warn(i)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=GD(),{heartbeatsToSend:r,unsentEntries:i}=ZL(this._heartbeatsCache.heartbeats),o=Ua(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return fr.warn(n),""}})}};function GD(){return new Date().toISOString().substring(0,10)}function ZL(t,e=YL){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),WD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ay=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Ba()?od().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield QL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return qD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return qD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function WD(t){return Ua(JSON.stringify({version:2,heartbeats:t})).length}function XL(t){Pt(new ut("platform-logger",e=>new ty(e),"PRIVATE")),Pt(new ut("heartbeat",e=>new sy(e),"PRIVATE")),mt(ny,HD,t),mt(ny,HD,"esm2017"),mt("fire-js","")}XL("");var YD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JD={};var Kr,uy;(function(){var t;function e(b,v){function w(){}w.prototype=v.prototype,b.D=v.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(E,C,T){for(var I=Array(arguments.length-2),Qn=2;Qn<arguments.length;Qn++)I[Qn-2]=arguments[Qn];return v.prototype[C].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)E[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=b.g[0],w=b.g[1],C=b.g[2];var T=b.g[3],I=v+(T^w&(C^T))+E[0]+3614090360&4294967295;v=w+(I<<7&4294967295|I>>>25),I=T+(C^v&(w^C))+E[1]+3905402710&4294967295,T=v+(I<<12&4294967295|I>>>20),I=C+(w^T&(v^w))+E[2]+606105819&4294967295,C=T+(I<<17&4294967295|I>>>15),I=w+(v^C&(T^v))+E[3]+3250441966&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(T^w&(C^T))+E[4]+4118548399&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(C^v&(w^C))+E[5]+1200080426&4294967295,T=v+(I<<12&4294967295|I>>>20),I=C+(w^T&(v^w))+E[6]+2821735955&4294967295,C=T+(I<<17&4294967295|I>>>15),I=w+(v^C&(T^v))+E[7]+4249261313&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(T^w&(C^T))+E[8]+1770035416&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(C^v&(w^C))+E[9]+2336552879&4294967295,T=v+(I<<12&4294967295|I>>>20),I=C+(w^T&(v^w))+E[10]+4294925233&4294967295,C=T+(I<<17&4294967295|I>>>15),I=w+(v^C&(T^v))+E[11]+2304563134&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(T^w&(C^T))+E[12]+1804603682&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(C^v&(w^C))+E[13]+4254626195&4294967295,T=v+(I<<12&4294967295|I>>>20),I=C+(w^T&(v^w))+E[14]+2792965006&4294967295,C=T+(I<<17&4294967295|I>>>15),I=w+(v^C&(T^v))+E[15]+1236535329&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(C^T&(w^C))+E[1]+4129170786&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^C&(v^w))+E[6]+3225465664&4294967295,T=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(T^v))+E[11]+643717713&4294967295,C=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(C^T))+E[0]+3921069994&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^T&(w^C))+E[5]+3593408605&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^C&(v^w))+E[10]+38016083&4294967295,T=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(T^v))+E[15]+3634488961&4294967295,C=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(C^T))+E[4]+3889429448&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^T&(w^C))+E[9]+568446438&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^C&(v^w))+E[14]+3275163606&4294967295,T=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(T^v))+E[3]+4107603335&4294967295,C=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(C^T))+E[8]+1163531501&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^T&(w^C))+E[13]+2850285829&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^C&(v^w))+E[2]+4243563512&4294967295,T=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(T^v))+E[7]+1735328473&4294967295,C=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(C^T))+E[12]+2368359562&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(w^C^T)+E[5]+4294588738&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^C)+E[8]+2272392833&4294967295,T=v+(I<<11&4294967295|I>>>21),I=C+(T^v^w)+E[11]+1839030562&4294967295,C=T+(I<<16&4294967295|I>>>16),I=w+(C^T^v)+E[14]+4259657740&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^T)+E[1]+2763975236&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^C)+E[4]+1272893353&4294967295,T=v+(I<<11&4294967295|I>>>21),I=C+(T^v^w)+E[7]+4139469664&4294967295,C=T+(I<<16&4294967295|I>>>16),I=w+(C^T^v)+E[10]+3200236656&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^T)+E[13]+681279174&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^C)+E[0]+3936430074&4294967295,T=v+(I<<11&4294967295|I>>>21),I=C+(T^v^w)+E[3]+3572445317&4294967295,C=T+(I<<16&4294967295|I>>>16),I=w+(C^T^v)+E[6]+76029189&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^T)+E[9]+3654602809&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^C)+E[12]+3873151461&4294967295,T=v+(I<<11&4294967295|I>>>21),I=C+(T^v^w)+E[15]+530742520&4294967295,C=T+(I<<16&4294967295|I>>>16),I=w+(C^T^v)+E[2]+3299628645&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(C^(w|~T))+E[0]+4096336452&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~C))+E[7]+1126891415&4294967295,T=v+(I<<10&4294967295|I>>>22),I=C+(v^(T|~w))+E[14]+2878612391&4294967295,C=T+(I<<15&4294967295|I>>>17),I=w+(T^(C|~v))+E[5]+4237533241&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~T))+E[12]+1700485571&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~C))+E[3]+2399980690&4294967295,T=v+(I<<10&4294967295|I>>>22),I=C+(v^(T|~w))+E[10]+4293915773&4294967295,C=T+(I<<15&4294967295|I>>>17),I=w+(T^(C|~v))+E[1]+2240044497&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~T))+E[8]+1873313359&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~C))+E[15]+4264355552&4294967295,T=v+(I<<10&4294967295|I>>>22),I=C+(v^(T|~w))+E[6]+2734768916&4294967295,C=T+(I<<15&4294967295|I>>>17),I=w+(T^(C|~v))+E[13]+1309151649&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~T))+E[4]+4149444226&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~C))+E[11]+3174756917&4294967295,T=v+(I<<10&4294967295|I>>>22),I=C+(v^(T|~w))+E[2]+718787259&4294967295,C=T+(I<<15&4294967295|I>>>17),I=w+(T^(C|~v))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+T&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var w=v-this.blockSize,E=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,b,T),T+=this.blockSize;if(typeof b=="string"){for(;T<v;)if(E[C++]=b.charCodeAt(T++),C==this.blockSize){i(this,E),C=0;break}}else for(;T<v;)if(E[C++]=b[T++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var w=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=w&255,w/=256;for(this.u(b),b=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)b[w++]=this.g[v]>>>E&255;return b};function o(b,v){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=v(b)}function s(b,v){this.h=v;for(var w=[],E=!0,C=b.length-1;0<=C;C--){var T=b[C]|0;E&&T==v||(w[C]=T,E=!1)}this.g=w}var a={};function u(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return R(l(-b));for(var v=[],w=1,E=0;b>=w;E++)v[E]=b/w|0,w*=4294967296;return new s(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return R(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=p,C=0;C<b.length;C+=8){var T=Math.min(8,b.length-C),I=parseInt(b.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),E=E.j(T).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(P(this))return-R(this).m();for(var b=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);b+=(0<=E?E:4294967296+E)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S(this))return"0";if(P(this))return"-"+R(this).toString(b);for(var v=l(Math.pow(b,6)),w=this,E="";;){var C=Ie(w,v).g;w=H(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=C,S(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function S(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function P(b){return b.h==-1}t.l=function(b){return b=H(this,b),P(b)?-1:S(b)?0:1};function R(b){for(var v=b.g.length,w=[],E=0;E<v;E++)w[E]=~b.g[E];return new s(w,~b.h).add(g)}t.abs=function(){return P(this)?R(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),w=[],E=0,C=0;C<=v;C++){var T=E+(this.i(C)&65535)+(b.i(C)&65535),I=(T>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);E=I>>>16,T&=65535,I&=65535,w[C]=I<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function H(b,v){return b.add(R(v))}t.j=function(b){if(S(this)||S(b))return p;if(P(this))return P(b)?R(this).j(R(b)):R(R(this).j(b));if(P(b))return R(this.j(R(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<b.g.length;C++){var T=this.i(E)>>>16,I=this.i(E)&65535,Qn=b.i(C)>>>16,Ds=b.i(C)&65535;w[2*E+2*C]+=I*Ds,X(w,2*E+2*C),w[2*E+2*C+1]+=T*Ds,X(w,2*E+2*C+1),w[2*E+2*C+1]+=I*Qn,X(w,2*E+2*C+1),w[2*E+2*C+2]+=T*Qn,X(w,2*E+2*C+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function X(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function K(b,v){this.g=b,this.h=v}function Ie(b,v){if(S(v))throw Error("division by zero");if(S(b))return new K(p,p);if(P(b))return v=Ie(R(b),v),new K(R(v.g),R(v.h));if(P(v))return v=Ie(b,R(v)),new K(R(v.g),v.h);if(30<b.g.length){if(P(b)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,E=v;0>=E.l(b);)w=He(w),E=He(E);var C=de(w,1),T=de(E,1);for(E=de(E,2),w=de(w,2);!S(E);){var I=T.add(E);0>=I.l(b)&&(C=C.add(w),T=I),E=de(E,1),w=de(w,1)}return v=H(b,C.j(v)),new K(C,v)}for(C=p;0<=b.l(v);){for(w=Math.max(1,Math.floor(b.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),I=T.j(v);P(I)||0<I.l(b);)w-=E,T=l(w),I=T.j(v);S(T)&&(T=g),C=C.add(T),b=H(b,I)}return new K(C,b)}t.A=function(b){return Ie(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&b.i(E);return new s(w,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|b.i(E);return new s(w,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^b.i(E);return new s(w,this.h^b.h)};function He(b){for(var v=b.g.length+1,w=[],E=0;E<v;E++)w[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(w,b.h)}function de(b,v){var w=v>>5;v%=32;for(var E=b.g.length-w,C=[],T=0;T<E;T++)C[T]=0<v?b.i(T+w)>>>v|b.i(T+w+1)<<32-v:b.i(T+w);return new s(C,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uy=JD.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Kr=JD.Integer=s}).apply(typeof YD<"u"?YD:typeof self<"u"?self:typeof window<"u"?window:{});var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pr={};var ly,dy,Ko,hy,Ha,dd,fy,py,my;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ld=="object"&&ld];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var D=c[m];if(!(D in f))break e;f=f[D]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,D={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,D,A){for(var k=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)k[Oe-2]=arguments[Oe];return d.prototype[D].apply(m,k)}}function P(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let D=c.length||0,A=m.length||0;c.length=D+A;for(let k=0;k<A;k++)c[D+k]=m[k]}else c.push(m)}}class H{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function X(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ie(c){return Ie[" "](c),c}Ie[" "]=function(){};var He=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function de(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(f in m)c[f]=m[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Zh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Qn{constructor(){this.h=this.g=null}add(d,f){let m=Ds.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Ds=new H(()=>new zx,c=>c.reset());class zx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ts,Ss=!1,Zh=new Qn,vw=()=>{let c=a.Promise.resolve(void 0);Ts=()=>{c.then(qx)}};var qx=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){T(f)}var d=Ds;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ss=!1};function Cr(){this.s=this.s,this.C=this.C}Cr.prototype.s=!1,Cr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var Gx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function As(c,d){if(yt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(He){e:{try{Ie(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Wx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&As.aa.h.call(this)}}S(As,yt);var Wx={2:"touch",3:"pen",4:"mouse"};As.prototype.h=function(){As.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xs="closure_listenable_"+(1e6*Math.random()|0),Kx=0;function Qx(c,d,f,m,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=D,this.key=++Kx,this.da=this.fa=!1}function Oc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function kc(c){this.src=c,this.g={},this.h=0}kc.prototype.add=function(c,d,f,m,D){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=ef(c,d,m,D);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new Qx(d,this.src,A,!!m,D),d.fa=f,c.push(d)),d};function Xh(c,d){var f=d.type;if(f in c.g){var m=c.g[f],D=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=D)&&Array.prototype.splice.call(m,D,1),A&&(Oc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function ef(c,d,f,m){for(var D=0;D<c.length;++D){var A=c[D];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return D}return-1}var tf="closure_lm_"+(1e6*Math.random()|0),nf={};function _w(c,d,f,m,D){if(m&&m.once)return Iw(c,d,f,m,D);if(Array.isArray(d)){for(var A=0;A<d.length;A++)_w(c,d[A],f,m,D);return null}return f=af(f),c&&c[xs]?c.K(d,f,l(m)?!!m.capture:!!m,D):ww(c,d,f,!1,m,D)}function ww(c,d,f,m,D,A){if(!d)throw Error("Invalid event type");var k=l(D)?!!D.capture:!!D,Oe=of(c);if(Oe||(c[tf]=Oe=new kc(c)),f=Oe.add(d,f,m,k,A),f.proxy)return f;if(m=Yx(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)Gx||(D=k),D===void 0&&(D=!1),c.addEventListener(d.toString(),m,D);else if(c.attachEvent)c.attachEvent(bw(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Yx(){function c(f){return d.call(c.src,c.listener,f)}let d=Jx;return c}function Iw(c,d,f,m,D){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Iw(c,d[A],f,m,D);return null}return f=af(f),c&&c[xs]?c.L(d,f,l(m)?!!m.capture:!!m,D):ww(c,d,f,!0,m,D)}function Ew(c,d,f,m,D){if(Array.isArray(d))for(var A=0;A<d.length;A++)Ew(c,d[A],f,m,D);else m=l(m)?!!m.capture:!!m,f=af(f),c&&c[xs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=ef(A,f,m,D),-1<f&&(Oc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=of(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ef(d,f,m,D)),(f=-1<c?d[c]:null)&&rf(f))}function rf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[xs])Xh(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(bw(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=of(d))?(Xh(f,c),f.h==0&&(f.src=null,d[tf]=null)):Oc(c)}}}function bw(c){return c in nf?nf[c]:nf[c]="on"+c}function Jx(c,d){if(c.da)c=!0;else{d=new As(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&rf(c),c=f.call(m,d)}return c}function of(c){return c=c[tf],c instanceof kc?c:null}var sf="__closure_events_fn_"+(1e9*Math.random()>>>0);function af(c){return typeof c=="function"?c:(c[sf]||(c[sf]=function(d){return c.handleEvent(d)}),c[sf])}function vt(){Cr.call(this),this.i=new kc(this),this.M=this,this.F=null}S(vt,Cr),vt.prototype[xs]=!0,vt.prototype.removeEventListener=function(c,d,f,m){Ew(this,c,d,f,m)};function Ct(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new yt(d,c);else if(d instanceof yt)d.target=d.target||c;else{var D=d;d=new yt(m,c),E(d,D)}if(D=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];D=Fc(k,m,!0,d)&&D}if(k=d.g=c,D=Fc(k,m,!0,d)&&D,D=Fc(k,m,!1,d)&&D,f)for(A=0;A<f.length;A++)k=d.g=f[A],D=Fc(k,m,!1,d)&&D}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Oc(f[m]);delete c.g[d],c.h--}}this.F=null},vt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},vt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Fc(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Oe=k.listener,dt=k.ha||k.src;k.fa&&Xh(c.i,k),D=Oe.call(dt,m)!==!1&&D}}return D&&!m.defaultPrevented}function Cw(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Dw(c){c.g=Cw(()=>{c.g=null,c.i&&(c.i=!1,Dw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Zx extends Cr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Dw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(c){Cr.call(this),this.h=c,this.g={}}S(Ms,Cr);var Tw=[];function Sw(c){de(c.g,function(d,f){this.g.hasOwnProperty(f)&&rf(d)},c),c.g={}}Ms.prototype.N=function(){Ms.aa.N.call(this),Sw(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cf=a.JSON.stringify,Xx=a.JSON.parse,eM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function uf(){}uf.prototype.h=null;function Aw(c){return c.h||(c.h=c.i())}function xw(){}var Rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lf(){yt.call(this,"d")}S(lf,yt);function df(){yt.call(this,"c")}S(df,yt);var ii={},Mw=null;function Vc(){return Mw=Mw||new vt}ii.La="serverreachability";function Rw(c){yt.call(this,ii.La,c)}S(Rw,yt);function Ns(c){let d=Vc();Ct(d,new Rw(d))}ii.STAT_EVENT="statevent";function Nw(c,d){yt.call(this,ii.STAT_EVENT,c),this.stat=d}S(Nw,yt);function Dt(c){let d=Vc();Ct(d,new Nw(d,c))}ii.Ma="timingevent";function Pw(c,d){yt.call(this,ii.Ma,c),this.size=d}S(Pw,yt);function Ps(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function tM(c,d,f,m,D,A){c.info(function(){if(c.g)if(A)for(var k="",Oe=A.split("&"),dt=0;dt<Oe.length;dt++){var De=Oe[dt].split("=");if(1<De.length){var _t=De[0];De=De[1];var wt=_t.split("_");k=2<=wt.length&&wt[1]=="type"?k+(_t+"="+De+"&"):k+(_t+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+d+`
`+f+`
`+k})}function nM(c,d,f,m,D,A,k){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+d+`
`+f+`
`+A+" "+k})}function Zi(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+iM(c,f)+(m?" "+m:"")})}function rM(c,d){c.info(function(){return"TIMEOUT: "+d})}Os.prototype.info=function(){};function iM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<D.length;k++)D[k]=""}}}}return cf(f)}catch{return d}}var Lc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ow={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hf;function jc(){}S(jc,uf),jc.prototype.g=function(){return new XMLHttpRequest},jc.prototype.i=function(){return{}},hf=new jc;function Dr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kw}function kw(){this.i=null,this.g="",this.h=!1}var Fw={},ff={};function pf(c,d,f){c.L=1,c.v=Hc(Yn(d)),c.m=f,c.P=!0,Vw(c,null)}function Vw(c,d){c.F=Date.now(),Uc(c),c.A=Yn(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),Jw(f.i,"t",m),c.C=0,f=c.j.J,c.h=new kw,c.g=mI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new Zx(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(Tw[0]=D.toString()),D=Tw);for(var A=0;A<D.length;A++){var k=_w(f,D[A],m||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ns(),tM(c.i,c.u,c.A,c.l,c.R,c.m)}Dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Jn(c)==3?d.j():this.Y(c)},Dr.prototype.Y=function(c){try{if(c==this.g)e:{let wt=Jn(this.g);var d=this.g.Ba();let to=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||iI(this.g)))){this.J||wt!=4||d==7||(d==8||0>=to?Ns(3):Ns(2)),mf(this);var f=this.g.Z();this.X=f;t:if(Lw(this)){var m=iI(this.g);c="";var D=m.length,A=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),ks(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==D-1)});m.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,nM(this.i,this.u,this.A,this.l,this.R,wt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,dt=this.g;if((Oe=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Oe)){var De=Oe;break t}}De=null}if(f=De)Zi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gf(this,f);else{this.o=!1,this.s=3,Dt(12),oi(this),ks(this);break e}}if(this.P){f=!0;let rn;for(;!this.J&&this.C<k.length;)if(rn=oM(this,k),rn==ff){wt==4&&(this.s=4,Dt(14),f=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Fw){this.s=4,Dt(15),Zi(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Zi(this.i,this.l,rn,null),gf(this,rn);if(Lw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||k.length!=0||this.h.h||(this.s=1,Dt(16),f=!1),this.o=this.o&&f,!f)Zi(this.i,this.l,k,"[Invalid Chunked Response]"),oi(this),ks(this);else if(0<k.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Ef(_t),_t.M=!0,Dt(11))}}else Zi(this.i,this.l,k,null),gf(this,k);wt==4&&oi(this),this.o&&!this.J&&(wt==4?dI(this.j,this):(this.o=!1,Uc(this)))}else EM(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),oi(this),ks(this)}}}catch{}finally{}};function Lw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function oM(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?ff:(f=Number(d.substring(f,m)),isNaN(f)?Fw:(m+=1,m+f>d.length?ff:(d=d.slice(m,m+f),c.C=m+f,d)))}Dr.prototype.cancel=function(){this.J=!0,oi(this)};function Uc(c){c.S=Date.now()+c.I,jw(c,c.I)}function jw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ps(g(c.ba,c),d)}function mf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(rM(this.i,this.A),this.L!=2&&(Ns(),Dt(17)),oi(this),this.s=2,ks(this)):jw(this,this.S-c)};function ks(c){c.j.G==0||c.J||dI(c.j,c)}function oi(c){mf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Sw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function gf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||yf(f.h,c))){if(!c.K&&yf(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Kc(f),Gc(f);else break e;If(f),Dt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ps(g(f.Za,f),6e3));if(1>=$w(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ai(f,11)}else if((c.K||f.g==c)&&Kc(f),!X(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let De=D[d];if(f.T=De[0],De=De[1],f.G==2)if(De[0]=="c"){f.K=De[1],f.ia=De[2];let _t=De[3];_t!=null&&(f.la=_t,f.j.info("VER="+f.la));let wt=De[4];wt!=null&&(f.Aa=wt,f.j.info("SVER="+f.Aa));let to=De[5];to!=null&&typeof to=="number"&&0<to&&(m=1.5*to,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let rn=c.g;if(rn){let Yc=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yc){var A=m.h;A.g||Yc.indexOf("spdy")==-1&&Yc.indexOf("quic")==-1&&Yc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(vf(A,A.h),A.h=null))}if(m.D){let bf=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;bf&&(m.ya=bf,Ve(m.I,m.D,bf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var k=c;if(m.qa=pI(m,m.J?m.ia:null,m.W),k.K){Hw(m.h,k);var Oe=k,dt=m.L;dt&&(Oe.I=dt),Oe.B&&(mf(Oe),Uc(Oe)),m.g=k}else uI(m);0<f.i.length&&Wc(f)}else De[0]!="stop"&&De[0]!="close"||ai(f,7);else f.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?ai(f,7):wf(f):De[0]!="noop"&&f.l&&f.l.ta(De),f.v=0)}}Ns(4)}catch{}}var sM=class{constructor(c,d){this.g=c,this.map=d}};function Uw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $w(c){return c.h?1:c.g?c.g.size:0}function yf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function vf(c,d){c.g?c.g.add(d):c.h=d}function Hw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Uw.prototype.cancel=function(){if(this.i=zw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function zw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return P(c.i)}function aM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function cM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function qw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=cM(c),m=aM(c),D=m.length,A=0;A<D;A++)d.call(void 0,m[A],f&&f[A],c)}var Gw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),D=null;if(0<=m){var A=c[f].substring(0,m);D=c[f].substring(m+1)}else A=c[f];d(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function si(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof si){this.h=c.h,Bc(this,c.j),this.o=c.o,this.g=c.g,$c(this,c.s),this.l=c.l;var d=c.i,f=new Ls;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ww(this,f),this.m=c.m}else c&&(d=String(c).match(Gw))?(this.h=!1,Bc(this,d[1]||"",!0),this.o=Fs(d[2]||""),this.g=Fs(d[3]||"",!0),$c(this,d[4]),this.l=Fs(d[5]||"",!0),Ww(this,d[6]||"",!0),this.m=Fs(d[7]||"")):(this.h=!1,this.i=new Ls(null,this.h))}si.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Vs(d,Kw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Vs(d,Kw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Vs(f,f.charAt(0)=="/"?hM:dM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Vs(f,pM)),c.join("")};function Yn(c){return new si(c)}function Bc(c,d,f){c.j=f?Fs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function $c(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Ww(c,d,f){d instanceof Ls?(c.i=d,mM(c.i,c.h)):(f||(d=Vs(d,fM)),c.i=new Ls(d,c.h))}function Ve(c,d,f){c.i.set(d,f)}function Hc(c){return Ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,lM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Kw=/[#\/\?@]/g,dM=/[#\?:]/g,hM=/[#\?]/g,fM=/[#\?@]/g,pM=/#/g;function Ls(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Tr(c){c.g||(c.g=new Map,c.h=0,c.i&&uM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ls.prototype,t.add=function(c,d){Tr(this),this.i=null,c=Xi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Qw(c,d){Tr(c),d=Xi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Yw(c,d){return Tr(c),d=Xi(c,d),c.g.has(d)}t.forEach=function(c,d){Tr(this),this.g.forEach(function(f,m){f.forEach(function(D){c.call(d,D,m,this)},this)},this)},t.na=function(){Tr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let D=c[m];for(let A=0;A<D.length;A++)f.push(d[m])}return f},t.V=function(c){Tr(this);let d=[];if(typeof c=="string")Yw(this,c)&&(d=d.concat(this.g.get(Xi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Tr(this),this.i=null,c=Xi(this,c),Yw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Jw(c,d,f){Qw(c,d),0<f.length&&(c.i=null,c.g.set(Xi(c,d),P(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),k=this.V(m);for(m=0;m<k.length;m++){var D=A;k[m]!==""&&(D+="="+encodeURIComponent(String(k[m]))),c.push(D)}}return this.i=c.join("&")};function Xi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function mM(c,d){d&&!c.j&&(Tr(c),c.i=null,c.g.forEach(function(f,m){var D=m.toLowerCase();m!=D&&(Qw(this,m),Jw(this,D,f))},c)),c.j=d}function gM(c,d){let f=new Os;if(a.Image){let m=new Image;m.onload=y(Sr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Sr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Sr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Sr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function yM(c,d){let f=new Os,m=new AbortController,D=setTimeout(()=>{m.abort(),Sr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(D),A.ok?Sr(f,"TestPingServer: ok",!0,d):Sr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Sr(f,"TestPingServer: error",!1,d)})}function Sr(c,d,f,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(f)}catch{}}function vM(){this.g=new eM}function _M(c,d,f){let m=f||"";try{qw(c,function(D,A){let k=D;l(D)&&(k=cf(D)),d.push(m+A+"="+encodeURIComponent(k))})}catch(D){throw d.push(m+"type="+encodeURIComponent("_badmap")),D}}function js(c){this.l=c.Ub||null,this.j=c.eb||!1}S(js,uf),js.prototype.g=function(){return new zc(this.l,this.j)},js.prototype.i=function(c){return function(){return c}}({});function zc(c,d){vt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(zc,vt),t=zc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Bs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bs(this)),this.g&&(this.readyState=3,Bs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Us(this):Bs(this),this.readyState==3&&Zw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Us(this))},t.Qa=function(c){this.g&&(this.response=c,Us(this))},t.ga=function(){this.g&&Us(this)};function Us(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Bs(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Bs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xw(c){let d="";return de(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function _f(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Xw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ve(c,d,f))}function ze(c){vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ze,vt);var wM=/^https?$/i,IM=["POST","PUT"];t=ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hf.g(),this.v=this.o?Aw(this.o):Aw(hf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){eI(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)f.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IM,d,void 0))||m||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){eI(this,A)}};function eI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,tI(c),qc(c)}function tI(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),qc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qc(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nI(this):this.bb())},t.bb=function(){nI(this)};function nI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Jn(c)!=4||c.Z()!=2)){if(c.u&&Jn(c)==4)Cw(c.Ea,0,c);else if(Ct(c,"readystatechange"),Jn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=k===0){var D=String(c.D).match(Gw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!wM.test(D?D.toLowerCase():"")}f=m}if(f)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var A=2<Jn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",tI(c)}}finally{qc(c)}}}}function qc(c,d){if(c.g){rI(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ct(c,"ready");try{f.onreadystatechange=m}catch{}}}function rI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Jn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Xx(d)}};function iI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function EM(c){let d={};c=(c.g&&2<=Jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(X(c[m]))continue;var f=C(c[m]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[D]||[];d[D]=A,A.push(f)}b(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function oI(c){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$s("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$s("baseRetryDelayMs",5e3,c),this.cb=$s("retryDelaySeedMs",1e4,c),this.Wa=$s("forwardChannelMaxRetries",2,c),this.wa=$s("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Uw(c&&c.concurrentRequestLimit),this.Da=new vM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=oI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){Dt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=pI(this,null,this.W),Wc(this)};function wf(c){if(sI(c),c.G==3){var d=c.U++,f=Yn(c.I);if(Ve(f,"SID",c.K),Ve(f,"RID",d),Ve(f,"TYPE","terminate"),Hs(c,f),d=new Dr(c,c.j,d),d.L=2,d.v=Hc(Yn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=mI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Uc(d)}fI(c)}function Gc(c){c.g&&(Ef(c),c.g.cancel(),c.g=null)}function sI(c){Gc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Kc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Wc(c){if(!Bw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ts||vw(),Ss||(Ts(),Ss=!0),Zh.add(d,c),c.B=0}}function bM(c,d){return $w(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ps(g(c.Ga,c,d),hI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new Dr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=cI(this,D,d),f=Yn(this.I),Ve(f,"RID",c),Ve(f,"CVER",22),this.D&&Ve(f,"X-HTTP-Session-Id",this.D),Hs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Xw(A)))+"&"+d:this.m&&_f(f,this.m,A)),vf(this.h,D),this.Ua&&Ve(f,"TYPE","init"),this.P?(Ve(f,"$req",d),Ve(f,"SID","null"),D.T=!0,pf(D,f,null)):pf(D,f,d),this.G=2}}else this.G==3&&(c?aI(this,c):this.i.length==0||Bw(this.h)||aI(this))};function aI(c,d){var f;d?f=d.l:f=c.U++;let m=Yn(c.I);Ve(m,"SID",c.K),Ve(m,"RID",f),Ve(m,"AID",c.T),Hs(c,m),c.m&&c.o&&_f(m,c.m,c.o),f=new Dr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=cI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),vf(c.h,f),pf(f,m,d)}function Hs(c,d){c.H&&de(c.H,function(f,m){Ve(d,m,f)}),c.l&&qw({},function(f,m){Ve(d,m,f)})}function cI(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var D=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=D[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Oe=!0;for(let dt=0;dt<f;dt++){let De=D[dt].g,_t=D[dt].map;if(De-=A,0>De)A=Math.max(0,D[dt].g-100),Oe=!1;else try{_M(_t,k,"req"+De+"_")}catch{m&&m(_t)}}if(Oe){m=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function uI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ts||vw(),Ss||(Ts(),Ss=!0),Zh.add(d,c),c.v=0}}function If(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ps(g(c.Fa,c),hI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,lI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ps(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Gc(this),lI(this))};function Ef(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function lI(c){c.g=new Dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Yn(c.qa);Ve(d,"RID","rpc"),Ve(d,"SID",c.K),Ve(d,"AID",c.T),Ve(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ve(d,"TO",c.ja),Ve(d,"TYPE","xmlhttp"),Hs(c,d),c.m&&c.o&&_f(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Hc(Yn(d)),f.m=null,f.P=!0,Vw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Gc(this),If(this),Dt(19))};function Kc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function dI(c,d){var f=null;if(c.g==d){Kc(c),Ef(c),c.g=null;var m=2}else if(yf(c.h,d))f=d.D,Hw(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;m=Vc(),Ct(m,new Pw(m,f)),Wc(c)}else uI(c);else if(D=d.s,D==3||D==0&&0<d.X||!(m==1&&bM(c,d)||m==2&&If(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:ai(c,5);break;case 4:ai(c,10);break;case 3:ai(c,6);break;default:ai(c,2)}}}function hI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ai(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let D=!m;m=new si(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bc(m,"https"),Hc(m),D?gM(m.toString(),f):yM(m.toString(),f)}else Dt(2);c.G=0,c.l&&c.l.sa(d),fI(c),sI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function fI(c){if(c.G=0,c.ka=[],c.l){let d=zw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function pI(c,d,f){var m=f instanceof si?Yn(f):new si(f);if(m.g!="")d&&(m.g=d+"."+m.g),$c(m,m.s);else{var D=a.location;m=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var A=new si(null);m&&Bc(A,m),d&&(A.g=d),D&&$c(A,D),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&Ve(m,f,d),Ve(m,"VER",c.la),Hs(c,m),m}function mI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new ze(new js({eb:f})):new ze(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gI(){}t=gI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qc(){}Qc.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){vt.call(this),this.g=new oI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!X(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!X(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new eo(this)}S(Ft,vt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){wf(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=cf(c),c=f);d.i.push(new sM(d.Ya++,c)),d.G==3&&Wc(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,wf(this.g),delete this.g,Ft.aa.N.call(this)};function yI(c){lf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(yI,lf);function vI(){df.call(this),this.status=1}S(vI,df);function eo(c){this.g=c}S(eo,gI),eo.prototype.ua=function(){Ct(this.g,"a")},eo.prototype.ta=function(c){Ct(this.g,new yI(c))},eo.prototype.sa=function(c){Ct(this.g,new vI)},eo.prototype.ra=function(){Ct(this.g,"b")},Qc.prototype.createWebChannel=Qc.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,my=pr.createWebChannelTransport=function(){return new Qc},py=pr.getStatEventTarget=function(){return Vc()},fy=pr.Event=ii,dd=pr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lc.NO_ERROR=0,Lc.TIMEOUT=8,Lc.HTTP_ERROR=6,Ha=pr.ErrorCode=Lc,Ow.COMPLETE="complete",hy=pr.EventType=Ow,xw.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",vt.prototype.listen=vt.prototype.K,Ko=pr.WebChannel=xw,dy=pr.FetchXmlHttpFactory=js,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,ly=pr.XhrIo=ze}).apply(typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{});var ZD="@firebase/firestore";var lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");var fs="10.13.0";var Oi=new Fn("@firebase/firestore");function za(){return Oi.logLevel}function z(t,...e){if(Oi.logLevel<=_e.DEBUG){let n=e.map(Xv);Oi.debug(`Firestore (${fs}): ${t}`,...n)}}function gr(t,...e){if(Oi.logLevel<=_e.ERROR){let n=e.map(Xv);Oi.error(`Firestore (${fs}): ${t}`,...n)}}function ts(t,...e){if(Oi.logLevel<=_e.WARN){let n=e.map(Xv);Oi.warn(`Firestore (${fs}): ${t}`,...n)}}function Xv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function te(t="Unexpected state"){let e=`FIRESTORE (${fs}) INTERNAL ASSERTION FAILED: `+t;throw gr(e),new Error(e)}function Fe(t,e){t||te()}function ie(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends pt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var wn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var gd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}},Iy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ey=class{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string"),new gd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new lt(e)}},by=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Cy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new by(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Dy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ty=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new Dy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function e2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var yd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=e2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function Te(t,e){return t<e?-1:t>e?1:0}function ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var gt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new gt(0,0))}static max(){return new t(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var vd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},$e=class t extends vd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},t2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ht=class t extends vd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return t2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Y=class t{constructor(e){this.path=e}static fromPath(e){return new t($e.fromString(e))}static fromName(e){return new t($e.fromString(e).popFirst(5))}static empty(){return new t($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new $e(e.slice()))}};var Sy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Sy.UNKNOWN_ID=-1;function n2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new ki(i,Y.empty(),e)}function r2(t){return new ki(t.readTime,t.key,-1)}var ki=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(le.min(),Y.empty(),-1)}static max(){return new t(le.max(),Y.empty(),-1)}};function i2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}var o2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ay=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function uc(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==o2)throw t;z("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function s2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lc(t){return t.name==="IndexedDbTransactionError"}var RT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Qd(t){return t==null}function Ya(t){return t===0&&1/t==-1/0}function a2(t){return typeof t=="number"&&Number.isInteger(t)&&!Ya(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var c2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cG=[...c2,"documentOverlays"],u2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],l2=u2,d2=[...l2,"indexConfiguration","indexState","indexEntries"];var uG=[...d2,"globals"];function XD(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ps(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var qe=class t{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zo(this.root,e,this.comparator,!0)}},Zo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Bn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();let e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}};Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Et=class t{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _d(this.data.getIterator())}getIteratorFrom(e){return new _d(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},_d=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Un=class t{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new t([])}unionWith(e){let n=new Et(Ht.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var wd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var bt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bt.EMPTY_BYTE_STRING=new bt("");var h2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(t){if(Fe(!!t),typeof t=="string"){let e=0,n=h2.exec(t);if(Fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yr(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}function e_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function t_(t){let e=t.mapValue.fields.__previous_value__;return e_(e)?t_(e):e}function Ja(t){let e=yr(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var xy=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Id=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var hd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?e_(t)?4:OT(t)?9007199254740991:PT(t)?10:11:te()}function zn(t,e){if(t===e)return!0;let n=Fi(t);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ja(t).isEqual(Ja(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=yr(i.timestampValue),a=yr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Yr(i.bytesValue).isEqual(Yr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Be(i.geoPointValue.latitude)===Be(o.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Be(i.integerValue)===Be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Be(i.doubleValue),a=Be(o.doubleValue);return s===a?Ya(s)===Ya(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ns(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(XD(s)!==XD(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!zn(s[u],a[u])))return!1;return!0}(t,e);default:return te()}}function Za(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function rs(t,e){if(t===e)return 0;let n=Fi(t),r=Fi(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Be(o.integerValue||o.doubleValue),u=Be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return eT(t.timestampValue,e.timestampValue);case 4:return eT(Ja(t),Ja(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Yr(o),u=Yr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=Te(a[l],u[l]);if(h!==0)return h}return Te(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Te(Be(o.latitude),Be(s.latitude));return a!==0?a:Te(Be(o.longitude),Be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tT(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=Te(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:tT(y,S)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===hd.mapValue&&s===hd.mapValue)return 0;if(o===hd.mapValue)return 1;if(s===hd.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=Te(u[p],h[p]);if(g!==0)return g;let y=rs(a[u[p]],l[h[p]]);if(y!==0)return y}return Te(u.length,h.length)}(t.mapValue,e.mapValue);default:throw te()}}function eT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);let n=yr(t),r=yr(e),i=Te(n.seconds,r.seconds);return i!==0?i:Te(n.nanos,r.nanos)}function tT(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=rs(n[i],r[i]);if(o)return o}return Te(n.length,r.length)}function is(t){return My(t)}function My(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=My(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${My(n.fields[s])}`;return i+"}"}(t.mapValue):te()}function nT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ry(t){return!!t&&"integerValue"in t}function n_(t){return!!t&&"arrayValue"in t}function rT(t){return!!t&&"nullValue"in t}function iT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pd(t){return!!t&&"mapValue"in t}function PT(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ga(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var _n=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Ga(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ps(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Ga(this.value))}};function kT(t){let e=[];return ps(t.fields,(n,r)=>{let i=new Ht([n]);if(pd(r)){let o=kT(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Un(e)}var In=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,le.min(),le.min(),le.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,le.min(),le.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,le.min(),le.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var os=class{constructor(e,n){this.position=e,this.inclusive=n}};function oT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),n.key):r=rs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}var ss=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function f2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ed=class{},Xe=class t extends Ed{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Py(e,n,r):n==="array-contains"?new Fy(e,r):n==="in"?new Vy(e,r):n==="not-in"?new Ly(e,r):n==="array-contains-any"?new jy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Oy(e,r):new ky(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(rs(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},En=class t extends Ed{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return FT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function FT(t){return t.op==="and"}function VT(t){return p2(t)&&FT(t)}function p2(t){for(let e of t.filters)if(e instanceof En)return!1;return!0}function Ny(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+is(t.value);if(VT(t))return t.filters.map(e=>Ny(e)).join(",");{let e=t.filters.map(n=>Ny(n)).join(",");return`${t.op}(${e})`}}function LT(t,e){return t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(t,e):t instanceof En?function(r,i){return i instanceof En&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&LT(s,i.filters[a]),!0):!1}(t,e):void te()}function jT(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${is(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(jT).join(" ,")+"}"}(t):"Filter"}var Py=class extends Xe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){let n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}},Oy=class extends Xe{constructor(e,n){super(e,"in",n),this.keys=UT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},ky=class extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=UT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function UT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}var Fy=class extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return n_(n)&&Za(n.arrayValue,this.value)}},Vy=class extends Xe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Za(this.value.arrayValue,n)}},Ly=class extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Za(this.value.arrayValue,n)}},jy=class extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!n_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Za(this.value.arrayValue,r))}};var Uy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function aT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Uy(t,e,n,r,i,o,s)}function r_(t){let e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ny(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>is(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>is(r)).join(",")),e.ue=n}return e.ue}function i_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!f2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sT(t.startAt,e.startAt)&&sT(t.endAt,e.endAt)}function By(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Vi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function m2(t,e,n,r,i,o,s,a){return new Vi(t,e,n,r,i,o,s,a)}function o_(t){return new Vi(t)}function cT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BT(t){return t.collectionGroup!==null}function Wa(t){let e=ie(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Et(Ht.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ss(o,r))}),n.has(Ht.keyField().canonicalString())||e.ce.push(new ss(Ht.keyField(),r))}return e.ce}function $n(t){let e=ie(t);return e.le||(e.le=g2(e,Wa(t))),e.le}function g2(t,e){if(t.limitType==="F")return aT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ss(i.field,o)});let n=t.endAt?new os(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new os(t.startAt.position,t.startAt.inclusive):null;return aT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $y(t,e){let n=t.filters.concat([e]);return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bd(t,e,n){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yd(t,e){return i_($n(t),$n(e))&&t.limitType===e.limitType}function $T(t){return`${r_($n(t))}|lt:${t.limitType}`}function Qo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jT(i)).join(", ")}]`),Qd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>is(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>is(i)).join(",")),`Target(${r})`}($n(t))}; limitType=${t.limitType})`}function Jd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Wa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=oT(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Wa(r),i)||r.endAt&&!function(s,a,u){let l=oT(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Wa(r),i))}(t,e)}function y2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HT(t){return(e,n)=>{let r=!1;for(let i of Wa(t)){let o=v2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function v2(t,e,n){let r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?rs(u,l):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}var Jr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return NT(this.inner)}size(){return this.innerSize}};var _2=new qe(Y.comparator);function vr(){return _2}var zT=new qe(Y.comparator);function qa(...t){let e=zT;for(let n of t)e=e.insert(n.key,n);return e}function qT(t){let e=zT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ri(){return Ka()}function GT(){return Ka()}function Ka(){return new Jr(t=>t.toString(),(t,e)=>t.isEqual(e))}var w2=new qe(Y.comparator),I2=new Et(Y.comparator);function we(...t){let e=I2;for(let n of t)e=e.add(n);return e}var E2=new Et(Te);function b2(){return E2}function s_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ya(e)?"-0":e}}function WT(t){return{integerValue:""+t}}function C2(t,e){return a2(e)?WT(e):s_(t,e)}var as=class{constructor(){this._=void 0}};function D2(t,e,n){return t instanceof cs?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&e_(o)&&(o=t_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Li?QT(t,e):t instanceof ji?YT(t,e):function(i,o){let s=KT(i,o),a=uT(s)+uT(i.Pe);return Ry(s)&&Ry(i.Pe)?WT(a):s_(i.serializer,a)}(t,e)}function T2(t,e,n){return t instanceof Li?QT(t,e):t instanceof ji?YT(t,e):n}function KT(t,e){return t instanceof us?function(r){return Ry(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var cs=class extends as{},Li=class extends as{constructor(e){super(),this.elements=e}};function QT(t,e){let n=JT(e);for(let r of t.elements)n.some(i=>zn(i,r))||n.push(r);return{arrayValue:{values:n}}}var ji=class extends as{constructor(e){super(),this.elements=e}};function YT(t,e){let n=JT(e);for(let r of t.elements)n=n.filter(i=>!zn(i,r));return{arrayValue:{values:n}}}var us=class extends as{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function uT(t){return Be(t.integerValue||t.doubleValue)}function JT(t){return n_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function S2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Li&&i instanceof Li||r instanceof ji&&i instanceof ji?ns(r.elements,i.elements,zn):r instanceof us&&i instanceof us?zn(r.Pe,i.Pe):r instanceof cs&&i instanceof cs}(t.transform,e.transform)}var Hy=class{constructor(e,n){this.version=e,this.transformResults=n}},mr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function md(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ls=class{};function ZT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xa(t.key,mr.none()):new Ui(t.key,t.data,mr.none());{let n=t.data,r=_n.empty(),i=new Et(Ht.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _r(t.key,r,new Un(i.toArray()),mr.none())}}function A2(t,e,n){t instanceof Ui?function(i,o,s){let a=i.value.clone(),u=dT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof _r?function(i,o,s){if(!md(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=dT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(XT(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Qa(t,e,n,r){return t instanceof Ui?function(o,s,a,u){if(!md(o.precondition,s))return a;let l=o.value.clone(),h=hT(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof _r?function(o,s,a,u){if(!md(o.precondition,s))return a;let l=hT(o.fieldTransforms,u,s),h=s.data;return h.setAll(XT(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return md(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function x2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=KT(r.transform,i||null);o!=null&&(n===null&&(n=_n.empty()),n.set(r.field,o))}return n||null}function lT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ns(r,i,(o,s)=>S2(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ui=class extends ls{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_r=class extends ls{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function XT(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function dT(t,e,n){let r=new Map;Fe(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,T2(s,a,n[i]))}return r}function hT(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,D2(o,s,e))}return r}var Xa=class extends ls{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zy=class extends ls{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&A2(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qa(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=GT();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=ZT(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&ns(this.mutations,e.mutations,(n,r)=>lT(n,r))&&ns(this.baseMutations,e.baseMutations,(n,r)=>lT(n,r))}},Gy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Fe(e.mutations.length===r.length);let i=function(){return w2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Wy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ky=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Je,be;function M2(t){switch(t){default:return te();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function eS(t){if(t===void 0)return gr("GRPC error has no .code"),M.UNKNOWN;switch(t){case Je.OK:return M.OK;case Je.CANCELLED:return M.CANCELLED;case Je.UNKNOWN:return M.UNKNOWN;case Je.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Je.INTERNAL:return M.INTERNAL;case Je.UNAVAILABLE:return M.UNAVAILABLE;case Je.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Je.NOT_FOUND:return M.NOT_FOUND;case Je.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Je.ABORTED:return M.ABORTED;case Je.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Je.DATA_LOSS:return M.DATA_LOSS;default:return te()}}(be=Je||(Je={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";var fT=null;function R2(){return new TextEncoder}var N2=new Kr([4294967295,4294967295],0);function pT(t){let e=R2().encode(t),n=new uy;return n.update(e),new Uint8Array(n.digest())}function mT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Kr([n,r],0),new Kr([i,o],0)]}var Qy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(r<0)throw new Ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Kr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Kr.fromNumber(r)));return i.compare(N2)===1&&(i=new Kr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=pT(e),[r,i]=mT(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=pT(e),[r,i]=mT(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ni=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Cd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(le.min(),i,new qe(Te),vr(),we())}},ec=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,we(),we(),we())}};var Xo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Dd=class{constructor(e,n){this.targetId=e,this.me=n}},Td=class{constructor(e,n,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Sd=class{constructor(){this.fe=0,this.ge=yT(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),r=we();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new ec(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=yT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Yy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=vr(),this.qe=gT(),this.Qe=new qe(Te)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(By(o))if(r===0){let s=new Y(o.path);this.Ue(n,s,In.newNoDocument(s,le.min()))}else Fe(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}fT?.et(function(h,p,g,y,S){var P,R,H,X,K,Ie;let He={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},de=p.unchangedNames;return de&&(He.bloomFilter={applied:S===0,hashCount:(P=de?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(X=(H=(R=de?.bits)===null||R===void 0?void 0:R.bitmap)===null||H===void 0?void 0:H.length)!==null&&X!==void 0?X:0,padding:(Ie=(K=de?.bits)===null||K===void 0?void 0:K.padding)!==null&&Ie!==void 0?Ie:0,mightContain:b=>{var v;return(v=y?.mightContain(b))!==null&&v!==void 0&&v}}),He}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Yr(r).toUint8Array()}catch(u){if(u instanceof wd)return ts("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Qy(s,i,o)}catch(u){return ts(u instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&By(a.target)){let u=new Y(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,In.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=we();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Cd(e,n,this.Qe,this.ke,r);return this.ke=vr(),this.qe=gT(),this.Qe=new qe(Te),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Sd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(Te),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function gT(){return new qe(Y.comparator)}function yT(){return new qe(Y.comparator)}var P2={asc:"ASCENDING",desc:"DESCENDING"},O2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k2={and:"AND",or:"OR"},Jy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Zy(t,e){return t.useProto3Json||Qd(e)?e:{value:e}}function Ad(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F2(t,e){return Ad(t,e.toTimestamp())}function Hn(t){return Fe(!!t),le.fromTimestamp(function(n){let r=yr(n);return new gt(r.seconds,r.nanos)}(t))}function a_(t,e){return Xy(t,e).canonicalString()}function Xy(t,e){let n=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nS(t){let e=$e.fromString(t);return Fe(aS(e)),e}function ev(t,e){return a_(t.databaseId,e.path)}function gy(t,e){let n=nS(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(iS(n))}function rS(t,e){return a_(t.databaseId,e)}function V2(t){let e=nS(t);return e.length===4?$e.emptyPath():iS(e)}function tv(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iS(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vT(t,e,n){return{name:ev(t,e),fields:n.value.mapValue.fields}}function L2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Fe(h===void 0||typeof h=="string"),bt.fromBase64String(h||"")):(Fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:eS(l.code);return new $(h,l.message||"")}(s);n=new Td(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=gy(t,r.document.name),o=Hn(r.document.updateTime),s=r.document.createTime?Hn(r.document.createTime):le.min(),a=new _n({mapValue:{fields:r.document.fields}}),u=In.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Xo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=gy(t,r.document),o=r.readTime?Hn(r.readTime):le.min(),s=In.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Xo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=gy(t,r.document),o=r.removedTargetIds||[];n=new Xo([],o,i,null)}else{if(!("filter"in e))return te();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Ky(i,o),a=r.targetId;n=new Dd(a,s)}}return n}function j2(t,e){let n;if(e instanceof Ui)n={update:vT(t,e.key,e.value)};else if(e instanceof Xa)n={delete:ev(t,e.key)};else if(e instanceof _r)n={update:vT(t,e.key,e.data),updateMask:K2(e.fieldMask)};else{if(!(e instanceof zy))return te();n={verify:ev(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof cs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Li)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ji)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof us)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:F2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:te()}(t,e.precondition)),n}function U2(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Hn(i.updateTime):Hn(o);return s.isEqual(le.min())&&(s=Hn(o)),new Hy(s,i.transformResults||[])}(n,e))):[]}function B2(t,e){return{documents:[rS(t,e.path)]}}function $2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rS(t,i);let o=function(l){if(l.length!==0)return sS(En.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Yo(g.field),direction:q2(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Zy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function H2(t){let e=V2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fe(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=oS(p);return g instanceof En&&VT(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(S){return new ss(Jo(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Qd(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new os(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new os(y,g)}(n.endAt)),m2(e,i,s,o,a,"F",u,l)}function z2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Jo(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Jo(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Jo(n.unaryFilter.field);return Xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Jo(n.unaryFilter.field);return Xe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(Jo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(r=>oS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function q2(t){return P2[t]}function G2(t){return O2[t]}function W2(t){return k2[t]}function Yo(t){return{fieldPath:t.canonicalString()}}function Jo(t){return Ht.fromServerFormat(t.fieldPath)}function sS(t){return t instanceof Xe?function(n){if(n.op==="=="){if(iT(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NAN"}};if(rT(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iT(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NAN"}};if(rT(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(n.field),op:G2(n.op),value:n.value}}}(t):t instanceof En?function(n){let r=n.getFilters().map(i=>sS(i));return r.length===1?r[0]:{compositeFilter:{op:W2(n.op),filters:r}}}(t):te()}function K2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var tc=class t{constructor(e,n,r,i,o=le.min(),s=le.min(),a=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nv=class{constructor(e){this.ct=e}};function Q2(t){let e=H2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bd(e,e.limit,"L"):e}var xd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Be(e.integerValue));else if("doubleValue"in e){let r=Be(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ya(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=yr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Yr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?OT(e)?this.dt(n,Number.MAX_SAFE_INTEGER):PT(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):te()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Be(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),Y.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};xd.vt=new xd;var rv=class{constructor(){this.un=new iv}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(ki.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},iv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Et($e.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et($e.comparator)).toArray()}};var dG=new Uint8Array(0);var jn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(41943040,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);var nc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var ov=class{constructor(){this.changes=new Jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var av=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Qa(r.mutation,i,Un.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){let i=Ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=qa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=vr(),s=Ka(),a=function(){return Ka()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof _r)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Qa(h.mutation,l,h.mutation.getFieldMask(),gt.now())):s.set(l.key,Un.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new sv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ka(),i=new qe((s,a)=>s-a),o=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Un.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||we()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=GT();h.forEach(g=>{if(!o.has(g)){let y=ZT(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(Ri()),a=-1,u=o;return s.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,we())).next(h=>({batchId:a,changes:qT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=qa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=qa();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,u=>{let l=function(p,g){return new Vi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,In.newInvalidDocument(h)))});let a=qa();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Qa(h.mutation,l,Un.empty(),gt.now()),Jd(n,l)&&(a=a.insert(u,l))}),a})}};var cv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Q2(i.bundledQuery),readTime:Hn(i.readTime)}}(n)),O.resolve()}};var uv=class{constructor(){this.overlays=new qe(Y.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ri();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=Ri(),o=n.length+1,s=new Y(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new qe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ri(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ri(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Wy(n,r));let o=this.Ir.get(n);o===void 0&&(o=we(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var lv=class{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var rc=class{constructor(){this.Tr=new Et(Ze.Er),this.dr=new Et(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new Y(new $e([])),r=new Ze(n,e),i=new Ze(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new Y(new $e([])),r=new Ze(n,e),i=new Ze(n,e+1),o=we();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ze=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||Y.comparator(e.key,n.key)}};var dv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(Ze.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new qy(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ze(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ze(n,0),i=new Ze(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Te);return n.forEach(i=>{let o=new Ze(i,0),s=new Ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;Y.isDocumentKey(o)||(o=o.child(""));let s=new Ze(new Y(o),0),a=new Et(Te);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),O.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{let o=new Ze(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ze(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var hv=class{constructor(e){this.Mr=e,this.docs=function(){return new qe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():In.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=vr(),s=n.path,a=new Y(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||i2(r2(h),r)<=0||(i.has(h.key)||Jd(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){te()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fv(this)}getSize(e){return O.resolve(this.size)}},fv=class extends ov{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var pv=class{constructor(e){this.persistence=e,this.Nr=new Jr(n=>r_(n),i_),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rc,this.targetCount=0,this.kr=nc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new nc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}};var mv=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new RT(0),this.Kr=!1,this.Kr=!0,this.$r=new lv,this.referenceDelegate=e(this),this.Ur=new pv(this),this.indexManager=new rv,this.remoteDocumentCache=function(i){return new hv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new nv(n),this.Gr=new cv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new dv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);let i=new gv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},gv=class extends Ay{constructor(e){super(),this.currentSequenceNumber=e}},yv=class t{constructor(e){this.persistence=e,this.Jr=new rc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=Y.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var vv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=we(),i=we();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var _v=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var wv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PD()?8:s2(at())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new _v;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(za()<=_e.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(za()<=_e.DEBUG&&z("QueryEngine","Query:",Qo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(za()<=_e.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):O.resolve())}Yi(e,n){if(cT(n))return O.resolve(null);let r=$n(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bd(n,null,"F"),r=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=we(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,bd(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return cT(n)||i.isEqual(le.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?O.resolve(null):(za()<=_e.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qo(n)),this.rs(e,s,n,n2(i,-1)).next(a=>a))})}ts(e,n){let r=new Et(HT(e));return n.forEach((i,o)=>{Jd(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return za()<=_e.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Qo(n)),this.Ji.getDocumentsMatchingQuery(e,n,ki.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Iv=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new qe(Te),this._s=new Jr(o=>r_(o),i_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new av(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function Y2(t,e,n,r){return new Iv(t,e,n,r)}function cS(t,e){return _(this,null,function*(){let n=ie(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=we();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function J2(t,e){let n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=O.resolve();return g.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(P=>{let R=l.docVersions.get(S);Fe(R!==null),P.version.compareTo(R)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=we();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function uS(t){let e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Z2(t,e){let n=ie(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(bt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(P,R,H){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(g,y,h)&&a.push(n.Ur.updateTargetData(o,y))});let u=vr(),l=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(X2(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(le.min())){let h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function X2(t,e,n){let r=we(),i=we();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=vr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function ej(t,e){let n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tj(t,e){let n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new tc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Ev(t,e,n){return _(this,null,function*(){let r=ie(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!lc(s))throw s;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function _T(t,e,n){let r=ie(t),i=le.min(),o=we();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ie(u),g=p._s.get(h);return g!==void 0?O.resolve(p.os.get(g)):p.Ur.getTargetData(l,h)}(r,s,$n(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:le.min(),n?o:we())).next(a=>(nj(r,y2(e),a),{documents:a,Ts:o})))}function nj(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}var Md=class{constructor(){this.activeTargetIds=b2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var bv=class{constructor(){this.so=new Md,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Md,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Cv=class{_o(e){}shutdown(){}};var Rd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var fd=null;function yy(){return fd===null?fd=function(){return 268435456+Math.round(2147483648*Math.random())}():fd++,"0x"+fd.toString(16)}var rj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Dv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var It="WebChannelConnection",Tv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=yy(),u=this.xo(n,r.toUriEncodedString());z("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(h=>(z("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ts("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=rj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=yy();return new Promise((s,a)=>{let u=new ly;u.setWithCredentials(!0),u.listenOnce(hy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ha.NO_ERROR:let h=u.getResponseJson();z(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ha.TIMEOUT:z(It,`RPC '${e}' ${o} timed out`),a(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ha.HTTP_ERROR:let p=u.getStatus();if(z(It,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let S=function(R){let H=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN}(y.status);a(new $(S,y.message))}else a(new $(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(M.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{z(It,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);z(It,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=yy(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=my(),a=py(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new dy({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");z(It,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),g=!1,y=!1,S=new Dv({Io:R=>{y?z(It,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(z(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),z(It,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),P=(R,H,X)=>{R.listen(H,K=>{try{X(K)}catch(Ie){setTimeout(()=>{throw Ie},0)}})};return P(p,Ko.EventType.OPEN,()=>{y||(z(It,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),P(p,Ko.EventType.CLOSE,()=>{y||(y=!0,z(It,`RPC '${e}' stream ${i} transport closed`),S.So())}),P(p,Ko.EventType.ERROR,R=>{y||(y=!0,ts(It,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new $(M.UNAVAILABLE,"The operation could not be completed")))}),P(p,Ko.EventType.MESSAGE,R=>{var H;if(!y){let X=R.data[0];Fe(!!X);let K=X,Ie=K.error||((H=K[0])===null||H===void 0?void 0:H.error);if(Ie){z(It,`RPC '${e}' stream ${i} received error:`,Ie);let He=Ie.status,de=function(w){let E=Je[w];if(E!==void 0)return eS(E)}(He),b=Ie.message;de===void 0&&(de=M.INTERNAL,b="Unknown error status: "+He+" with message "+Ie.message),y=!0,S.So(new $(de,b)),p.close()}else z(It,`RPC '${e}' stream ${i} received:`,X),S.bo(X)}}),P(a,fy.STAT_EVENT,R=>{R.stat===dd.PROXY?z(It,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===dd.NOPROXY&&z(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function vy(){return typeof document<"u"?document:null}function Zd(t){return new Jy(t,!0)}var Nd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Pd=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Nd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sv=class extends Pd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=L2(this.serializer,e),r=function(o){if(!("targetChange"in o))return le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Hn(s.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=tv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=By(u)?{documents:B2(o,u)}:{query:$2(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=tS(o,s.resumeToken);let l=Zy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(le.min())>0){a.readTime=Ad(o,s.snapshotVersion.toTimestamp());let l=Zy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=z2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=tv(this.serializer),n.removeTarget=e,this.a_(n)}},Av=class extends Pd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=U2(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=tv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>j2(this.serializer,r))};this.a_(n)}};var xv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Xy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Xy(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(M.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Mv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gr(n),this.D_=!1):z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Rv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>_(this,null,function*(){$i(this)&&(z("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=ie(u);l.L_.add(4),yield dc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Xd(l)})}(this))}))}),this.q_=new Mv(r,i)}};function Xd(t){return _(this,null,function*(){if($i(t))for(let e of t.B_)yield e(!0)})}function dc(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function lS(t,e){let n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),d_(n)?l_(n):ms(n).r_()&&u_(n,e))}function c_(t,e){let n=ie(t),r=ms(n);n.N_.delete(e),r.r_()&&dS(n,e),n.N_.size===0&&(r.r_()?r.o_():$i(n)&&n.q_.set("Unknown"))}function u_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ms(t).A_(e)}function dS(t,e){t.Q_.xe(e),ms(t).R_(e)}function l_(t){t.Q_=new Yy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ms(t).start(),t.q_.v_()}function d_(t){return $i(t)&&!ms(t).n_()&&t.N_.size>0}function $i(t){return ie(t).L_.size===0}function hS(t){t.Q_=void 0}function ij(t){return _(this,null,function*(){t.q_.set("Online")})}function oj(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{u_(t,e)})})}function sj(t,e){return _(this,null,function*(){hS(t),d_(t)?(t.q_.M_(e),l_(t)):t.q_.set("Unknown")})}function aj(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof Td&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Od(t,r)}else if(e instanceof Xo?t.Q_.Ke(e):e instanceof Dd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{let r=yield uS(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(bt.EMPTY_BYTE_STRING,h.snapshotVersion)),dS(o,u);let p=new tc(h.target,u,l,h.sequenceNumber);u_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Od(t,r)}})}function Od(t,e,n){return _(this,null,function*(){if(!lc(e))throw e;t.L_.add(1),yield dc(t),t.q_.set("Offline"),n||(n=()=>uS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){z("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Xd(t)}))})}function fS(t,e){return e().catch(n=>Od(t,n,e))}function eh(t){return _(this,null,function*(){let e=ie(t),n=Zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;cj(e);)try{let i=yield ej(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,uj(e,i)}catch(i){yield Od(e,i)}pS(e)&&mS(e)})}function cj(t){return $i(t)&&t.O_.length<10}function uj(t,e){t.O_.push(e);let n=Zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function pS(t){return $i(t)&&!Zr(t).n_()&&t.O_.length>0}function mS(t){Zr(t).start()}function lj(t){return _(this,null,function*(){Zr(t).p_()})}function dj(t){return _(this,null,function*(){let e=Zr(t);for(let n of t.O_)e.m_(n.mutations)})}function hj(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=Gy.from(r,e,n);yield fS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield eh(t)})}function fj(t,e){return _(this,null,function*(){e&&Zr(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return M2(s)&&s!==M.ABORTED}(i.code)){let o=r.O_.shift();Zr(r).s_(),yield fS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield eh(r)}})}(t,e)),pS(t)&&mS(t)})}function wT(t,e){return _(this,null,function*(){let n=ie(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");let r=$i(n);n.L_.add(3),yield dc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Xd(n)})}function pj(t,e){return _(this,null,function*(){let n=ie(t);e?(n.L_.delete(2),yield Xd(n)):e||(n.L_.add(2),yield dc(n),n.q_.set("Unknown"))})}function ms(t){return t.K_||(t.K_=function(n,r,i){let o=ie(n);return o.w_(),new Sv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:ij.bind(null,t),Ro:oj.bind(null,t),mo:sj.bind(null,t),d_:aj.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),d_(t)?l_(t):t.q_.set("Unknown")):(yield t.K_.stop(),hS(t))}))),t.K_}function Zr(t){return t.U_||(t.U_=function(n,r,i){let o=ie(n);return o.w_(),new Av(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:lj.bind(null,t),mo:fj.bind(null,t),f_:dj.bind(null,t),g_:hj.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield eh(t)):(yield t.U_.stop(),t.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Nv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function h_(t,e){if(gr("AsyncQueue",`${e}: ${t}`),lc(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}var kd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=qa(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Fd=class{constructor(){this.W_=new qe(Y.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},ds=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,kd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Pv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Ov=class{constructor(){this.queries=IT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=ie(n),o=i.queries;i.queries=IT(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}};function IT(){return new Jr(t=>$T(t),Yd)}function gS(t,e){return _(this,null,function*(){let n=ie(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Pv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=h_(s,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&f_(n)})}function yS(t,e){return _(this,null,function*(){let n=ie(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function mj(t,e){let n=ie(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&f_(n)}function gj(t,e,n){let r=ie(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function f_(t){t.Y_.forEach(e=>{e.next()})}var kv,ET;(ET=kv||(kv={})).ea="default",ET.Cache="cache";var Vd=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ds(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kv.Cache}};var Ld=class{constructor(e){this.key=e}},jd=class{constructor(e){this.key=e}},Fv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=we(),this.mutatedKeys=we(),this.Aa=HT(e),this.Ra=new kd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Fd,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Jd(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?S!==P&&(r.track({type:3,doc:y}),R=!0):this.ga(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,S){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return P(y)-P(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new ds(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Fd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=we(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new jd(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ld(r))}),n}ba(e){this.Ta=e.Ts,this.da=we();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ds.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Vv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Lv=class{constructor(e){this.key=e,this.va=!1}},jv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Jr(a=>$T(a),Yd),this.Ma=new Map,this.xa=new Set,this.Oa=new qe(Y.comparator),this.Na=new Map,this.La=new rc,this.Ba={},this.ka=new Map,this.qa=nc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function yj(t,e,n=!0){return _(this,null,function*(){let r=bS(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield vS(r,e,n,!0),i})}function vj(t,e){return _(this,null,function*(){let n=bS(t);yield vS(n,e,!0,!1)})}function vS(t,e,n,r){return _(this,null,function*(){let i=yield tj(t.localStore,$n(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield _j(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&lS(t.remoteStore,i),a})}function _j(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,g,y)=>function(P,R,H,X){return _(this,null,function*(){let K=R.view.ma(H);K.ns&&(K=yield _T(P.localStore,R.query,!1).then(({documents:b})=>R.view.ma(b,K)));let Ie=X&&X.targetChanges.get(R.targetId),He=X&&X.targetMismatches.get(R.targetId)!=null,de=R.view.applyChanges(K,P.isPrimaryClient,Ie,He);return CT(P,R.targetId,de.wa),de.snapshot})}(t,p,g,y);let o=yield _T(t.localStore,e,!0),s=new Fv(e,o.Ts),a=s.ma(o.documents),u=ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);CT(t,n,l.wa);let h=new Vv(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function wj(t,e,n){return _(this,null,function*(){let r=ie(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Yd(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ev(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&c_(r.remoteStore,i.targetId),Uv(r,i.targetId)}).catch(uc))):(Uv(r,i.targetId),yield Ev(r.localStore,i.targetId,!0))})}function Ij(t,e){return _(this,null,function*(){let n=ie(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),c_(n.remoteStore,r.targetId))})}function Ej(t,e,n){return _(this,null,function*(){let r=xj(t);try{let i=yield function(s,a){let u=ie(s),l=gt.now(),h=a.reduce((y,S)=>y.add(S.key),we()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=vr(),P=we();return u.cs.getEntries(y,h).next(R=>{S=R,S.forEach((H,X)=>{X.isValidDocument()||(P=P.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let H=[];for(let X of a){let K=x2(X,p.get(X.key).overlayedDocument);K!=null&&H.push(new _r(X.key,K,kT(K.value.mapValue),mr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,H,a)}).next(R=>{g=R;let H=R.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,R.batchId,H)})}).then(()=>({batchId:g.batchId,changes:qT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new qe(Te)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield hc(r,i.changes),yield eh(r.remoteStore)}catch(i){let o=h_(i,"Failed to persist write");n.reject(o)}})}function _S(t,e){return _(this,null,function*(){let n=ie(t);try{let r=yield Z2(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Fe(s.va):i.removedDocuments.size>0&&(Fe(s.va),s.va=!1))}),yield hc(n,r,e)}catch(r){yield uc(r)}})}function bT(t,e,n){let r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=ie(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.j_)g.Z_(a)&&(l=!0)}),l&&f_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bj(t,e,n){return _(this,null,function*(){let r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new qe(Y.comparator);s=s.insert(o,In.newNoDocument(o,le.min()));let a=we().add(o),u=new Cd(le.min(),new Map,new qe(Te),s,a);yield _S(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),p_(r)}else yield Ev(r.localStore,e,!1).then(()=>Uv(r,e,n)).catch(uc)})}function Cj(t,e){return _(this,null,function*(){let n=ie(t),r=e.batch.batchId;try{let i=yield J2(n.localStore,e);IS(n,r,null),wS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield hc(n,i)}catch(i){yield uc(i)}})}function Dj(t,e,n){return _(this,null,function*(){let r=ie(t);try{let i=yield function(s,a){let u=ie(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Fe(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);IS(r,e,n),wS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield hc(r,i)}catch(i){yield uc(i)}})}function wS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function IS(t,e,n){let r=ie(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Uv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ES(t,r)})}function ES(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(c_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),p_(t))}function CT(t,e,n){for(let r of n)r instanceof Ld?(t.La.addReference(r.key,e),Tj(t,r)):r instanceof jd?(z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ES(t,r.key)):te()}function Tj(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(z("SyncEngine","New document in limbo: "+n),t.xa.add(r),p_(t))}function p_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new Y($e.fromString(e)),r=t.qa.next();t.Na.set(r,new Lv(n)),t.Oa=t.Oa.insert(n,r),lS(t.remoteStore,new tc($n(o_(n.path)),r,"TargetPurposeLimboResolution",RT.oe))}}function hc(t,e,n){return _(this,null,function*(){let r=ie(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=vv.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=ie(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,g=>O.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>O.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!lc(p))throw p;z("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.os.get(g),S=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(g,P)}}})}(r.localStore,o))})}function Sj(t,e){return _(this,null,function*(){let n=ie(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());let r=yield cS(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(M.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hc(n,r.hs)}})}function Aj(t,e){let n=ie(t),r=n.Na.get(e);if(r&&r.va)return we().add(r.key);{let i=we(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function bS(t){let e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Aj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bj.bind(null,e),e.Ca.d_=mj.bind(null,e.eventManager),e.Ca.$a=gj.bind(null,e.eventManager),e}function xj(t){let e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dj.bind(null,e),e}var Ud=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Y2(this.persistence,new wv,e.initialUser,this.serializer)}createPersistence(e){return new mv(yv.Zr,this.serializer)}createSharedClientState(e){return new bv}terminate(){return _(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Bv=class{initialize(e,n){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sj.bind(null,this.syncEngine),yield pj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Ov}()}createDatastore(e){let n=Zd(e.databaseInfo.databaseId),r=function(o){return new Tv(o)}(e.databaseInfo);return function(o,s,a,u){return new xv(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new Rv(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bT(this.syncEngine,n,0),function(){return Rd.D()?new Rd:new Cv}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,h){let p=new jv(i,o,s,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return _(this,null,function*(){var e,n;yield function(i){return _(this,null,function*(){let o=ie(i);z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield dc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var Bd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var $v=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lt.UNAUTHENTICATED,this.clientId=yd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>_(this,null,function*(){z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=h_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function _y(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield cS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function DT(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Rj(t);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>wT(e.remoteStore,i)),t._onlineComponents=e})}function Mj(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Rj(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _y(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Mj(n))throw n;ts("Error using user provided cache. Falling back to memory cache: "+n),yield _y(t,new Ud)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield _y(t,new Ud);return t._offlineComponents})}function CS(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield DT(t,t._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield DT(t,new Bv))),t._onlineComponents})}function Nj(t){return CS(t).then(e=>e.syncEngine)}function DS(t){return _(this,null,function*(){let e=yield CS(t),n=e.eventManager;return n.onListen=yj.bind(null,e.syncEngine),n.onUnlisten=wj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ij.bind(null,e.syncEngine),n})}function Pj(t,e,n={}){let r=new wn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new Bd({next:g=>{s.enqueueAndForget(()=>yS(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Vd(o_(a.path),h,{includeMetadataChanges:!0,_a:!0});return gS(o,p)}(yield DS(t),t.asyncQueue,e,n,r)})),r.promise}function Oj(t,e,n={}){let r=new wn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new Bd({next:g=>{s.enqueueAndForget(()=>yS(o,p)),g.fromCache&&u.source==="server"?l.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Vd(a,h,{includeMetadataChanges:!0,_a:!0});return gS(o,p)}(yield DS(t),t.asyncQueue,e,n,r)})),r.promise}function TS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var TT=new Map;function SS(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kj(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ST(t){if(!Y.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function AT(t){if(Y.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function th(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function wr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=th(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Fj(t,e){if(e<=0)throw new $(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var $d=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},hs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $d({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $d(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wy;switch(r.type){case"firstParty":return new Cy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=TT.get(n);r&&(z("ComponentProvider","Removing Datastore"),TT.delete(n),r.terminate())}(this),Promise.resolve()}};function Vj(t,e,n,r={}){var i;let o=(t=wr(t,hs))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=lt.MOCK_USER;else{a=xD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lt(l)}t._authCredentials=new Iy(new gd(a,u))}}var Bi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ot=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Qr=class t extends Bi{constructor(e,n,r){super(e,n,o_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Y(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Xt(t,e,...n){if(t=ct(t),SS("collection","path",e),t instanceof hs){let r=$e.fromString(e,...n);return AT(r),new Qr(t,null,r)}{if(!(t instanceof Ot||t instanceof Qr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child($e.fromString(e,...n));return AT(r),new Qr(t.firestore,null,r)}}function qn(t,e,...n){if(t=ct(t),arguments.length===1&&(e=yd.newId()),SS("doc","path",e),t instanceof hs){let r=$e.fromString(e,...n);return ST(r),new Ot(t,null,new Y(r))}{if(!(t instanceof Ot||t instanceof Qr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child($e.fromString(e,...n));return ST(r),new Ot(t.firestore,t instanceof Qr?t.converter:null,new Y(r))}}var Hv=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Nd(this,"async_queue_retry"),this.Eu=()=>{let n=vy();n&&z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=vy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=vy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new wn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return _(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!lc(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw gr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=Nv.createAndSchedule(this,e,n,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&te()}verifyOperationInProgress(){}mu(){return _(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};var Xr=class extends hs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Hv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||xS(this),this._firestoreClient.terminate()}};function AS(t,e){let n=typeof t=="object"?t:Mi(),r=typeof t=="string"?t:e||"(default)",i=vn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=AD("firestore");o&&Vj(i,...o)}return i}function m_(t){return t._firestoreClient||xS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xS(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new xy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new $v(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var ic=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(bt.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var oc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hd=class{constructor(e){this._methodName=e}};var sc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}};var ac=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var Lj=/^__.*__$/,zv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ui(e,this.data,n,this.fieldTransforms)}};function MS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}var qv=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return zd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(MS(this.wu)&&Lj.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Gv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zd(e)}Nu(e,n,r,i=!1){return new qv({wu:e,methodName:n,Ou:r,path:Ht.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function g_(t){let e=t._freezeSettings(),n=Zd(t._databaseId);return new Gv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RS(t,e,n,r,i,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,i);OS("Data must be an object, but it was:",s,r);let a=NS(r,s),u,l;if(o.merge)u=new Un(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=Uj(e,p,n);if(!s.contains(g))throw new $(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);$j(h,g)||h.push(g)}u=new Un(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new zv(new _n(a),u,l)}function jj(t,e,n,r=!1){return y_(n,t.Nu(r?4:3,e))}function y_(t,e){if(PS(t=ct(t)))return OS("Unsupported field value:",e,t),NS(t,e);if(t instanceof Hd)return function(r,i){if(!MS(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=y_(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return C2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=gt.fromDate(r);return{timestampValue:Ad(i.serializer,o)}}if(r instanceof gt){let o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ad(i.serializer,o)}}if(r instanceof sc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ic)return{bytesValue:tS(i.serializer,r._byteString)};if(r instanceof Ot){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:a_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ac)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return s_(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${th(r)}`)}(t,e)}function NS(t,e){let n={};return NT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(t,(r,i)=>{let o=y_(i,e.bu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function PS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof sc||t instanceof ic||t instanceof Ot||t instanceof Hd||t instanceof ac)}function OS(t,e,n){if(!PS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=th(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Uj(t,e,n){if((e=ct(e))instanceof oc)return e._internalPath;if(typeof e=="string")return kS(t,e);throw zd("Field path arguments must be of type string or ",t,!1,void 0,n)}var Bj=new RegExp("[~\\*/\\[\\]]");function kS(t,e,n){if(e.search(Bj)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oc(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zd(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(M.INVALID_ARGUMENT,a+t+u)}function $j(t,e){return t.some(n=>n.isEqual(e))}var qd=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(FS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Wv=class extends qd{data(){return super.data()}};function FS(t,e){return typeof e=="string"?kS(t,e):e instanceof oc?e._internalPath:e._delegate._internalPath}function Hj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cc=class{},Gd=class extends cc{};function nh(t,e,...n){let r=[];e instanceof cc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof Qv).length,a=o.filter(u=>u instanceof Kv).length;if(s>1||s>0&&a>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Kv=class t extends Gd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return LS(e._query,n),new Bi(e.firestore,e.converter,$y(e._query,n))}_parse(e){let n=g_(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){MT(p,h);let y=[];for(let S of p)y.push(xT(u,o,S));g={arrayValue:{values:y}}}else g=xT(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||MT(p,h),g=jj(a,s,p,h==="in"||h==="not-in");return Xe.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var Qv=class t extends cc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)LS(s,u),s=$y(s,u)}(e._query,n),new Bi(e.firestore,e.converter,$y(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Yv=class t extends Gd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Bi(e.firestore,e.converter,bd(e._query,this._limit,this._limitType))}};function VS(t){return Fj("limit",t),Yv._create("limit",t,"F")}function xT(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BT(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child($e.fromString(n));if(!Y.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nT(t,new Y(r))}if(n instanceof Ot)return nT(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${th(n)}.`)}function MT(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LS(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Jv=class{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ps(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Be(s.doubleValue));return new ac(o)}convertGeoPoint(e){return new sc(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=t_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ja(e));default:return null}}convertTimestamp(e){let n=yr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=$e.fromString(e);Fe(aS(r));let i=new Id(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(n)||gr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function jS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Pi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wd=class extends qd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new es(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(FS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},es=class extends Wd{data(e={}){return super.data(e)}},Zv=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new es(this._firestore,this._userDataWriter,r.key,r,new Pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new es(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new es(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:zj(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function zj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}function US(t){t=wr(t,Ot);let e=wr(t.firestore,Xr);return Pj(m_(e),t._key).then(n=>qj(e,t,n))}var Kd=class extends Jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ic(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}};function rh(t){t=wr(t,Bi);let e=wr(t.firestore,Xr),n=m_(e),r=new Kd(e);return Hj(t._query),Oj(n,t._query).then(i=>new Zv(e,r,t,i))}function Hi(t,e,n){t=wr(t,Ot);let r=wr(t.firestore,Xr),i=jS(t.converter,e,n);return v_(r,[RS(g_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,mr.none())])}function BS(t){return v_(wr(t.firestore,Xr),[new Xa(t._key,mr.none())])}function $S(t,e){let n=wr(t.firestore,Xr),r=qn(t),i=jS(t.converter,e);return v_(n,[RS(g_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,mr.exists(!1))]).then(()=>r)}function v_(t,e){return function(r,i){let o=new wn;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Ej(yield Nj(r),i,o)})),o.promise}(m_(t),e)}function qj(t,e,n){let r=n.docs.get(e._key),i=new Kd(t);return new Wd(t,i,e._key,r,new Pi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){fs=i})(Wr),Pt(new ut("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Xr(new Ey(r.getProvider("auth-internal")),new Ty(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),mt(ZD,"4.7.0",e),mt(ZD,"4.7.0","esm2017")})();var JS=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(j(cr),j(Nn))},e.\u0275dir=Ye({type:e});let t=e;return t})(),dh=(()=>{let e=class e extends JS{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$r(e)))(o||e)}})(),e.\u0275dir=Ye({type:e,features:[fn]});let t=e;return t})(),_c=new ee(""),Gj={provide:_c,useExisting:nr(()=>w_),multi:!0},w_=(()=>{let e=class e extends dh{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$r(e)))(o||e)}})(),e.\u0275dir=Ye({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&J("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[Ei([Gj]),fn]});let t=e;return t})(),Wj={provide:_c,useExisting:nr(()=>ei),multi:!0};function Kj(){let t=ur()?ur().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Qj=new ee(""),ei=(()=>{let e=class e extends JS{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Kj())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(j(cr),j(Nn),j(Qj,8))},e.\u0275dir=Ye({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&J("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Ei([Wj]),fn]});let t=e;return t})();var ZS=new ee(""),XS=new ee("");function eA(t){return t!=null}function tA(t){return Hr(t)?Ge(t):t}function nA(t){let e={};return t.forEach(n=>{e=n!=null?L(L({},e),n):e}),Object.keys(e).length===0?null:e}function rA(t,e){return e.map(n=>n(t))}function Yj(t){return!t.validate}function iA(t){return t.map(e=>Yj(e)?e:n=>e.validate(n))}function Jj(t){if(!t)return null;let e=t.filter(eA);return e.length==0?null:function(n){return nA(rA(n,e))}}function I_(t){return t!=null?Jj(iA(t)):null}function Zj(t){if(!t)return null;let e=t.filter(eA);return e.length==0?null:function(n){let r=rA(n,e).map(tA);return $f(r).pipe(me(nA))}}function E_(t){return t!=null?Zj(iA(t)):null}function HS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Xj(t){return t._rawValidators}function eU(t){return t._rawAsyncValidators}function __(t){return t?Array.isArray(t)?t:[t]:[]}function oh(t,e){return Array.isArray(t)?t.includes(e):t===e}function zS(t,e){let n=__(e);return __(t).forEach(i=>{oh(n,i)||n.push(i)}),n}function qS(t,e){return __(e).filter(n=>!oh(t,n))}var sh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=I_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=E_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},vs=class extends sh{get formDirective(){return null}get path(){return null}},vc=class extends sh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ah=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},tU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},PG=ye(L({},tU),{"[class.ng-submitted]":"isSubmitted"}),ws=(()=>{let e=class e extends ah{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(j(vc,2))},e.\u0275dir=Ye({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Fo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[fn]});let t=e;return t})(),oA=(()=>{let e=class e extends ah{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(j(vs,10))},e.\u0275dir=Ye({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Fo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[fn]});let t=e;return t})();var fc="VALID",ih="INVALID",gs="PENDING",pc="DISABLED",_s=class{},ch=class extends _s{constructor(e,n){super(),this.value=e,this.source=n}},gc=class extends _s{constructor(e,n){super(),this.pristine=e,this.source=n}},yc=class extends _s{constructor(e,n){super(),this.touched=e,this.source=n}},ys=class extends _s{constructor(e,n){super(),this.status=e,this.source=n}};function sA(t){return(hh(t)?t.validators:t)||null}function nU(t){return Array.isArray(t)?I_(t):t||null}function aA(t,e){return(hh(e)?e.asyncValidators:t)||null}function rU(t){return Array.isArray(t)?E_(t):t||null}function hh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function iU(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[n])throw new Q(1001,"")}function oU(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new Q(1002,"")})}var uh=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ma(()=>this.statusReactive()),this.statusReactive=fa(void 0),this._pristine=ma(()=>this.pristineReactive()),this.pristineReactive=fa(!0),this._touched=ma(()=>this.touchedReactive()),this.touchedReactive=fa(!1),this._events=new Ke,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mn(this.statusReactive)}set status(e){mn(()=>this.statusReactive.set(e))}get valid(){return this.status===fc}get invalid(){return this.status===ih}get pending(){return this.status==gs}get disabled(){return this.status===pc}get enabled(){return this.status!==pc}get pristine(){return mn(this.pristineReactive)}set pristine(e){mn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return mn(this.touchedReactive)}set touched(e){mn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(zS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(qS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(qS(e,this._rawAsyncValidators))}hasValidator(e){return oh(this._rawValidators,e)}hasAsyncValidator(e){return oh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(L({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new yc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new yc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(L({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new gc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new gc(!0,r))}markAsPending(e={}){this.status=gs;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ys(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(L({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=pc,this.errors=null,this._forEachChild(i=>{i.disable(ye(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ch(this.value,r)),this._events.next(new ys(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(L({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=fc,this._forEachChild(r=>{r.enable(ye(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(L({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fc||this.status===gs)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ch(this.value,n)),this._events.next(new ys(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(L({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pc:fc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=gs,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=tA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ys(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ae,this.statusChanges=new Ae}_calculateStatus(){return this._allControlsDisabled()?pc:this.errors?ih:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gs)?gs:this._anyControlsHaveStatus(ih)?ih:fc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new gc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new yc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=nU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rU(this._rawAsyncValidators)}},lh=class extends uh{constructor(e,n,r){super(sA(n),aA(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){oU(this,!0,e),Object.keys(e).forEach(r=>{iU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var b_=new ee("CallSetDisabledState",{providedIn:"root",factory:()=>C_}),C_="always";function sU(t,e){return[...e.path,t]}function cA(t,e,n=C_){uA(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),cU(t,e),lU(t,e),uU(t,e),aU(t,e)}function GS(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function aU(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function uA(t,e){let n=Xj(t);e.validator!==null?t.setValidators(HS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=eU(t);e.asyncValidator!==null?t.setAsyncValidators(HS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();GS(e._rawValidators,i),GS(e._rawAsyncValidators,i)}function cU(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&lA(t,e)})}function uU(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&lA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function lA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function lU(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function dU(t,e){t==null,uA(t,e)}function hU(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function fU(t){return Object.getPrototypeOf(t.constructor)===dh}function pU(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mU(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ei?n=o:fU(o)?r=o:i=o}),i||r||n||null}var gU={provide:vs,useExisting:nr(()=>D_)},mc=Promise.resolve(),D_=(()=>{let e=class e extends vs{get submitted(){return mn(this.submittedReactive)}constructor(r,i,o){super(),this.callSetDisabledState=o,this._submitted=ma(()=>this.submittedReactive()),this.submittedReactive=fa(!1),this._directives=new Set,this.ngSubmit=new Ae,this.form=new lh({},I_(r),E_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){mc.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),cA(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){mc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){mc.then(()=>{let i=this._findContainer(r.path),o=new lh({});dU(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){mc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){mc.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),pU(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(j(ZS,10),j(XS,10),j(b_,8))},e.\u0275dir=Ye({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&J("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ei([gU]),fn]});let t=e;return t})();function WS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function KS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var yU=class extends uh{constructor(e=null,n,r){super(sA(n),aA(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(KS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){WS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){WS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){KS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var vU={provide:vc,useExisting:nr(()=>zi)},QS=Promise.resolve(),zi=(()=>{let e=class e extends vc{constructor(r,i,o,s,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new yU,this._registered=!1,this.name="",this.update=new Ae,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=mU(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),hU(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){QS.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Pl(i);QS.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?sU(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(j(vs,9),j(ZS,10),j(XS,10),j(_c,10),j(zr,8),j(b_,8))},e.\u0275dir=Ye({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ei([vU]),fn,Ur]});let t=e;return t})(),dA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ye({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var _U={provide:_c,useExisting:nr(()=>fA),multi:!0};function hA(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function wU(t){return t.split(":")[0]}var fA=(()=>{let e=class e extends dh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=hA(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=wU(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$r(e)))(o||e)}})(),e.\u0275dir=Ye({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&J("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ei([_U]),fn]});let t=e;return t})(),pA=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(hA(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(j(Nn),j(cr),j(fA,9))},e.\u0275dir=Ye({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),IU={provide:_c,useExisting:nr(()=>mA),multi:!0};function YS(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function EU(t){return t.split(":")[0]}var mA=(()=>{let e=class e extends dh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let u=0;u<a.length;u++){let l=a[u],h=this._getOptionValue(l.value);o.push(h)}}else{let a=i.options;for(let u=0;u<a.length;u++){let l=a[u];if(l.selected){let h=this._getOptionValue(l.value);o.push(h)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=EU(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$r(e)))(o||e)}})(),e.\u0275dir=Ye({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&J("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ei([IU]),fn]});let t=e;return t})(),gA=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(YS(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(YS(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(j(Nn),j(cr),j(mA,9))},e.\u0275dir=Ye({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var bU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Mo({type:e}),e.\u0275inj=xo({});let t=e;return t})();var ti=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:b_,useValue:r.callSetDisabledState??C_}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Mo({type:e}),e.\u0275inj=xo({imports:[bU]});let t=e;return t})();var wc={prod:!0,logging:!1,firebaseConfig:{apiKey:"AIzaSyCKKFA4iBcqm_RaojG8mBCIwRwiP_caKCE",authDomain:"impulse-develop.firebaseapp.com",projectId:"impulse-develop",storageBucket:"impulse-develop.appspot.com",messagingSenderId:"946243191276",appId:"1:946243191276:web:eed8ce767fa1d458aa40c9",measurementId:"G-BDL31YG14K"}};var q=class{static log(...e){wc!=null&&wc.logging==!0&&console.log(...e)}};var CU="firebase",DU="10.13.0";mt(CU,DU,"app");var _A="@firebase/installations",x_="0.6.8";var wA=1e4,IA=`w:${x_}`,EA="FIS_v2",TU="https://firebaseinstallations.googleapis.com/v1",SU=60*60*1e3,AU="installations",xU="Installations";var MU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Gi=new $t(AU,xU,MU);function bA(t){return t instanceof pt&&t.code.includes("request-failed")}function CA({projectId:t}){return`${TU}/projects/${t}/installations`}function DA(t){return{token:t.token,requestStatus:2,expiresIn:NU(t.expiresIn),creationTime:Date.now()}}function TA(t,e){return _(this,null,function*(){let r=(yield e.json()).error;return Gi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function SA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function RU(t,{refreshToken:e}){let n=SA(t);return n.append("Authorization",PU(e)),n}function AA(t){return _(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function NU(t){return Number(t.replace("s","000"))}function PU(t){return`${EA} ${t}`}function OU(r,i){return _(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=CA(t),s=SA(t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:EA,appId:t.appId,sdkVersion:IA},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield AA(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:DA(p.authToken)}}else throw yield TA("Create Installation",h)})}function xA(t){return new Promise(e=>{setTimeout(e,t)})}function kU(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var FU=/^[cdef][\w-]{21}$/,A_="";function VU(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=LU(t);return FU.test(n)?n:A_}catch{return A_}}function LU(t){return kU(t).substr(0,22)}function mh(t){return`${t.appName}!${t.appId}`}var MA=new Map;function RA(t,e){let n=mh(t);NA(n,e),jU(n,e)}function NA(t,e){let n=MA.get(t);if(n)for(let r of n)r(e)}function jU(t,e){let n=UU();n&&n.postMessage({key:t,fid:e}),BU()}var qi=null;function UU(){return!qi&&"BroadcastChannel"in self&&(qi=new BroadcastChannel("[Firebase] FID Change"),qi.onmessage=t=>{NA(t.data.key,t.data.fid)}),qi}function BU(){MA.size===0&&qi&&(qi.close(),qi=null)}var $U="firebase-installations-database",HU=1,Wi="firebase-installations-store",T_=null;function M_(){return T_||(T_=cd($U,HU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wi)}}})),T_}function ph(t,e){return _(this,null,function*(){let n=mh(t),i=(yield M_()).transaction(Wi,"readwrite"),o=i.objectStore(Wi),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&RA(t,e.fid),e})}function PA(t){return _(this,null,function*(){let e=mh(t),r=(yield M_()).transaction(Wi,"readwrite");yield r.objectStore(Wi).delete(e),yield r.done})}function gh(t,e){return _(this,null,function*(){let n=mh(t),i=(yield M_()).transaction(Wi,"readwrite"),o=i.objectStore(Wi),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&RA(t,a.fid),a})}function R_(t){return _(this,null,function*(){let e,n=yield gh(t.appConfig,r=>{let i=zU(r),o=qU(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===A_?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function zU(t){let e=t||{fid:VU(),registrationStatus:0};return OA(e)}function qU(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Gi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=GU(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:WU(t)}:{installationEntry:e}}function GU(t,e){return _(this,null,function*(){try{let n=yield OU(t,e);return ph(t.appConfig,n)}catch(n){throw bA(n)&&n.customData.serverCode===409?yield PA(t.appConfig):yield ph(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function WU(t){return _(this,null,function*(){let e=yield yA(t.appConfig);for(;e.registrationStatus===1;)yield xA(100),e=yield yA(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield R_(t);return r||n}return e})}function yA(t){return gh(t,e=>{if(!e)throw Gi.create("installation-not-found");return OA(e)})}function OA(t){return KU(t)?{fid:t.fid,registrationStatus:0}:t}function KU(t){return t.registrationStatus===1&&t.registrationTime+wA<Date.now()}function QU(r,i){return _(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=YU(t,n),s=RU(t,n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:IA,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield AA(()=>fetch(o,l));if(h.ok){let p=yield h.json();return DA(p)}else throw yield TA("Generate Auth Token",h)})}function YU(t,{fid:e}){return`${CA(t)}/${e}/authTokens:generate`}function N_(t,e=!1){return _(this,null,function*(){let n,r=yield gh(t.appConfig,o=>{if(!kA(o))throw Gi.create("not-registered");let s=o.authToken;if(!e&&XU(s))return o;if(s.requestStatus===1)return n=JU(t,e),o;{if(!navigator.onLine)throw Gi.create("app-offline");let a=tB(o);return n=ZU(t,a),a}});return n?yield n:r.authToken})}function JU(t,e){return _(this,null,function*(){let n=yield vA(t.appConfig);for(;n.authToken.requestStatus===1;)yield xA(100),n=yield vA(t.appConfig);let r=n.authToken;return r.requestStatus===0?N_(t,e):r})}function vA(t){return gh(t,e=>{if(!kA(e))throw Gi.create("not-registered");let n=e.authToken;return nB(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ZU(t,e){return _(this,null,function*(){try{let n=yield QU(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield ph(t.appConfig,r),n}catch(n){if(bA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield PA(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield ph(t.appConfig,r)}throw n}})}function kA(t){return t!==void 0&&t.registrationStatus===2}function XU(t){return t.requestStatus===2&&!eB(t)}function eB(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+SU}function tB(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function nB(t){return t.requestStatus===1&&t.requestTime+wA<Date.now()}function rB(t){return _(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield R_(e);return r?r.catch(console.error):N_(e).catch(console.error),n.fid})}function iB(t,e=!1){return _(this,null,function*(){let n=t;return yield oB(n),(yield N_(n,e)).token})}function oB(t){return _(this,null,function*(){let{registrationPromise:e}=yield R_(t);e&&(yield e)})}function sB(t){if(!t||!t.options)throw S_("App Configuration");if(!t.name)throw S_("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw S_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function S_(t){return Gi.create("missing-app-config-values",{valueName:t})}var FA="installations",aB="installations-internal",cB=t=>{let e=t.getProvider("app").getImmediate(),n=sB(e),r=vn(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},uB=t=>{let e=t.getProvider("app").getImmediate(),n=vn(e,FA).getImmediate();return{getId:()=>rB(n),getToken:i=>iB(n,i)}};function lB(){Pt(new ut(FA,cB,"PUBLIC")),Pt(new ut(aB,uB,"PRIVATE"))}lB();mt(_A,x_);mt(_A,x_,"esm2017");var yh="analytics",dB="firebase_id",hB="origin",fB=60*1e3,pB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",j_="https://www.googletagmanager.com/gtag/js";var kt=new Fn("@firebase/analytics");var mB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zt=new $t("analytics","Analytics",mB);function gB(t){if(!t.startsWith(j_)){let e=zt.create("invalid-gtag-resource",{gtagURL:t});return kt.warn(e.message),""}return t}function HA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function yB(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function vB(t,e){let n=yB("firebase-js-sdk-policy",{createScriptURL:gB}),r=document.createElement("script"),i=`${j_}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function _B(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function wB(t,e,n,r,i,o){return _(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield HA(n)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){kt.error(a)}t("config",i,o)})}function IB(t,e,n,r,i){return _(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield HA(n);for(let u of s){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){kt.error(o)}})}function EB(t,e,n,r){function i(o,...s){return _(this,null,function*(){try{if(o==="event"){let[a,u]=s;yield IB(t,e,n,a,u)}else if(o==="config"){let[a,u]=s;yield wB(t,e,n,r,a,u)}else if(o==="consent"){let[a,u]=s;t("consent",a,u)}else if(o==="get"){let[a,u,l]=s;t("get",a,u,l)}else if(o==="set"){let[a]=s;t("set",a)}else t(o,...s)}catch(a){kt.error(a)}})}return i}function bB(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=EB(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function CB(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(j_)&&n.src.includes(t))return n;return null}var DB=30,TB=1e3,O_=class{constructor(e={},n=TB){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},zA=new O_;function SB(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function AB(t){return _(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:SB(r)},o=pB.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw zt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function xB(r){return _(this,arguments,function*(t,e=zA,n){let{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw zt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw zt.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new k_;return setTimeout(()=>_(this,null,function*(){u.abort()}),n!==void 0?n:fB),qA({appId:i,apiKey:o,measurementId:s},a,u,e)})}function qA(o,s,a){return _(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=zA){var u;let{appId:l,measurementId:h}=t;try{yield MB(r,e)}catch(p){if(h)return kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield AB(t);return i.deleteThrottleMetadata(l),p}catch(p){let g=p;if(!RB(g)){if(i.deleteThrottleMetadata(l),h)return kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:h};throw p}let y=Number((u=g?.customData)===null||u===void 0?void 0:u.httpStatus)===503?Wg(n,i.intervalMillis,DB):Wg(n,i.intervalMillis),S={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return i.setThrottleMetadata(l,S),kt.debug(`Calling attemptFetch again in ${y} millis`),qA(t,S,r,i)}})}function MB(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function RB(t){if(!(t instanceof pt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var k_=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var F_;function NB(t,e,n,r,i){return _(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}var V_;function PB(t){V_=t}function OB(t){F_=t}function kB(){return _(this,null,function*(){if(Ba())try{yield od()}catch(t){return kt.warn(zt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return kt.warn(zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function FB(t,e,n,r,i,o,s){return _(this,null,function*(){var a;let u=xB(t);u.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&kt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>kt.error(y)),e.push(u);let l=kB().then(y=>{if(y)return r.getId()}),[h,p]=yield Promise.all([u,l]);CB(o)||vB(o,h.measurementId),V_&&(i("consent","default",V_),PB(void 0)),i("js",new Date);let g=(a=s?.config)!==null&&a!==void 0?a:{};return g[hB]="firebase",g.update=!0,p!=null&&(g[dB]=p),i("config",h.measurementId,g),F_&&(i("set",F_),OB(void 0)),h.measurementId})}var L_=class{constructor(e){this.app=e}_delete(){return delete Ic[this.app.options.appId],Promise.resolve()}},Ic={},VA=[],LA={},P_="dataLayer",VB="gtag",jA,GA,UA=!1;function LB(){let t=[];if(id()&&t.push("This is a browser extension environment."),OD()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=zt.create("invalid-analytics-context",{errorInfo:e});kt.warn(n.message)}}function jB(t,e,n){LB();let r=t.options.appId;if(!r)throw zt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zt.create("no-api-key");if(Ic[r]!=null)throw zt.create("already-exists",{id:r});if(!UA){_B(P_);let{wrappedGtag:o,gtagCore:s}=bB(Ic,VA,LA,P_,VB);GA=o,jA=s,UA=!0}return Ic[r]=FB(t,VA,LA,e,jA,P_,n),new L_(t)}function WA(t=Mi()){t=ct(t);let e=vn(t,yh);return e.isInitialized()?e.getImmediate():UB(t)}function UB(t,e={}){let n=vn(t,yh);if(n.isInitialized()){let i=n.getImmediate();if(hr(e,n.getOptions()))return i;throw zt.create("already-initialized")}return n.initialize({options:e})}function U_(t,e,n,r){t=ct(t),NB(GA,Ic[t.app.options.appId],e,n,r).catch(i=>kt.error(i))}var BA="@firebase/analytics",$A="0.10.7";function BB(){Pt(new ut(yh,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return jB(r,i,n)},"PUBLIC")),Pt(new ut("analytics-internal",t,"PRIVATE")),mt(BA,$A),mt(BA,$A,"esm2017");function t(e){try{let n=e.getProvider(yh).getImmediate();return{logEvent:(r,i,o)=>U_(n,r,i,o)}}catch(n){throw zt.create("interop-component-reg-failed",{reason:n})}}}BB();var Is=class t{app;analytics;constructor(){q.log("FirebaseService: Init",this),this.app=cy(wc.firebaseConfig),this.analytics=WA(this.app),q.log("FirebaseService: Init Complete",this)}log(e,n=null){let r={url:window.location.href,device:window.navigator.userAgent,timestamp:new Date().toISOString(),event:e};n&&(r.data=n),q.log("FirebaseService: Sending Event to Analytics: ",e,r),U_(this.analytics,e,r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var Gn=class t{constructor(e){this.firebase=e;q.log("FirestoreService: Init",this),this.firestore=AS(this.firebase.app),q.log("FirestoreService: Init Complete",this)}firestore;data={};read(r){return _(this,arguments,function*(e,n={order:"order",start:1,end:100,limit:100}){q.log("FirestoreService: read:: ",e,n);let i=Xt(this.firestore,e),o=nh(i,VS(n.limit)),s=[];return(yield rh(o)).forEach(u=>{let l=u.data();l.id=u.id,s.push(l)}),s.sort((u,l)=>u.order-l.order),Promise.resolve(s)})}static \u0275fac=function(n){return new(n||t)(Z(Is))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};function $B(t,e){if(t&1){let n=Me();x(0,"tr")(1,"td"),G(2),N(),x(3,"td")(4,"i",10),J("click",function(){let i=ae(n).$implicit,o=V();return ce(o.edit(i))}),G(5,"edit"),N()()()}if(t&2){let n=e.$implicit;F(2),Ue(n.id)}}function HB(t,e){if(t&1){let n=Me();x(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h4",15),G(5,"Document Data"),N(),x(6,"button",16),J("click",function(){ae(n);let i=V();return ce(i.document=void 0)}),N()(),x(7,"div",17)(8,"div",18)(9,"div",19)(10,"textarea",20),Jt("ngModelChange",function(i){ae(n);let o=V();return pn(o.data,i)||(o.data=i),ce(i)}),N()()()(),x(11,"div",21)(12,"i",22),J("click",function(){ae(n);let i=V();return ce(i.save())}),G(13,"save"),N(),x(14,"i",23),J("click",function(){ae(n);let i=V();return ce(i.delete())}),G(15,"delete"),N()()()()()}if(t&2){let n=V();F(10),Yt("ngModel",n.data)}}var _h=class t{constructor(e){this.firestore=e}key;document;data;documents=[];edit(e){this.document=e,this.data=JSON.stringify(this.document?.data(),null,1)}fetch(){if(!this.key)return;this.documents=[];let e=Xt(this.firestore.firestore,this.key),n=nh(e);rh(n).then(r=>{r.forEach(i=>{this.documents.push(i)})})}save(){return _(this,null,function*(){if(this.data&&!(!this.key||!this.document)){var e=void 0;try{e=JSON.parse(this.data)}catch(n){console.error(n),alert("Error while parsing document data, please check and retry");return}this.document?.id?(yield Hi(qn(Xt(this.firestore.firestore,this.key),this.document?.id),e),alert("Document Updated.")):e.id?(yield Hi(qn(Xt(this.firestore.firestore,this.key),e.id),e),alert("Document Added.")):(yield $S(Xt(this.firestore.firestore,this.key),e),alert("Document Added.")),this.document=void 0}})}delete(){return _(this,null,function*(){this.data&&(!this.key||!this.document||(yield BS(qn(Xt(this.firestore.firestore,this.key),this.document?.id)),this.document=void 0))})}static \u0275fac=function(n){return new(n||t)(j(Gn))};static \u0275cmp=xe({type:t,selectors:[["app-admin"]],standalone:!0,features:[Re],decls:24,vars:3,consts:[[1,"row","m-0"],[1,"mt-3","col-6","text-end"],["type","text","placeholder","Collection",3,"ngModelChange","ngModel"],[1,"mt-3","col-6"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"p-3"],[1,"table"],[4,"ngFor","ngForOf"],[1,"material-icons","mx-2","text-info","pointer",3,"click"],["class","modal extended",4,"ngIf"],[1,"m-2","material-icons","pointer",3,"click"],[1,"modal","extended"],[1,"modal-dialog","modal-fullscreen"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-12","my-2"],["rows","15",1,"form-control","x",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"m-2","text-primary","material-icons","pointer",3,"click"],[1,"m-2","text-danger","material-icons","pointer",3,"click"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"div",1)(2,"input",2),Jt("ngModelChange",function(o){return pn(r.key,o)||(r.key=o),o}),N()(),x(3,"div",3)(4,"button",4),J("click",function(){return r.fetch()}),G(5,"Fetch"),N()()(),x(6,"div",0)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),G(12,"Document Key"),N(),x(13,"th"),G(14,"Action"),N()()(),x(15,"tbody"),ue(16,$B,6,1,"tr",7),x(17,"tr")(18,"th"),G(19,"Add New Document"),N(),x(20,"th")(21,"i",8),J("click",function(){return r.edit({})}),G(22,"add"),N()()()()()()(),ue(23,HB,16,1,"div",9)),n&2&&(F(2),Yt("ngModel",r.key),F(14),B("ngForOf",r.documents),F(7),B("ngIf",r.document))},dependencies:[ti,ei,ws,zi,Pn,ot],styles:[".modal.extended[_ngcontent-%COMP%]{display:block}.modal.extended[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fffaf0}"]})};var B_=(t,e)=>{let n,r=sessionStorage.getItem("user");return r!=null&&(n=JSON.parse(r)),e.url.includes("admin")&&(n==null||n.role!="ADMIN")?(U(st).navigate(["/unauthorized"]),!1):!0};function ux(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var lx=ux,dx=new $t("auth","Firebase",ux());var Dh=new Fn("@firebase/auth");function zB(t,...e){Dh.logLevel<=_e.WARN&&Dh.warn(`Auth (${Wr}): ${t}`,...e)}function Ih(t,...e){Dh.logLevel<=_e.ERROR&&Dh.error(`Auth (${Wr}): ${t}`,...e)}function Kn(t,...e){throw ow(t,...e)}function bn(t,...e){return ow(t,...e)}function iw(t,e,n){let r=Object.assign(Object.assign({},lx()),{[e]:n});return new $t("auth","Firebase",r).create(e,{appName:t.name})}function Ki(t){return iw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qB(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Kn(t,"argument-error"),iw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ow(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dx.create(t,...e)}function ne(t,e,...n){if(!t)throw ow(e,...n)}function Ir(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ih(e),new Error(e)}function br(t,e){t||Ir(e)}function z_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GB(){return QA()==="http:"||QA()==="https:"}function QA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function WB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GB()||id()||"connection"in navigator)?navigator.onLine:!0}function KB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Qi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,br(n>e,"Short delay should be less than long delay!"),this.isMobile=MD()||RD()}get(){return WB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function sw(t,e){br(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Th=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var QB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YB=new Qi(3e4,6e4);function aw(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Cs(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return hx(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Wo(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();return g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode),Th.fetch()(fx(t,t.config.apiHost,n,p),Object.assign({method:e,headers:g,referrerPolicy:"no-referrer"},l))}))})}function hx(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},QB),e);try{let i=new q_(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw wh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw wh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw wh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw wh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw iw(t,h,l);Kn(t,h)}}catch(i){if(i instanceof pt)throw i;Kn(t,"network-request-failed",{message:String(i)})}})}function JB(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Cs(t,e,n,r,i);return"mfaPendingCredential"in l&&Kn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function fx(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?sw(t.config,i):`${t.config.apiScheme}://${i}`}var q_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bn(this.auth,"network-request-failed")),YB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function wh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=bn(t,e,r);return i.customData._tokenResponse=n,i}function ZB(t,e){return _(this,null,function*(){return Cs(t,"POST","/v1/accounts:delete",e)})}function px(t,e){return _(this,null,function*(){return Cs(t,"POST","/v1/accounts:lookup",e)})}function Ec(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function mx(t,e=!1){return _(this,null,function*(){let n=ct(t),r=yield n.getIdToken(e),i=cw(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ec($_(i.auth_time)),issuedAtTime:Ec($_(i.iat)),expirationTime:Ec($_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function $_(t){return Number(t)*1e3}function cw(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ih("JWT malformed, contained fewer than 3 sections"),null;try{let i=Hg(n);return i?JSON.parse(i):(Ih("Failed to decode base64 JWT payload"),null)}catch(i){return Ih("Caught error parsing JWT payload as JSON",i?.toString()),null}}function YA(t){let e=cw(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cc(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof pt&&XB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function XB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var G_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Dc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Sh(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Cc(t,px(n,{idToken:r}));ne(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?yx(o.providerUserInfo):[],a=e4(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Dc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function gx(t){return _(this,null,function*(){let e=ct(t);yield Sh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function e4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yx(t){return t.map(e=>{var{providerId:n}=e,r=uu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function t4(t,e){return _(this,null,function*(){let n=yield hx(t,{},()=>_(this,null,function*(){let r=Wo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=fx(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Th.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function n4(t,e){return _(this,null,function*(){return Cs(t,"POST","/v2/accounts:revokeToken",aw(t,e))})}var bc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");let n=YA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield t4(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ne(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ne(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ir("not implemented")}};function ni(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var bs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=uu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Cc(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return mx(this,e)}reload(){return gx(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Sh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Ln(this.auth.app))return Promise.reject(Ki(this.auth));let e=yield this.getIdToken();return yield Cc(this,ZB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,H=(l=n.createdAt)!==null&&l!==void 0?l:void 0,X=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:Ie,isAnonymous:He,providerData:de,stsTokenManager:b}=n;ne(K&&b,e,"internal-error");let v=bc.fromJSON(this.name,b);ne(typeof K=="string",e,"internal-error"),ni(p,e.name),ni(g,e.name),ne(typeof Ie=="boolean",e,"internal-error"),ne(typeof He=="boolean",e,"internal-error"),ni(y,e.name),ni(S,e.name),ni(P,e.name),ni(R,e.name),ni(H,e.name),ni(X,e.name);let w=new t({uid:K,auth:e,email:g,emailVerified:Ie,displayName:p,isAnonymous:He,photoURL:S,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:H,lastLoginAt:X});return de&&Array.isArray(de)&&(w.providerData=de.map(E=>Object.assign({},E))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new bc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Sh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];ne(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?yx(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new bc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var JA=new Map;function Er(t){br(t instanceof Function,"Expected a class definition");let e=JA.get(t);return e?(br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JA.set(t,e),e)}var r4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),W_=r4;function Eh(t,e,n){return`firebase:${t}:${e}:${n}`}var Ah=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Eh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Eh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?bs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Er(W_),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Er(W_),s=Eh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p=bs._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function ZA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ix(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bx(e))return"Blackberry";if(Cx(e))return"Webos";if(_x(e))return"Safari";if((e.includes("chrome/")||wx(e))&&!e.includes("edge/"))return"Chrome";if(Ex(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function vx(t=at()){return/firefox\//i.test(t)}function _x(t=at()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wx(t=at()){return/crios\//i.test(t)}function Ix(t=at()){return/iemobile/i.test(t)}function Ex(t=at()){return/android/i.test(t)}function bx(t=at()){return/blackberry/i.test(t)}function Cx(t=at()){return/webos/i.test(t)}function uw(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function i4(t=at()){var e;return uw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function o4(){return ND()&&document.documentMode===10}function Dx(t=at()){return uw(t)||Ex(t)||Cx(t)||bx(t)||/windows phone/i.test(t)||Ix(t)}function Tx(t,e=[]){let n;switch(t){case"Browser":n=ZA(at());break;case"Worker":n=`${ZA(at())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${r}`}var K_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function s4(n){return _(this,arguments,function*(t,e={}){return Cs(t,"GET","/v2/passwordPolicy",aw(t,e))})}var a4=6,Q_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:a4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Y_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xh(this),this.idTokenSubscription=new xh(this),this.beforeStateQueue=new K_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Er(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ah.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield px(this,{idToken:e}),r=yield bs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Ln(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Sh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=KB()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Ln(this.app))return Promise.reject(Ki(this));let n=e?ct(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Ln(this.app)?Promise.reject(Ki(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ln(this.app)?Promise.reject(Ki(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Er(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield s4(this),n=new Q_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $t("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield n4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Er(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=yield Ah.create(this,[Er(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&zB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Vh(t){return ct(t)}var xh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=FD(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var lw={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c4(t){lw=t}function u4(t){return lw.loadJS(t)}function l4(){return lw.gapiScript}function Sx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Ax(t,e){let n=vn(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(hr(o,e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}function d4(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Er);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function xx(t,e,n){let r=Vh(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=Mx(e),{host:s,port:a}=h4(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||f4()}function Mx(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h4(t){let e=Mx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:XA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:XA(s)}}}function XA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function f4(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Tc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}};function Es(t,e){return _(this,null,function*(){return JB(t,"POST","/v1/accounts:signInWithIdp",aw(t,e))})}var p4="http://localhost",Mh=class t extends Tc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=uu(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Es(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Es(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Es(e,n)}buildRequest(){let e={requestUri:p4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wo(n)}return e}};var Sc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Rh=class extends Sc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Mc=(()=>{class t extends Rh{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Mh._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var Ac=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield bs._fromIdTokenResponse(e,r,i),s=ex(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=ex(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function ex(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var J_=class t extends pt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Rx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?J_._fromErrorAndOperation(t,o,e,r):o})}function m4(t,e,n=!1){return _(this,null,function*(){let r=yield Cc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ac._forOperation(t,"link",r)})}function g4(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(Ln(r.app))return Promise.reject(Ki(r));let i="reauthenticate";try{let o=yield Cc(t,Rx(r,i,e,t),n);ne(o.idToken,r,"internal-error");let s=cw(o.idToken);ne(s,r,"internal-error");let{sub:a}=s;return ne(t.uid===a,r,"user-mismatch"),Ac._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Kn(r,"user-mismatch"),o}})}function y4(t,e,n=!1){return _(this,null,function*(){if(Ln(t.app))return Promise.reject(Ki(t));let r="signIn",i=yield Rx(t,r,e),o=yield Ac._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Nx(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function Px(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function dw(t){return ct(t).signOut()}var Nh="__sak";var Ph=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var v4=1e3,_4=10,w4=(()=>{class t extends Ph{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dx(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);o4()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,_4):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},v4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Ar(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Ar(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Ar(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Ox=w4;var I4=(()=>{class t extends Ph{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),hw=I4;function E4(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var b4=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield E4(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function fw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Z_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=fw("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Wn(){return window}function C4(t){Wn().location.href=t}function kx(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}function D4(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function T4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function S4(){return kx()?self:null}var Fx="firebaseLocalStorageDb",A4=1,Oh="firebaseLocalStorage",Vx="fbase_key",Yi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Lh(t,e){return t.transaction([Oh],e?"readwrite":"readonly").objectStore(Oh)}function x4(){let t=indexedDB.deleteDatabase(Fx);return new Yi(t).toPromise()}function X_(){let t=indexedDB.open(Fx,A4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Oh,{keyPath:Vx})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Oh)?e(r):(r.close(),yield x4(),e(yield X_()))}))})}function tx(t,e,n){return _(this,null,function*(){let r=Lh(t,!0).put({[Vx]:e,value:n});return new Yi(r).toPromise()})}function M4(t,e){return _(this,null,function*(){let n=Lh(t,!1).get(e),r=yield new Yi(n).toPromise();return r===void 0?null:r.value})}function nx(t,e){let n=Lh(t,!0).delete(e);return new Yi(n).toPromise()}var R4=800,N4=3,P4=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield X_(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>N4)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return kx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=b4._getInstance(S4()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield D4(),!this.activeServiceWorker)return;this.sender=new Z_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||T4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield X_();return yield tx(n,Nh,"1"),yield nx(n,Nh),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>tx(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>M4(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>nx(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=Lh(o,!1).getAll();return new Yi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),R4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Lx=P4;var OW=Sx("rcb"),kW=new Qi(3e4,6e4);function jx(t,e){return e?Er(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var xc=class extends Tc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Es(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Es(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Es(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function O4(t){return y4(t.auth,new xc(t),t.bypassAuthState)}function k4(t){let{auth:e,user:n}=t;return ne(n,e,"internal-error"),g4(n,new xc(t),t.bypassAuthState)}function F4(t){return _(this,null,function*(){let{auth:e,user:n}=t;return ne(n,e,"internal-error"),m4(n,new xc(t),t.bypassAuthState)})}var kh=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O4;case"linkViaPopup":case"linkViaRedirect":return F4;case"reauthViaPopup":case"reauthViaRedirect":return k4;default:Kn(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var V4=new Qi(2e3,1e4);function pw(t,e,n){return _(this,null,function*(){if(Ln(t.app))return Promise.reject(bn(t,"operation-not-supported-in-this-environment"));let r=Vh(t);qB(t,e,Sc);let i=jx(r,n);return new L4(r,"signInViaPopup",e,i).executeNotNull()})}var L4=(()=>{class t extends kh{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return _(this,null,function*(){let n=yield this.execute();return ne(n,this.auth,"internal-error"),n})}onExecution(){return _(this,null,function*(){br(this.filter.length===1,"Popup operations only handle one event");let n=fw();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,V4.get())};n()}}t.currentPopupAction=null;return t})(),j4="pendingRedirect",bh=new Map,ew=class t extends kh{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=bh.get(this.auth._key());if(!e){try{let r=(yield U4(this.resolver,this.auth))?yield Ar(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Ar(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ar(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function U4(t,e){return _(this,null,function*(){let n=H4(e),r=$4(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function B4(t,e){bh.set(t._key(),e)}function $4(t){return Er(t._redirectPersistence)}function H4(t){return Eh(j4,t.config.apiKey,t.name)}function z4(t,e,n=!1){return _(this,null,function*(){if(Ln(t.app))return Promise.reject(Ki(t));let r=Vh(t),i=jx(r,e),s=yield new ew(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var q4=10*60*1e3,tw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ux(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q4&&this.cachedEventUids.clear(),this.cachedEventUids.has(rx(e))}saveEventToCache(e){this.cachedEventUids.add(rx(e)),this.lastProcessedEventTime=Date.now()}};function rx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ux({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function G4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ux(t);default:return!1}}function W4(n){return _(this,arguments,function*(t,e={}){return Cs(t,"GET","/v1/projects",e)})}var K4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q4=/^https?/;function Y4(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield W4(t);for(let n of e)try{if(J4(n))return}catch{}Kn(t,"unauthorized-domain")})}function J4(t){let e=z_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Q4.test(n))return!1;if(K4.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Z4=new Qi(3e4,6e4);function ix(){let t=Wn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function X4(t){return new Promise((e,n)=>{var r,i,o;function s(){ix(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ix(),n(bn(t,"network-request-failed"))},timeout:Z4.get()})}if(!((i=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Wn().gapi)===null||o===void 0)&&o.load)s();else{let a=Sx("iframefcb");return Wn()[a]=()=>{gapi.load?s():n(bn(t,"network-request-failed"))},u4(`${l4()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ch=null,e})}var Ch=null;function e$(t){return Ch=Ch||X4(t),Ch}var t$=new Qi(5e3,15e3),n$="__/auth/iframe",r$="emulator/auth/iframe",i$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s$(t){let e=t.config;ne(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?sw(e,r$):`https://${t.config.authDomain}/${n$}`,r={apiKey:e.apiKey,appName:t.name,v:Wr},i=o$.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Wo(r).slice(1)}`}function a$(t){return _(this,null,function*(){let e=yield e$(t),n=Wn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:s$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i$,dontclear:!0},r=>new Promise((i,o)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=bn(t,"network-request-failed"),a=Wn().setTimeout(()=>{o(s)},t$.get());function u(){Wn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var c$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u$=500,l$=600,d$="_blank",h$="http://localhost",Fh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function f$(t,e,n,r=u$,i=l$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},c$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=at().toLowerCase();n&&(a=wx(l)?d$:n),vx(l)&&(e=e||h$,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,S])=>`${g}${y}=${S},`,"");if(i4(l)&&a!=="_self")return p$(e||"",a),new Fh(null);let p=window.open(e||"",a,h);ne(p,t,"popup-blocked");try{p.focus()}catch{}return new Fh(p)}function p$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var m$="__/auth/handler",g$="emulator/auth/handler",y$=encodeURIComponent("fac");function ox(t,e,n,r,i,o){return _(this,null,function*(){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wr,eventId:i};if(e instanceof Sc){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",kD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Rh){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${y$}=${encodeURIComponent(u)}`:"";return`${v$(t)}?${Wo(a).slice(1)}${l}`})}function v$({config:t}){return t.emulator?sw(t,g$):`https://${t.authDomain}/${m$}`}var H_="webStorageSupport",nw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hw,this._completeRedirectFn=z4,this._overrideRedirectResult=B4}_openPopup(e,n,r,i){return _(this,null,function*(){var o;br((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield ox(e,n,r,z_(),i);return f$(e,s,fw())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield ox(e,n,r,z_(),i);return C4(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(br(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield a$(e),r=new tw(e);return n.register("authEvent",i=>(ne(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(H_,{type:H_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[H_];s!==void 0&&n(!!s),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Y4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Dx()||_x()||uw()}},Bx=nw;var sx="@firebase/auth",ax="1.7.7";var rw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w$(t){Pt(new ut("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ne(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tx(t)},l=new Y_(r,i,o,u);return d4(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pt(new ut("auth-internal",e=>{let n=Vh(e.getProvider("auth").getImmediate());return(r=>new rw(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mt(sx,ax,_$(t)),mt(sx,ax,"esm2017")}var I$=5*60,E$=Gg("authIdTokenMaxAge")||I$,cx=null,b$=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>E$)return;let i=n?.token;cx!==i&&(cx=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function mw(t=Mi()){let e=vn(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Ax(t,{popupRedirectResolver:Bx,persistence:[Lx,Ox,hw]}),r=Gg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=b$(o.toString());Px(n,s,()=>s(n.currentUser)),Nx(n,a=>s(a))}}let i=zg("auth");return i&&xx(n,`http://${i}`),n}function C$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}c4({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=bn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",C$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w$("Browser");var en=class t{loading=new tt(!1);count=0;constructor(){q.log("LoaderService: Init",this),q.log("LoaderService: Init Complete",this)}show(){this.count++,this.count>0&&this.loading.next(!0)}hide(){this.count--,this.count==0&&this.loading.next(!1)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var tn=class t{constructor(e,n,r){this.firebase=e;this.loader=n;this.firestore=r;q.log("UserService:  Init",this),this.auth=mw(this.firebase.app),this.intialize(),q.log("UserService:  Init Complete",this)}auth;user;refresh=new Ae;intialize(){this.auth.onAuthStateChanged(e=>{if(e==null)this.user=void 0,this.refresh.emit(void 0);else{q.log("UserService: initialize:: Auth State Changed ",e),this.loader.show();let n=e,r={id:n.uid,email:n.email,name:n.displayName,contact:n.phoneNumber,image:n.photoURL,role:"USER"};this.login(r)}})}login(e){return _(this,null,function*(){let n=qn(this.firestore.firestore,"users",e.id),r=yield US(n);if(r.exists()){let i=r.data();q.log("UserService: login:: Existing User :",i),this.user={id:i.id,name:i.name,email:i.email,contact:i.contact,role:i.role,image:i.image},this.refresh.emit(this.user),sessionStorage.setItem("user",JSON.stringify(this.user)),this.firebase.log("login",this.user),this.loader.hide()}else q.log("UserService: login:: Registering new user: "+e.email),this.user=e,yield Hi(qn(Xt(this.firestore.firestore,"users"),e.id),this.user),q.log("UserService: login:: Registered new user: "+e.email),this.refresh.emit(this.user),sessionStorage.setItem("user",JSON.stringify(this.user)),this.firebase.log("sign_up",this.user),this.loader.hide()})}logout(){return _(this,null,function*(){q.log("UserService: logout:: Logging out user: "+this.user?.email),this.user=void 0,sessionStorage.clear(),this.firebase.log("logout",this.user),this.refresh.emit(this.user)})}static \u0275fac=function(n){return new(n||t)(Z(Is),Z(en),Z(Gn))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var jh=class t{constructor(e,n,r){this.router=e;this.auth=n;this.loader=r;q.log("LoginComponent: Init",this),this.init(),q.log("LoginComponent: Init Complete",this)}provider=new Mc;init(){let e=sessionStorage.getItem("redirect");sessionStorage.removeItem("redirect"),this.auth.refresh.subscribe(n=>{n!=null?e?(q.log("LoginComponent: Login Success, Redirecting to ",e),this.router.navigateByUrl(e)):(q.log("LoginComponent: Login Success, Redirecting to home"),this.router.navigate([""])):q.log("LoginComponent: User Auth State Null")})}login(){this.loader.show(),pw(this.auth.auth,this.provider).then(e=>{let r=Mc.credentialFromResult(e)?.accessToken,i=e.user;q.log("LoginComponent: SignedIn User:",i),this.loader.hide()}).catch(e=>{this.loader.hide();let n=e.code,r=e.message;console.error(e);let i=e.customData.email,o=Mc.credentialFromError(e)})}static \u0275fac=function(n){return new(n||t)(j(st),j(tn),j(en))};static \u0275cmp=xe({type:t,selectors:[["app-login"]],standalone:!0,features:[Re],decls:19,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-12"],[1,"card"],[1,"card-title"],[1,"mb-3"],["type","text","id","username","placeholder","Email ID","required","",1,"form-control"],["type","password","id","password","placeholder","Password","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"divider","my-4"],["type","button",1,"btn","btn-danger","btn-block",3,"click"],[1,"bi","bi-google","me-2"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),G(5,"Sign in"),N(),x(6,"form")(7,"div",5),Le(8,"input",6),N(),x(9,"div",5),Le(10,"input",7),N(),x(11,"button",8),G(12,"Login"),N(),x(13,"div",9)(14,"span"),G(15,"or"),N()(),x(16,"button",10),J("click",function(){return r.login()}),Le(17,"i",11),G(18,"Login with Google "),N()()()()()())},styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f8f9fa;padding:20px}.card[_ngcontent-%COMP%]{padding:40px;border-radius:8px;border:none;box-shadow:0 4px 12px #0000001a;background-color:#fff;width:100%}.card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#202124;margin-bottom:20px;text-align:center}.form-label[_ngcontent-%COMP%]{display:none}.form-control[_ngcontent-%COMP%]{height:40px;padding:10px 20px;font-size:16px;border:1px solid #dadce0;border-radius:4px;background-color:#fff;transition:border-color .3s ease;box-shadow:none}.form-control[_ngcontent-%COMP%]:focus{border-color:#1a73e8;outline:none}[_ngcontent-%COMP%]::placeholder{color:#5f6368;opacity:1}.btn-primary[_ngcontent-%COMP%]{height:44px;border-radius:4px;font-size:16px;font-weight:600;background-color:#1a73e8;border:none;margin-top:20px;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#1558c7}.btn-danger[_ngcontent-%COMP%]{height:44px;border-radius:4px;font-size:16px;font-weight:600;background-color:#db4437;border:none;margin-top:20px;width:100%}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c23321}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #dadce0}.divider[_ngcontent-%COMP%]:not(:empty):before{margin-right:15px}.divider[_ngcontent-%COMP%]:not(:empty):after{margin-left:15px}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#5f6368;font-size:14px}@media (max-width: 576px){.card[_ngcontent-%COMP%]{padding:30px}.card-title[_ngcontent-%COMP%]{font-size:22px}.form-control[_ngcontent-%COMP%]{height:50px;padding:8px 16px;font-size:15px}.btn-primary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{height:42px;font-size:15px}}']})};var Uh=class t{constructor(e,n){this.router=e;this.auth=n;this.auth.refresh.subscribe(r=>{r==null&&this.router.navigate([""])})}logout(){dw(this.auth.auth).then(()=>this.auth.logout())}static \u0275fac=function(n){return new(n||t)(j(st),j(tn))};static \u0275cmp=xe({type:t,selectors:[["app-logout"]],standalone:!0,features:[Re],decls:7,vars:0,consts:[[1,"row","text-center","p-3"],[1,"col-md-4","col-sm-6","col-xs-12","form"],[2,"font-weight","600","font-size","18px"],[3,"click"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"div",1)(2,"p",2),G(3," Are you sure you want to log-off? "),Le(4,"br"),N(),x(5,"button",3),J("click",function(){return r.logout()}),G(6,"Logout"),N()()())},styles:["img[_ngcontent-%COMP%]{display:block;width:80px;margin:30px auto;box-shadow:0 5px 10px -7px #333;border-radius:50%}.form[_ngcontent-%COMP%]{background-color:#fff;margin:50px auto 10px;padding:30px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px -3px #333;text-align:center}button[_ngcontent-%COMP%]{border-radius:100px;border:none;background:#719be6;width:50%;padding:10px;color:#fff;box-shadow:0 2px 10px -3px #719be6;display:block;margin:30px auto 10px}"]})};var nn=class t{constructor(e,n){this.firestore=e;this.loader=n;q.log("DataService: Init",this),q.log("DataService: Init Complete",this)}data={};load(){return _(this,null,function*(){let e=["pages","models","rules","menu"];for(var n of e){this.loader.show();let r=window.localStorage.getItem(n),i=yield this.get("config",n),o=window.localStorage.getItem(n+"_refresh_dtm"),s=!0;if(o!=null&&i!=null&&i.refresh!=null&&new Date(o).getTime()>new Date(i.refresh).getTime()&&(s=!1),r==null||s){this.data[n]=yield this.firestore.read(n),this.loader.hide();try{window.localStorage.setItem(n,JSON.stringify(this.data[n])),window.localStorage.setItem(n+"_refresh_dtm",new Date().toISOString())}catch(a){console.error(a)}}else this.data[n]=JSON.parse(r),this.loader.hide()}})}get(e,n){return _(this,null,function*(){let r=null;return this.data[e]==null&&(this.data[e]=yield this.firestore.read(e)),this.data[e]!=null&&Array.isArray(this.data[e])&&(r=this.data[e].filter(i=>i.id==n)[0]),r})}read(e,n){let r=null;return n==null||n==""?r=this.data[e]:this.data[e]!=null&&Array.isArray(this.data[e])?r=this.data[e].filter(i=>i.id==n)[0]:r=null,r}static \u0275fac=function(n){return new(n||t)(Z(Gn),Z(en))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var ri=class t{constructor(e){this.router=e;q.log("AppService: Init",this),app=this,q.log("AppService: Init Complete",this)}$header=new Ke;$dialog=new Ke;header(e){q.log("AppService: header::",e),e!=null&&this.$header.next(e)}navigate(e){q.log("AppService: navigate:: "+e),this.router.navigateByUrl(e)}dialog(e){q.log("AppService: dialog:: ",e),this.$dialog.next(e)}static \u0275fac=function(n){return new(n||t)(Z(st))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var yw=t=>({a:t});function D$(t,e){if(t&1){let n=Me();x(0,"button",6),J("click",function(){ae(n);let i=V(2);return ce(i.editPageModal=!0)}),x(1,"i",7),G(2,"edit"),N()()}}function T$(t,e){if(t&1&&(x(0,"div",3)(1,"div",4),ue(2,D$,3,0,"button",5),N()()),t&2){let n=V();F(2),B("ngIf",n.page)}}function S$(t,e){if(t&1){let n=Me();x(0,"div",25)(1,"textarea",26),Jt("ngModelChange",function(i){ae(n);let o=V(2);return pn(o.page.html,i)||(o.page.html=i),ce(i)}),N()()}if(t&2){let n=V(2);F(),Yt("ngModel",n.page.html)}}function A$(t,e){if(t&1){let n=Me();x(0,"div",25)(1,"textarea",26),Jt("ngModelChange",function(i){ae(n);let o=V(2);return pn(o.page.script,i)||(o.page.script=i),ce(i)}),N()()}if(t&2){let n=V(2);F(),Yt("ngModel",n.page.script)}}function x$(t,e){if(t&1){let n=Me();x(0,"div",25)(1,"textarea",26),Jt("ngModelChange",function(i){ae(n);let o=V(2);return pn(o.page.style,i)||(o.page.style=i),ce(i)}),N()()}if(t&2){let n=V(2);F(),Yt("ngModel",n.page.style)}}function M$(t,e){if(t&1){let n=Me();x(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"h4",12),G(5,"Edit Page"),N(),x(6,"button",13),J("click",function(){ae(n);let i=V();return ce(i.editPageModal=!1)}),N()(),x(7,"div",14)(8,"div",15)(9,"div",16)(10,"input",17),Jt("ngModelChange",function(i){ae(n);let o=V();return pn(o.page.auth,i)||(o.page.auth=i),ce(i)}),N(),x(11,"label",18),G(12," Authentication "),N()(),x(13,"div",16)(14,"input",19),Jt("ngModelChange",function(i){ae(n);let o=V();return pn(o.page.header,i)||(o.page.header=i),ce(i)}),N(),x(15,"label",18),G(16," Header "),N()()(),x(17,"div",15)(18,"div",20)(19,"span",21),J("click",function(){ae(n);let i=V();return ce(i.editPageView="html")}),G(20,"HTML"),N(),x(21,"span",21),J("click",function(){ae(n);let i=V();return ce(i.editPageView="script")}),G(22,"Script"),N(),x(23,"span",21),J("click",function(){ae(n);let i=V();return ce(i.editPageView="style")}),G(24,"Style"),N()()(),x(25,"div",15),ue(26,S$,2,1,"div",22)(27,A$,2,1,"div",22)(28,x$,2,1,"div",22),N()(),x(29,"div",23)(30,"button",24),J("click",function(){ae(n);let i=V();return ce(i.save())}),G(31,"Update"),N()()()()()}if(t&2){let n=V();F(10),Yt("ngModel",n.page.auth),F(4),Yt("ngModel",n.page.header),F(5),B("ngClass",Vo(8,yw,n.editPageView=="html")),F(2),B("ngClass",Vo(10,yw,n.editPageView=="script")),F(2),B("ngClass",Vo(12,yw,n.editPageView=="style")),F(3),B("ngIf",n.editPageView=="html"),F(),B("ngIf",n.editPageView=="script"),F(),B("ngIf",n.editPageView=="style")}}var Ji=class t{constructor(e,n,r,i,o,s,a){this.router=e;this.route=n;this.data=r;this.user=i;this.loader=o;this.firestore=s;this.app=a;e.events.subscribe(u=>{u instanceof yn&&this.init()})}id;page;editPageModal=!1;editPageView="html";ngOnInit(){this.init()}init(){let e=this.id?this.id:this.route.snapshot.paramMap.get("id");q.log("PageComponent: init:: "+e),e&&this.refresh(e)}refresh(e){return _(this,null,function*(){var n=yield this.data.get("pages",e);if(n&&n.auth&&this.user.user==null){if(q.log("PageComponent: refresh:: Redirect to Login"),this.route.snapshot.url.length>0){let r=[];this.route.snapshot.url.forEach(i=>r.push(i.path)),sessionStorage.setItem("redirect",r.join("/"))}this.router.navigate(["login"])}else n?(this.page=n,n.header&&this.app.header(n.header),n.html&&this.updateView(),n.style&&n.style!=""&&this.updateStyle(n.style),n.script&&n.script!=""&&this.updateScript(n.script)):this.router.navigate([""])})}updateView(){var e=document.getElementById("3593661b72952004");q.log("PageComponent: updateView::",e),e&&this.page&&this.page.html&&(e.innerHTML=this.page.html)}updateStyle(e){var n=document.getElementById("3593661b72952004"),r=document.createElement("style");r.innerText=e,n&&n.appendChild(r)}updateScript(e){var n=document.getElementById("3593661b72952004"),r=document.createElement("script");r.innerText=e,n&&n.appendChild(r)}save(){return _(this,null,function*(){this.page&&(this.editPageModal=!1,this.loader.show(),yield Hi(qn(Xt(this.firestore.firestore,"pages"),this.page.id),this.page),this.loader.hide(),alert("Page Updated"))})}static \u0275fac=function(n){return new(n||t)(j(st),j(kn),j(nn),j(tn),j(en),j(Gn),j(ri))};static \u0275cmp=xe({type:t,selectors:[["app-page"]],inputs:{id:"id"},standalone:!0,features:[Re],decls:3,vars:2,consts:[["id","3593661b72952004"],["class","floating",4,"ngIf"],["class","modal extended",4,"ngIf"],[1,"floating"],[1,"d-flex","flex-column","bd-highlight","mb-3"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-warning",3,"click"],[1,"material-icons","pointer"],[1,"modal","extended"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[1,"form-check"],["type","checkbox","id","flexCheck1",1,"form-check-input",3,"ngModelChange","ngModel"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","id","flexCheckDefault",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"col-12"],[1,"mx-2","pointer",3,"click","ngClass"],["class","col-12 my-2",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-12","my-2"],["rows","15",1,"form-control","x",3,"ngModelChange","ngModel"]],template:function(n,r){n&1&&(Le(0,"div",0),ue(1,T$,3,1,"div",1)(2,M$,32,14,"div",2)),n&2&&(F(),B("ngIf",r.user.user&&r.user.user.role=="ADMIN"),F(),B("ngIf",r.page&&r.editPageModal))},dependencies:[ot,Vl,ti,ei,w_,ws,zi],styles:[".floating[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;bottom:60px;right:30px}.floating[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50px;width:50px;height:50px;box-shadow:0 .25rem .5rem #000;margin:10px;cursor:pointer;padding:0}.floating[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}.modal.extended[_ngcontent-%COMP%]{display:block}.modal.extended[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fffaf0}span.a[_ngcontent-%COMP%]{color:#00f;font-weight:700;text-decoration:underline}"]})};var Pc=class t{page="home";constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-home"]],standalone:!0,features:[Re],decls:1,vars:1,consts:[[3,"id"]],template:function(n,r){n&1&&Le(0,"app-page",0),n&2&&B("id",r.page)},dependencies:[Ji]})};function R$(t,e){if(t&1){let n=Me();x(0,"tr")(1,"td"),G(2),N(),x(3,"td"),G(4),N(),x(5,"td")(6,"button",4),J("click",function(){let i=ae(n).$implicit,o=V();return ce(o.navigate(i))}),x(7,"i",5),G(8,"edit"),N()(),x(9,"button",6)(10,"i",5),G(11,"delete"),N()()()()}if(t&2){let n=e.$implicit;F(2),Ue(n.id),F(2),Ue(n.name)}}var $h=class t{constructor(e,n){this.data=e;this.router=n}pages=[];ngOnInit(){this.refresh()}refresh(){return _(this,null,function*(){this.pages=yield this.data.read("pages")})}navigate(e){this.router.navigateByUrl("p/"+e.id)}static \u0275fac=function(n){return new(n||t)(j(nn),j(st))};static \u0275cmp=xe({type:t,selectors:[["app-pages"]],standalone:!0,features:[Re],decls:14,vars:1,consts:[[1,"container","mt-5"],[1,"mb-4"],["id","example",1,"table","table-striped","table-bordered",2,"width","100%"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-primary","mx-2",3,"click"],[1,"material-icons"],[1,"btn","btn-sm","btn-danger"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"h2",1),G(2,"Pages"),N(),x(3,"table",2)(4,"thead")(5,"tr")(6,"th"),G(7,"ID"),N(),x(8,"th"),G(9,"Name"),N(),x(10,"th"),G(11,"Actions"),N()()(),x(12,"tbody"),ue(13,R$,12,2,"tr",3),N()()()),n&2&&(F(13),B("ngForOf",r.pages))},dependencies:[Pn]})};var $x=[{path:"",component:Pc},{path:"admin",component:_h,canActivate:[B_]},{path:"pages",component:$h,canActivate:[B_]},{path:"login",component:jh},{path:"logout",component:Uh},{path:"home",component:Pc},{path:"p/:id",component:Ji},{path:"page/:id",component:Ji}];function N$(t){return()=>t.load()}var Hx={providers:[mC({eventCoalescing:!0}),CD($x),{provide:Nl,useFactory:N$,multi:!0,deps:[nn]}]};function P$(t,e){t&1&&(x(0,"div",1),Le(1,"div",2),N())}var Hh=class t{constructor(e){this.loader=e;this.loading=this.loader.loading}loading;static \u0275fac=function(n){return new(n||t)(j(en))};static \u0275cmp=xe({type:t,selectors:[["app-loader"]],standalone:!0,features:[Re],decls:2,vars:3,consts:[["class","c d-flex align-items-center justify-content-center",4,"ngIf"],[1,"c","d-flex","align-items-center","justify-content-center"],[1,"loader"]],template:function(n,r){n&1&&(ue(0,P$,2,0,"div",0),xl(1,"async")),n&2&&B("ngIf",Ml(1,1,r.loading))},dependencies:[NC,ot],styles:[".c[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1000;text-align:center;background:#000;opacity:.5}.loader[_ngcontent-%COMP%]{border:15px solid #f3f3f3;border-radius:50%;border-top:15px solid #3498db;width:100px;height:100px;-webkit-animation:_ngcontent-%COMP%_spin 2s linear infinite;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@-webkit-keyframes _ngcontent-%COMP%_spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}"]})};function O$(t,e){if(t&1&&Le(0,"div",2),t&2){let n=V();B("innerHTML",n.logo,Ib)}}function k$(t,e){t&1&&(x(0,"div"),zE(),x(1,"svg",3)(2,"g",4),Le(3,"rect",5)(4,"rect",6),N(),x(5,"g",7),Le(6,"path",8),N(),x(7,"g",9),Le(8,"path",10),N(),x(9,"g",11),Le(10,"path",12),N()()())}var zh=class t{logo;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-logo"]],inputs:{logo:"logo"},standalone:!0,features:[Re],decls:2,vars:2,consts:[[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],["width","200","height","80","viewBox","0 0 400 150"],["id","SvgjsG6266","featurekey","rootContainer","transform","matrix(1,0,0,1,0,0)","fill","#f9e1cf"],["y","0","height","1","width","1","opacity","0"],["y","122","width","370","height","5"],["id","SvgjsG6267","featurekey","symbolFeature-0","transform","matrix(1.028017879379319,0,0,1.028017879379319,-5.140089396896595,12.444349912652363)","fill","#fdfaa4"],["xmlns","http://www.w3.org/2000/svg","fill-rule","evenodd","clip-rule","evenodd","d","M5,78.067c0-7.466,0-49.264,0-56.729C5,10.333,11.833,5.333,20.933,5.405  c7.466,0,50.264,0,57.729,0c10.837,0,15.933,7.095,15.933,14.933c0,7.466,0,52.264,0,59.729C94.595,90.333,88.667,95,78.662,95  c-7.466,0-50.263,0-57.729,0C11,95,5,88.667,5,78.067z M23.399,12.872c-7.419,0-10.933,2.466-10.933,9.932  c0,7.466,0,34.865,0,34.865h7.466l7.466-14.933l17.976,20.389l11.889-42.787L73,61l3.5-3.331h10.629c0,0,0-26.399,0-33.865  c0-7.466-2.467-10.932-9.933-10.932H23.399z M71.5,71.875l-13.125-29.25L48.25,77.25L28.399,54.669l-4,10.466H12.466  c0,0,0,4,0,11.467c0,7.466,3.466,10.933,10.933,10.933c7.466,0,44.598,0,52.428,0c7.835,0,11.302-3.467,11.302-10.933  c0-7.467,0-11.467,0-11.467L78.125,65L71.5,71.875z"],["id","SvgjsG6268","featurekey","nameFeature-0","transform","matrix(1.5633774866697607,0,0,1.5633774866697607,111.18704373675078,9.114959226611326)","fill","#fde300"],["_ngcontent-ibt-c17","","d","M0.52 40 c0 0 1.88 -2.4 1.88 -4.76 l0 -18.48 c0 -2.36 -1.88 -4.76 -1.88 -4.76 l11.76 0 s-1.88 2.4 -1.88 4.76 l0 18.48 c0 2.36 1.88 4.76 1.88 4.76 l-11.76 0 z M13.32 40 c0 0 1.88 -2.36 1.88 -4.76 l0 -18.44 c0 -2.4 -1.88 -4.8 -1.88 -4.8 l12.16 0 s-0.454 1.5708 0.23641 4.2232 l3.6836 11.817 l3.6836 -11.817 c0.69 -2.6524 0.23641 -4.2232 0.23641 -4.2232 l12.16 0 s-1.88 2.4 -1.88 4.8 l0 18.44 c0 2.4 1.88 4.76 1.88 4.76 l-10.96 0 s1.88 -2.36 1.88 -4.76 l0 -10.76 l-5 11.92 l-4 0 l-5 -11.92 l0 10.76 c0 2.4 1.88 4.76 1.88 4.76 l-10.96 0 z M26.240000000000002 36.4 c0 0 0.36 -1.88 -0.84 -4.76 l2 4.76 l-1.16 0 z M31.400000000000002 36.4 l2 -4.76 c-1.2 2.88 -0.84 4.76 -0.84 4.76 l-1.16 0 z M46.52 40 c0 0 1.88 -2.4 1.88 -4.76 l0 -18.48 c0 -2.36 -1.88 -4.76 -1.88 -4.76 l12.4 0 c6.6 0 12.24 2.68 12.24 8.88 c0 4.16 -2.08 6.84 -5.2 8.4 c-1.8 0.88 -3.92 1.36 -6.24 1.56 c-0.72 0.08 -2.6 0.08 -3.32 0.08 l0 4.32 c0 2.36 1.88 4.76 1.88 4.76 l-11.76 0 z M56.4 25.6 l1.44 0 c2.84 0 4.96 -1.36 4.96 -3.92 c0 -3 -2.44 -3.96 -5.28 -3.96 l-1.12 0 l0 7.88 z M85.92 40.56 c-6.56 0 -11.56 -3.72 -11.56 -10.56 l0 -13.08 c0 -2.48 -1.88 -4.92 -1.88 -4.92 l11.76 0 s-1.88 2.4 -1.88 4.8 l0 13.2 c0 3.24 1.16 4.72 3.56 4.72 c2.44 0 3.6 -1.48 3.6 -4.72 l0 -13.08 c0 -2.48 -1.88 -4.92 -1.88 -4.92 l11.76 0 s-1.88 2.4 -1.88 4.8 l0 13.2 c0 6.84 -5 10.56 -11.6 10.56 z M100.03999999999999 40 c0 0 1.88 -2.4 1.88 -4.8 l0 -18.44 c0 -2.4 -1.88 -4.76 -1.88 -4.76 l11.76 0 s-1.88 2.36 -1.88 4.76 l0 16.84 l6.04 0 c2.36 0 4.76 -1.88 4.76 -1.88 l0 8.28 l-20.68 0 z M130.12 40.64 c-3.44 0 -8.2 -1.48 -8.2 -1.48 l2.8 -7.96 s1.88 3.8 5.2 3.8 c2.68 0 4.36 -1.16 4.36 -2.92 c0 -3.2 -11.76 -3.3984 -11.76 -11.52 c0 -5.96 4.92 -9.12 11.64 -9.12 c3.32 0 7.36 1.8 7.36 1.8 l-2.76 7.52 s-2.24 -3.96 -4.8 -3.96 c-2.16 0 -3.36 1.36 -3.36 2.68 c0 3.12 12.08 3.64 12.08 11.6 c0 5.92 -5.52 9.56 -12.56 9.56 z M144.00000000000003 40 c0 0 1.88 -2.36 1.88 -4.76 l0 -18.44 c0 -2.4 -1.88 -4.8 -1.88 -4.8 l21.48 0 l0 8.28 s-2.4 -1.88 -4.8 -1.88 l-6.8 0 l0 5.2 l2.8 0 c2.4 0 4.8 -1.88 4.8 -1.88 l0 9.36 s-2.4 -1.88 -4.8 -1.88 l-2.8 0 l0 4.4 l6.8 0 c2.4 0 4.8 -1.88 4.8 -1.88 l0 8.28 l-21.48 0 z"],["id","SvgjsG6269","featurekey","sloganFeature-0","transform","matrix(1.2395395249917074,0,0,1.2395395249917074,109.73635290905752,75.94291572161438)","fill","#f4ee39"],["_ngcontent-ibt-c17","","d","M1.8262 20 l0 -14.111 l2.9297 0 l0 14.111 l-2.9297 0 z M18.037265625 5.888999999999999 l2.9199 0 l0 14.111 l-3.3887 0 l-6.25 -10.088 l0 10.088 l-2.9199 0 l0 -14.111 l3.3496 0 l6.2891 10.029 l0 -10.029 z M32.929203125 8.467 l-5.3711 0 l0 3.2031 l4.6387 0 l0 2.5488 l-4.6387 0 l0 5.7813 l-2.9492 0 l0 -14.111 l8.3203 0 l0 2.5781 z M35.429715625 20 l0 -14.111 l2.9297 0 l0 14.111 l-2.9297 0 z M51.64078125 5.888999999999999 l2.9199 0 l0 14.111 l-3.3887 0 l-6.25 -10.088 l0 10.088 l-2.9199 0 l0 -14.111 l3.3496 0 l6.2891 10.029 l0 -10.029 z M58.21291875 20 l0 -14.111 l2.9297 0 l0 14.111 l-2.9297 0 z M72.968984375 5.888999999999999 l0 2.5781 l-3.3496 0 l0 11.533 l-2.9004 0 l0 -11.533 l-3.3691 0 l0 -2.5781 l9.6191 0 z M83.369375 8.467 l-5.2344 0 l0 3.2031 l4.6387 0 l0 2.5488 l-4.6387 0 l0 3.1934 l5.2344 0 l0 2.5879 l-8.1836 0 l0 -14.111 l8.1836 0 l0 2.5781 z M91.582059375 20 l0 -14.111 l2.9297 0 l0 14.111 l-2.9297 0 z M114.326125 20 l-2.9199 0 l-0.92773 -10.635 l-3.5742 10.635 l-1.8945 0 l-3.5742 -10.635 l-0.9375 10.635 l-2.9297 0 l1.1816 -14.111 l4.1797 0 l3.0078 8.8574 l3.0469 -8.8574 l4.1797 0 z M123.26170625 5.888999999999999 c2.7637 0 4.4824 2.0508 4.4824 4.5605 c0 2.5684 -1.7188 4.4922 -4.4824 4.4922 l-2.9395 0 l0 5.0586 l-2.9297 0 l0 -14.111 l5.8691 0 z M122.77340625 12.4902 c1.4648 0 2.1484 -0.81055 2.1484 -2.0801 c0 -1.2207 -0.68359 -2.0703 -2.1484 -2.0703 l-2.4512 0 l0 4.1504 l2.4512 0 z M139.64890625 20 l-1.0254 -2.9102 l-5.9277 0 l-1.0254 2.9102 l-2.998 0 l5.1953 -14.111 l3.584 0 l5.1953 14.111 l-2.998 0 z M133.55470625 14.6387 l4.209 0 l-2.0996 -5.9863 z M151.015653125 20.19531 c-4.1504 0 -7.2168 -2.8223 -7.2168 -7.2559 s3.0664 -7.2461 7.2168 -7.2461 c3.1445 0 5.6641 1.6113 6.6699 4.2871 l-2.7344 0.99609 c-0.625 -1.6406 -2.1191 -2.5879 -3.9355 -2.5879 c-2.4316 0 -4.2969 1.6992 -4.2969 4.5508 s1.8652 4.5605 4.2969 4.5605 c1.8164 0 3.3105 -0.95703 3.9355 -2.5977 l2.7344 0.99609 c-1.0059 2.6758 -3.5254 4.2969 -6.6699 4.2969 z M168.27171875 5.888999999999999 l0 2.5781 l-3.3496 0 l0 11.533 l-2.9004 0 l0 -11.533 l-3.3691 0 l0 -2.5781 l9.6191 0 z"]],template:function(n,r){n&1&&ue(0,O$,1,1,"div",0)(1,k$,11,0,"div",1),n&2&&(B("ngIf",r.logo),F(),B("ngIf",!r.logo))},dependencies:[ot]})};var F$=t=>({active:t});function V$(t,e){if(t&1&&(x(0,"div",4)(1,"h4",6),G(2),N()()),t&2){let n=V();F(2),Ue(n.auth.user.name)}}function L$(t,e){if(t&1){let n=Me();x(0,"div",7),J("click",function(){let i=ae(n).$implicit,o=V();return ce(o.focus(i.route))}),x(1,"i",8),G(2),N(),x(3,"span",9),G(4),N()()}if(t&2){let n=e.$implicit,r=V();B("ngClass",Vo(3,F$,r.active=="/"+n.route)),F(2),Ue(n.icon),F(2),Ue(n.name)}}var qh=class t{constructor(e,n,r,i){this.router=e;this.route=n;this.auth=r;this.data=i;q.log("MenuComponent: Init",this),this.active=this.router.url,this.user=this.auth.user,this.load(),this.router.events.subscribe(o=>{o instanceof yn&&(this.active=this.router.url)}),this.smenus=i.read("menu"),this.auth.refresh.subscribe(o=>{this.user=o,this.load()}),q.log("MenuComponent: Init Complete",this)}close=new Ae;active="";user;menus=[];smenus=[];load(){this.menus=[],this.menus.push({name:"Home",icon:"home",route:"home"});for(var e in this.smenus){var n=this.smenus[e];(this.user==null&&n.role==null||this.user!=null&&n.role!=null&&n.role.indexOf(this.user.role)>-1)&&this.menus.push({name:this.smenus[e].name,icon:this.smenus[e].icon,route:this.smenus[e].route})}this.user?this.menus.push({name:"Logout",icon:"logout",route:"logout"}):this.menus.push({name:"Login",icon:"login",route:"login"})}focus(e){console.log(e),this.router.navigate([e]),setTimeout(()=>this.close.emit(),100)}static \u0275fac=function(n){return new(n||t)(j(st),j(kn),j(tn),j(nn))};static \u0275cmp=xe({type:t,selectors:[["app-menu"]],outputs:{close:"close"},standalone:!0,features:[Re],decls:7,vars:2,consts:[[1,"c"],[1,"text-end"],[1,"material-icons","pointer","m-2",3,"click"],["class","m",4,"ngIf"],[1,"m"],["class","pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[2,"margin-left","10px"],[1,"pointer",3,"click","ngClass"],[1,"material-icons","align-middle","mx-2"],[1,"align-middle"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"div",1)(2,"i",2),J("click",function(){return r.close.emit(!0)}),G(3,"close"),N()(),ue(4,V$,3,1,"div",3),x(5,"div",4),ue(6,L$,5,5,"div",5),N()()),n&2&&(F(4),B("ngIf",r.auth.user),F(2),B("ngForOf",r.menus))},dependencies:[Pn,Vl,ot],styles:[".c[_ngcontent-%COMP%]{position:fixed;top:68px;left:0;height:-webkit-fill-available;background-color:#252526;width:200px;z-index:100}.c[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff}.c[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:10px 20px 10px 15px;margin-bottom:10px;font-size:20px;border-left:5px solid transparent}.c[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]   div.pointer[_ngcontent-%COMP%]:hover, .c[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]   div.pointer.active[_ngcontent-%COMP%]{border-left:5px solid white;background:#696969}"]})};var Gh=class t{constructor(e){this.data=e;q.log("ConfigService: Init",this),q.log("ConfigService: Init Complete",this)}get(e){return this.data.read("config",e)}static \u0275fac=function(n){return new(n||t)(Z(nn))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};function U$(t,e){t&1&&(x(0,"i",10),G(1,"menu"),N())}function B$(t,e){if(t&1&&Le(0,"img",11),t&2){let n=V(2);Om("src",n.auth.user.image,Eb)}}function $$(t,e){if(t&1){let n=Me();x(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),J("click",function(){ae(n);let i=V();return ce(i.menu=!i.menu)}),ue(5,U$,2,0,"i",5)(6,B$,1,1,"img",6),N()(),x(7,"div",7)(8,"app-logo",8),J("click",function(){ae(n);let i=V();return ce(i.home())}),N()()()(),x(9,"app-menu",9),J("close",function(){ae(n);let i=V();return ce(i.menu=!1)}),N()()}if(t&2){let n=V();F(5),B("ngIf",!n.auth.user),F(),B("ngIf",n.auth.user&&n.auth.user.image),F(2),B("logo",n.logo),F(),B("hidden",!n.menu)}}var Wh=class t{constructor(e,n,r){this.app=e;this.auth=n;this.config=r;q.log("HeaderComponent: Init",this),this.header=this.config.get("header"),this.header&&(this.enabled=this.header.show?this.header.show:!1,this.menu=this.header.menu?this.header.menu:!1,this.logo=this.header.logo?this.header.logo:void 0),this.app.$header.subscribe(i=>{this.enabled=i,q.log("HeaderComponent: Init Refresh",this)}),q.log("HeaderComponent: Init Complete",this)}enabled=!1;menu=!1;header;logo;home(){window.location.href=window.location.origin}static \u0275fac=function(n){return new(n||t)(j(ri),j(tn),j(Gh))};static \u0275cmp=xe({type:t,selectors:[["app-header"]],standalone:!0,features:[Re],decls:1,vars:1,consts:[[4,"ngIf"],[1,"c"],[1,"row","m-0"],[1,"position-absolute","col-2","p-2","m-1"],[1,"btn","btn-default","b",3,"click"],["class","material-icons text-light",4,"ngIf"],[3,"src",4,"ngIf"],[1,"col-12","p-0","text-center"],[3,"click","logo"],[3,"close","hidden"],[1,"material-icons","text-light"],[3,"src"]],template:function(n,r){n&1&&ue(0,$$,10,4,"div",0),n&2&&B("ngIf",r.enabled)},dependencies:[zh,qh,ot],styles:[".c[_ngcontent-%COMP%]{top:0;position:sticky;height:70px;background:#252526;color:#fff}.c[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:30px}.c[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]{height:45px;margin:10px 0;font-size:30px;border-right:10px solid #252526;white-space:nowrap;overflow:hidden;display:inline-block;font-weight:500}.c[_ngcontent-%COMP%]   .b[_ngcontent-%COMP%]{padding:0}.c[_ngcontent-%COMP%]   .b[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px}.c[_ngcontent-%COMP%]   .b[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:5px}.a[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_typetext,_ngcontent-%COMP%_blinkcursor;animation-duration:2s,.5s;animation-timing-function:steps(15),steps(15);animation-delay:.5s,0s;animation-iteration-count:1,8;animation-direction:normal;animation-fill-mode:both}@keyframes _ngcontent-%COMP%_typetext{0%{width:.5rem}to{width:8.5rem}}@keyframes _ngcontent-%COMP%_blinkcursor{0%{border-right-color:#fff}to{border-right-color:#252526}}"]})};var H$=()=>["text","email","password","number"];function z$(t,e){if(t&1&&(x(0,"label",8),G(1),N()),t&2){let n=V(2).$implicit;B("for",n.id),F(),Ue(n.label)}}function q$(t,e){if(t&1){let n=Me();x(0,"span",9),J("click",function(){ae(n);let i=V(4);return ce(i.expand=!i.expand)}),G(1),N()}if(t&2){let n=V(4);F(),Ue(n.expand?"expand_less":"expand_more")}}function G$(t,e){if(t&1){let n=Me();x(0,"button",12),J("click",function(){let i=ae(n).$implicit,o=V(3).$implicit,s=V(2);return ce(s.update(o,{target:{value:i}}))}),G(1),N()}if(t&2){let n=e.$implicit;F(),Ue(n)}}function W$(t,e){if(t&1&&(x(0,"div",10),ue(1,G$,2,1,"button",11),N()),t&2){let n=V(2).$implicit;F(),B("ngForOf",n.values)}}function K$(t,e){if(t&1){let n=Me();x(0,"div"),ue(1,z$,2,2,"label",4),x(2,"input",5),J("change",function(i){ae(n);let o=V().$implicit,s=V(2);return ce(s.update(o,i))}),N(),ue(3,q$,2,1,"span",6)(4,W$,2,1,"div",7),N()}if(t&2){let n=V().$implicit,r=V(2);F(),B("ngIf",n.label),F(),B("type",n.type)("value",n.value)("id",n.id)("placeholder",n.placeholder)("name",n.name),F(),B("ngIf",n.values),F(),B("ngIf",r.expand&&n.values)}}function Q$(t,e){if(t&1&&(x(0,"label",8),G(1),N()),t&2){let n=V(2).$implicit;B("for",n.id),F(),Ue(n.label)}}function Y$(t,e){if(t&1&&(x(0,"option"),G(1),N()),t&2){let n=e.$implicit;F(),Ue(n)}}function J$(t,e){if(t&1){let n=Me();x(0,"div"),ue(1,Q$,2,2,"label",4),x(2,"select",13),J("change",function(i){ae(n);let o=V().$implicit,s=V(2);return ce(s.update(o,i))}),ue(3,Y$,2,1,"option",14),N()()}if(t&2){let n=V().$implicit;F(),B("ngIf",n.label),F(),B("value",n.value),F(),B("ngForOf",n.values)}}function Z$(t,e){if(t&1&&(x(0,"label",8),G(1),N()),t&2){let n=V(2).$implicit;B("for",n.id),F(),Ue(n.label)}}function X$(t,e){if(t&1){let n=Me();x(0,"div"),ue(1,Z$,2,2,"label",4),x(2,"textarea",15),J("change",function(i){ae(n);let o=V().$implicit,s=V(2);return ce(s.update(o,i))}),G(3,"            "),N()()}if(t&2){let n=V().$implicit;F(),B("ngIf",n.label),F(),B("value",n.value)}}function e3(t,e){if(t&1&&(x(0,"div",3),ue(1,K$,5,8,"div",0)(2,J$,4,3,"div",0)(3,X$,4,2,"div",0),N()),t&2){let n=e.$implicit;F(),B("ngIf",Al(3,H$).indexOf(n.type)>-1),F(),B("ngIf",n.type=="select"),F(),B("ngIf",n.type=="textarea")}}function t3(t,e){if(t&1){let n=Me();x(0,"button",16),J("click",function(){let i=ae(n).$implicit,o=V(2);return ce(o.submit.emit(i.action))}),G(1),N()}if(t&2){let n=e.$implicit;F(),Ue(n.text)}}function n3(t,e){if(t&1&&(x(0,"form"),ue(1,e3,4,4,"div",1),x(2,"div"),ue(3,t3,2,1,"button",2),N()()),t&2){let n=V();F(),B("ngForOf",n.form.controls),F(2),B("ngForOf",n.form.actions)}}var Kh=class t{expand=!1;form;submit=new Ae;update(e,n){e.value=n.target.value,this.expand=!1}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-form"]],inputs:{form:"form"},outputs:{submit:"submit"},standalone:!0,features:[Re],decls:1,vars:1,consts:[[4,"ngIf"],["class","m-3",4,"ngFor","ngForOf"],["class","btn btn-primary m-2",3,"click",4,"ngFor","ngForOf"],[1,"m-3"],["class","form-label",3,"for",4,"ngIf"],[1,"form-control",3,"change","type","value","id","placeholder","name"],["class","mx-2 material-icons pointer expand",3,"click",4,"ngIf"],["class","mt-2 exp-con",4,"ngIf"],[1,"form-label",3,"for"],[1,"mx-2","material-icons","pointer","expand",3,"click"],[1,"mt-2","exp-con"],["class","m-2 btn btn-sm btn-primary",3,"click",4,"ngFor","ngForOf"],[1,"m-2","btn","btn-sm","btn-primary",3,"click"],[1,"form-select",3,"change","value"],[4,"ngFor","ngForOf"],["rows","5",1,"form-select",3,"change","value"],[1,"btn","btn-primary","m-2",3,"click"]],template:function(n,r){n&1&&ue(0,n3,4,2,"form",0),n&2&&B("ngIf",r.form)},dependencies:[ot,Pn,ti,dA,pA,gA,oA,D_],styles:[".expand[_ngcontent-%COMP%]{position:relative;top:-30px;float:right}.exp-con[_ngcontent-%COMP%]{height:150px;overflow-y:scroll}"]})};var r3=()=>[];function i3(t,e){if(t&1&&(x(0,"th"),G(1),xl(2,"uppercase"),N()),t&2){let n=e.$implicit;F(),Sl("",Ml(2,1,n)," ")}}function o3(t,e){t&1&&(x(0,"th"),G(1,"Actions"),N())}function s3(t,e){if(t&1&&(x(0,"td"),G(1),N()),t&2){let n=e.$implicit,r=V().$implicit;F(),Ue(r[n])}}function a3(t,e){if(t&1&&(x(0,"i",11),G(1),N()),t&2){let n=V().$implicit;F(),Ue(n.icon)}}function c3(t,e){if(t&1){let n=Me();x(0,"button",9),J("click",function(){let i=ae(n).$implicit,o=V(4);return ce(o.action.emit(i.action))}),ue(1,a3,2,1,"i",10),N()}if(t&2){let n=e.$implicit;F(),B("ngIf",n.icon)}}function u3(t,e){if(t&1&&(x(0,"td"),ue(1,c3,2,1,"button",8),N()),t&2){let n=V(3);F(),B("ngForOf",n.table.actions)}}function l3(t,e){if(t&1&&(x(0,"tr"),ue(1,s3,2,1,"td",4)(2,u3,2,1,"td",5),N()),t&2){let n=V(2);F(),B("ngForOf",n.table.cols),F(),B("ngIf",n.table.actions&&n.table.actions.length>0)}}function d3(t,e){if(t&1){let n=Me();x(0,"li",12),J("click",function(){let i=ae(n).index,o=V(2);return ce(o.change(i))}),x(1,"a",13),G(2),N()()}if(t&2){let n=e.index,r=V(2);Fo("active",n===r.current),F(2),Ue(n+1)}}function h3(t,e){if(t&1){let n=Me();x(0,"div",1)(1,"input",2),Jt("ngModelChange",function(i){ae(n);let o=V();return pn(o.key,i)||(o.key=i),ce(i)}),J("ngModelChange",function(){ae(n);let i=V();return ce(i.search())}),N(),x(2,"table",3)(3,"thead")(4,"tr"),ue(5,i3,3,3,"th",4)(6,o3,2,0,"th",5),N()(),x(7,"tbody"),ue(8,l3,3,2,"tr",4),N()(),x(9,"nav")(10,"ul",6),ue(11,d3,3,3,"li",7),N()()()}if(t&2){let n=V();F(),Yt("ngModel",n.key),F(4),B("ngForOf",n.table.cols),F(),B("ngIf",n.table.actions&&n.table.actions.length>0),F(2),B("ngForOf",n.output),F(3),B("ngForOf",Al(5,r3).constructor(n.pages))}}var Qh=class t{table;action=new Ae;data=[];current=0;rows=10;pages;filtered=[];output=[];key;constructor(){}ngOnChanges(e){q.log("TableComponent: OnChanges",this),this.data=this.table?this.table.data:[],this.search(),q.log("TableComponent: OnChanges Complete",this)}ngOnInit(){q.log("TableComponent: OnInit",this),q.log("TableComponent: OnInit Complete",this)}change(e){if(e==this.current)return;this.current=e;let n=e*this.rows;this.output=this.filtered.slice(n,n+this.rows)}search(){this.key!=null&&this.key!=""?this.filtered=this.data.filter(e=>e.id!=null&&e.id.indexOf(this.key)>-1||e.name!=null&&e.name.indexOf(this.key)>-1):this.filtered=this.data,this.pages=Math.ceil(this.filtered.length/this.rows),this.current=0,this.output=this.filtered.slice(0,this.rows)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-table"]],inputs:{table:"table"},outputs:{action:"action"},standalone:!0,features:[Ur,Re],decls:1,vars:1,consts:[["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],["placeholder","Search..",1,"form-control","mb-3",3,"ngModelChange","ngModel"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pagination","justify-content-center"],["class","page-item pointer",3,"active","click",4,"ngFor","ngForOf"],["class","btn btn-sm btn-primary mx-2",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-primary","mx-2",3,"click"],["class","material-icons",4,"ngIf"],[1,"material-icons"],[1,"page-item","pointer",3,"click"],[1,"page-link"]],template:function(n,r){n&1&&ue(0,h3,12,6,"div",0),n&2&&B("ngIf",r.table)},dependencies:[ot,Pn,PC,ti,ei,ws,zi]})};function f3(t,e){if(t&1){let n=Me();x(0,"div",8)(1,"app-form",9),J("submit",function(i){ae(n);let o=V(2);return ce(o.action.emit(i))}),N()()}if(t&2){let n=V(2);F(),B("form",n.dialog.form)}}function p3(t,e){if(t&1){let n=Me();x(0,"div",8)(1,"app-table",10),J("action",function(i){ae(n);let o=V(2);return ce(o.action.emit(i))}),N()()}if(t&2){let n=V(2);F(),B("table",n.dialog.table)}}function m3(t,e){if(t&1){let n=Me();x(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h5",5),G(5),N(),x(6,"button",6),J("click",function(){ae(n);let i=V();return ce(i.dialog=void 0)}),N()(),ue(7,f3,2,1,"div",7)(8,p3,2,1,"div",7),N()()()}if(t&2){let n=V();F(5),Ue(n.dialog.title),F(2),B("ngIf",n.dialog.form),F(),B("ngIf",n.dialog.table)}}var Yh=class t{constructor(e){this.app=e;this.app.$dialog.subscribe(n=>{this.dialog=n,q.log("DialogComponent: Dialog Changed",this)})}dialog;action=new Ae;static \u0275fac=function(n){return new(n||t)(j(ri))};static \u0275cmp=xe({type:t,selectors:[["app-dialog"]],inputs:{dialog:"dialog"},outputs:{action:"action"},standalone:!0,features:[Re],decls:1,vars:1,consts:[["class","modal d-block","tabindex","-1",4,"ngIf"],["tabindex","-1",1,"modal","d-block"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-body"],[3,"submit","form"],[3,"action","table"]],template:function(n,r){n&1&&ue(0,m3,9,3,"div",0),n&2&&B("ngIf",r.dialog)},dependencies:[ot,Kh,Qh]})};var Jh=class t{constructor(e){this.router=e;q.log("AppComponent: Init",this);let n=sessionStorage.getItem("redirect");q.log("AppComponent: redirect:: "+n),n&&(sessionStorage.removeItem("redirect"),this.router.navigateByUrl(n)),q.log("AppComponent: Init Complete",this)}static \u0275fac=function(n){return new(n||t)(j(st))};static \u0275cmp=xe({type:t,selectors:[["app-root"]],standalone:!0,features:[Re],decls:4,vars:0,template:function(n,r){n&1&&Le(0,"app-header")(1,"app-loader")(2,"router-outlet")(3,"app-dialog")},dependencies:[Wh,Hh,Pg,Yh]})};$C(Jh,Hx).catch(t=>console.error(t));
