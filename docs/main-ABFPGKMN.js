var SM=Object.defineProperty,AM=Object.defineProperties;var MM=Object.getOwnPropertyDescriptors;var Uw=Object.getOwnPropertySymbols,RM=Object.getPrototypeOf,xM=Object.prototype.hasOwnProperty,NM=Object.prototype.propertyIsEnumerable,PM=Reflect.get;var Bw=(t,e,n)=>e in t?SM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||={})xM.call(e,n)&&Bw(t,n,e[n]);if(Uw)for(var n of Uw(e))NM.call(e,n)&&Bw(t,n,e[n]);return t},ce=(t,e)=>AM(t,MM(e));var _r=(t,e,n)=>PM(RM(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function $w(t,e){return Object.is(t,e)}var Ye=null,Fc=!1,Lc=1,qn=Symbol("SIGNAL");function me(t){let e=Ye;return Ye=t,e}function Hw(){return Ye}var Fs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Jh(t){if(Fc)throw new Error("");if(Ye===null)return;Ye.consumerOnSignalRead(t);let e=Ye.nextProducerIndex++;if(Bc(Ye),e<Ye.producerNode.length&&Ye.producerNode[e]!==t&&ks(Ye)){let n=Ye.producerNode[e];Uc(n,Ye.producerIndexOfThis[e])}Ye.producerNode[e]!==t&&(Ye.producerNode[e]=t,Ye.producerIndexOfThis[e]=ks(Ye)?Ww(t,Ye,e):0),Ye.producerLastReadVersion[e]=t.version}function OM(){Lc++}function zw(t){if(!(ks(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Lc)){if(!t.producerMustRecompute(t)&&!Xh(t)){t.dirty=!1,t.lastCleanEpoch=Lc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Lc}}function qw(t){if(t.liveConsumerNode===void 0)return;let e=Fc;Fc=!0;try{for(let n of t.liveConsumerNode)n.dirty||kM(n)}finally{Fc=e}}function Gw(){return Ye?.consumerAllowSignalWrites!==!1}function kM(t){t.dirty=!0,qw(t),t.consumerMarkedDirty?.(t)}function jc(t){return t&&(t.nextProducerIndex=0),me(t)}function Zh(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ks(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Uc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Xh(t){Bc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(zw(n),r!==n.version))return!0}return!1}function ef(t){if(Bc(t),ks(t))for(let e=0;e<t.producerNode.length;e++)Uc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ww(t,e,n){if(Kw(t),t.liveConsumerNode.length===0&&Qw(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Ww(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Uc(t,e){if(Kw(t),t.liveConsumerNode.length===1&&Qw(t))for(let r=0;r<t.producerNode.length;r++)Uc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Bc(i),i.producerIndexOfThis[r]=e}}function ks(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Bc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Kw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Qw(t){return t.producerNode!==void 0}function Yw(t){let e=Object.create(FM);e.computation=t;let n=()=>{if(zw(e),Jh(e),e.value===Vc)throw e.error;return e.value};return n[qn]=e,n}var Qh=Symbol("UNSET"),Yh=Symbol("COMPUTING"),Vc=Symbol("ERRORED"),FM=ce(O({},Fs),{value:Qh,dirty:!0,error:null,equal:$w,producerMustRecompute(t){return t.value===Qh||t.value===Yh},producerRecomputeValue(t){if(t.value===Yh)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Yh;let n=jc(t),r;try{r=t.computation()}catch(i){r=Vc,t.error=i}finally{Zh(t,n)}if(e!==Qh&&e!==Vc&&r!==Vc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function LM(){throw new Error}var Jw=LM;function Zw(){Jw()}function Xw(t){Jw=t}var VM=null;function eI(t){let e=Object.create(nI);e.value=t;let n=()=>(Jh(e),e.value);return n[qn]=e,n}function tf(t,e){Gw()||Zw(),t.equal(t.value,e)||(t.value=e,jM(t))}function tI(t,e){Gw()||Zw(),tf(t,e(t.value))}var nI=ce(O({},Fs),{equal:$w,value:void 0});function jM(t){t.version++,OM(),qw(t),VM?.()}function X(t){return typeof t=="function"}function zi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $c=zi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ls(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var $e=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof $c?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{rI(o)}catch(s){e=e??[],s instanceof $c?e=[...e,...s.errors]:e.push(s)}}if(e)throw new $c(e)}}add(e){var n;if(e&&e!==this)if(this.closed)rI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ls(n,e)}remove(e){let{_finalizers:n}=this;n&&Ls(n,e),e instanceof t&&e._removeParent(this)}};$e.EMPTY=(()=>{let t=new $e;return t.closed=!0,t})();var nf=$e.EMPTY;function Hc(t){return t instanceof $e||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function rI(t){X(t)?t():t.unsubscribe()}var Jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qi={setTimeout(t,e,...n){let{delegate:r}=qi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=qi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function zc(t){qi.setTimeout(()=>{let{onUnhandledError:e}=Jt;if(e)e(t);else throw t})}function Vs(){}var iI=rf("C",void 0,void 0);function oI(t){return rf("E",void 0,t)}function sI(t){return rf("N",t,void 0)}function rf(t,e,n){return{kind:t,value:e,error:n}}var Jr=null;function Gi(t){if(Jt.useDeprecatedSynchronousErrorHandling){let e=!Jr;if(e&&(Jr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Jr;if(Jr=null,n)throw r}}else t()}function aI(t){Jt.useDeprecatedSynchronousErrorHandling&&Jr&&(Jr.errorThrown=!0,Jr.error=t)}var Zr=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hc(e)&&e.add(this)):this.destination=$M}static create(e,n,r){return new Wi(e,n,r)}next(e){this.isStopped?sf(sI(e),this):this._next(e)}error(e){this.isStopped?sf(oI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sf(iI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},UM=Function.prototype.bind;function of(t,e){return UM.call(t,e)}var af=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qc(r)}else qc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qc(n)}}},Wi=class extends Zr{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Jt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&of(e.next,o),error:e.error&&of(e.error,o),complete:e.complete&&of(e.complete,o)}):i=e}this.destination=new af(i)}};function qc(t){Jt.useDeprecatedSynchronousErrorHandling?aI(t):zc(t)}function BM(t){throw t}function sf(t,e){let{onStoppedNotification:n}=Jt;n&&qi.setTimeout(()=>n(t,e))}var $M={closed:!0,next:Vs,error:BM,complete:Vs};var Ki=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(t){return t}function cf(...t){return uf(t)}function uf(t){return t.length===0?Pt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=zM(n)?n:new Wi(n,r,i);return Gi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=cI(r),new r((i,o)=>{let s=new Wi({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ki](){return this}pipe(...n){return uf(n)(this)}toPromise(n){return n=cI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function cI(t){var e;return(e=t??Jt.Promise)!==null&&e!==void 0?e:Promise}function HM(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function zM(t){return t&&t instanceof Zr||HM(t)&&Hc(t)}function lf(t){return X(t?.lift)}function pe(t){return e=>{if(lf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new df(t,e,n,r,i)}var df=class extends Zr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Qi(){return pe((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Yi=class extends Ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,lf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return Qi()(this)}};var uI=zi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class t extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new uI}next(n){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?nf:(this.currentObservers=null,o.push(n),new $e(()=>{this.currentObservers=null,Ls(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Ie;return n.source=this,n}}return t.create=(e,n)=>new Gc(e,n),t})(),Gc=class extends ot{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:nf}};var Ue=class extends ot{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ot=new Ie(t=>t.complete());function lI(t){return t&&X(t.schedule)}function dI(t){return t[t.length-1]}function Wc(t){return X(dI(t))?t.pop():void 0}function wr(t){return lI(dI(t))?t.pop():void 0}function Kc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function hI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xr(t){return this instanceof Xr?(this.v=t,this):new Xr(t)}function pI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(x){return new Promise(function(R,L){o.push([y,x,R,L])>1||u(y,x)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(x){m(o[0][3],x)}}function l(y){y.value instanceof Xr?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function gI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hI=="function"?hI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Qc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Yc(t){return X(t?.then)}function Jc(t){return X(t[Ki])}function Zc(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function Xc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var eu=qM();function tu(t){return X(t?.[eu])}function nu(t){return pI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Xr(n.read());if(i)return yield Xr(void 0);yield yield Xr(r)}}finally{n.releaseLock()}})}function ru(t){return X(t?.getReader)}function He(t){if(t instanceof Ie)return t;if(t!=null){if(Jc(t))return GM(t);if(Qc(t))return WM(t);if(Yc(t))return KM(t);if(Zc(t))return mI(t);if(tu(t))return QM(t);if(ru(t))return YM(t)}throw Xc(t)}function GM(t){return new Ie(e=>{let n=t[Ki]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function WM(t){return new Ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function KM(t){return new Ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,zc)})}function QM(t){return new Ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function mI(t){return new Ie(e=>{JM(t,e).catch(n=>e.error(n))})}function YM(t){return mI(nu(t))}function JM(t,e){var n,r,i,o;return fI(this,void 0,void 0,function*(){try{for(n=gI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ct(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function iu(t,e=0){return pe((n,r)=>{n.subscribe(ue(r,i=>Ct(r,t,()=>r.next(i),e),()=>Ct(r,t,()=>r.complete(),e),i=>Ct(r,t,()=>r.error(i),e)))})}function ou(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function yI(t,e){return He(t).pipe(ou(e),iu(e))}function vI(t,e){return He(t).pipe(ou(e),iu(e))}function _I(t,e){return new Ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function wI(t,e){return new Ie(n=>{let r;return Ct(n,e,()=>{r=t[eu](),Ct(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function su(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ie(n=>{Ct(n,e,()=>{let r=t[Symbol.asyncIterator]();Ct(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function II(t,e){return su(nu(t),e)}function EI(t,e){if(t!=null){if(Jc(t))return yI(t,e);if(Qc(t))return _I(t,e);if(Yc(t))return vI(t,e);if(Zc(t))return su(t,e);if(tu(t))return wI(t,e);if(ru(t))return II(t,e)}throw Xc(t)}function Be(t,e){return e?EI(t,e):He(t)}function ee(...t){let e=wr(t);return Be(t,e)}function Ji(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new Ie(e?i=>e.schedule(r,0,i):r)}function hf(t){return!!t&&(t instanceof Ie||X(t.lift)&&X(t.subscribe))}var Gn=zi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function se(t,e){return pe((n,r)=>{let i=0;n.subscribe(ue(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:ZM}=Array;function XM(t,e){return ZM(e)?t(...e):t(e)}function au(t){return se(e=>XM(t,e))}var{isArray:eR}=Array,{getPrototypeOf:tR,prototype:nR,keys:rR}=Object;function cu(t){if(t.length===1){let e=t[0];if(eR(e))return{args:e,keys:null};if(iR(e)){let n=rR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function iR(t){return t&&typeof t=="object"&&tR(t)===nR}function uu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function lu(...t){let e=wr(t),n=Wc(t),{args:r,keys:i}=cu(t);if(r.length===0)return Be([],e);let o=new Ie(oR(r,e,i?s=>uu(i,s):Pt));return n?o.pipe(au(n)):o}function oR(t,e,n=Pt){return r=>{DI(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)DI(e,()=>{let l=Be(t[u],e),h=!1;l.subscribe(ue(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function DI(t,e,n){t?Ct(n,t,e):e()}function bI(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=x=>l<r?S(x):u.push(x),S=x=>{o&&e.next(x),l++;let R=!1;He(n(x,h++)).subscribe(ue(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let L=u.shift();s?Ct(e,s,()=>S(L)):S(L)}m()}catch(L){e.error(L)}}))};return t.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Je(t,e,n=1/0){return X(e)?Je((r,i)=>se((o,s)=>e(r,o,i,s))(He(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>bI(r,i,t,n)))}function ff(t=1/0){return Je(Pt,t)}function CI(){return ff(1)}function Zi(...t){return CI()(Be(t,wr(t)))}function du(t){return new Ie(e=>{He(t()).subscribe(e)})}function pf(...t){let e=Wc(t),{args:n,keys:r}=cu(t),i=new Ie(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;He(n[h]).subscribe(ue(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?uu(r,a):a),o.complete())}))}});return e?i.pipe(au(e)):i}function Zt(t,e){return pe((n,r)=>{let i=0;n.subscribe(ue(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ir(t){return pe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ue(n,void 0,void 0,s=>{o=He(t(s,Ir(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function TI(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ue(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Xi(t,e){return X(e)?Je(t,e,1):Je(t,1)}function Er(t){return pe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Wn(t){return t<=0?()=>Ot:pe((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function gf(t){return se(()=>t)}function hu(t=sR){return pe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function sR(){return new Gn}function js(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function gn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Zt((i,o)=>t(i,o,r)):Pt,Wn(1),n?Er(e):hu(()=>new Gn))}function eo(t){return t<=0?()=>Ot:pe((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function mf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Zt((i,o)=>t(i,o,r)):Pt,eo(1),n?Er(e):hu(()=>new Gn))}function yf(t,e){return pe(TI(t,e,arguments.length>=2,!0))}function vf(...t){let e=wr(t);return pe((n,r)=>{(e?Zi(t,n,e):Zi(t,n)).subscribe(r)})}function Xt(t,e){return pe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;He(t(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function _f(t){return pe((e,n)=>{He(t).subscribe(ue(n,()=>n.complete(),Vs)),!n.closed&&e.subscribe(n)})}function st(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}var lE="https://g.co/ng/security#xss",q=class extends Error{constructor(e,n){super(_p(e,n)),this.code=e}};function _p(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Js(t){return{toString:t}.toString()}var fu="__parameters__";function aR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function dE(t,e,n){return Js(()=>{let r=aR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(fu)?u[fu]:Object.defineProperty(u,fu,{value:[]})[fu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Se(t){for(let e in t)if(t[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function cR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Et(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Et).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function SI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var uR=Se({__forward_ref__:Se});function yo(t){return t.__forward_ref__=yo,t.toString=function(){return Et(this())},t}function It(t){return hE(t)?t():t}function hE(t){return typeof t=="function"&&t.hasOwnProperty(uR)&&t.__forward_ref__===yo}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vo(t){return{providers:t.providers||[],imports:t.imports||[]}}function Wu(t){return AI(t,pE)||AI(t,gE)}function fE(t){return Wu(t)!==null}function AI(t,e){return t.hasOwnProperty(e)?t[e]:null}function lR(t){let e=t&&(t[pE]||t[gE]);return e||null}function MI(t){return t&&(t.hasOwnProperty(RI)||t.hasOwnProperty(dR))?t[RI]:null}var pE=Se({\u0275prov:Se}),RI=Se({\u0275inj:Se}),gE=Se({ngInjectableDef:Se}),dR=Se({ngInjectorDef:Se}),W=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mE(t){return t&&!!t.\u0275providers}var hR=Se({\u0275cmp:Se}),fR=Se({\u0275dir:Se}),pR=Se({\u0275pipe:Se}),gR=Se({\u0275mod:Se}),Eu=Se({\u0275fac:Se}),Bs=Se({__NG_ELEMENT_ID__:Se}),xI=Se({__NG_ENV_ID__:Se});function wp(t){return typeof t=="string"?t:t==null?"":String(t)}function mR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():wp(t)}function yR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new q(-200,t)}function Ip(t,e){throw new q(-201,!1)}var ie=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ie||{}),Pf;function yE(){return Pf}function Tt(t){let e=Pf;return Pf=t,e}function vE(t,e,n){let r=Wu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ie.Optional)return null;if(e!==void 0)return e;Ip(t,"Injector")}var vR={},$s=vR,Of="__NG_DI_FLAG__",Du="ngTempTokenPath",_R="ngTokenPath",wR=/\n/gm,IR="\u0275",NI="__source",io;function ER(){return io}function Dr(t){let e=io;return io=t,e}function DR(t,e=ie.Default){if(io===void 0)throw new q(-203,!1);return io===null?vE(t,void 0,e):io.get(t,e&ie.Optional?null:void 0,e)}function J(t,e=ie.Default){return(yE()||DR)(It(t),e)}function k(t,e=ie.Default){return J(t,Ku(e))}function Ku(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kf(t){let e=[];for(let n=0;n<t.length;n++){let r=It(t[n]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,o=ie.Default;for(let s=0;s<r.length;s++){let a=r[s],u=bR(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(J(i,o))}else e.push(J(r))}return e}function _E(t,e){return t[Of]=e,t.prototype[Of]=e,t}function bR(t){return t[Of]}function CR(t,e,n,r){let i=t[Du];throw e[NI]&&i.unshift(e[NI]),t.message=TR(`
`+t.message,i,n,r),t[_R]=i,t[Du]=null,t}function TR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==IR?t.slice(2):t;let i=Et(e);if(Array.isArray(e))i=e.map(Et).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Et(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wR,`
  `)}`}var Ep=_E(dE("Optional"),8);var wE=_E(dE("SkipSelf"),4);function ni(t,e){let n=t.hasOwnProperty(Eu);return n?t[Eu]:null}function Dp(t,e){t.forEach(n=>Array.isArray(n)?Dp(n,e):e(n))}function IE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function SR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function AR(t,e,n){let r=Zs(t,e);return r>=0?t[r|1]=n:(r=~r,SR(t,r,e,n)),r}function wf(t,e){let n=Zs(t,e);if(n>=0)return t[n|1]}function Zs(t,e){return MR(t,e,1)}function MR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var so={},$t=[],ao=new W(""),EE=new W("",-1),DE=new W(""),Cu=class{get(e,n=$s){if(n===$s){let r=new Error(`NullInjectorError: No provider for ${Et(e)}!`);throw r.name="NullInjectorError",r}return n}},bE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(bE||{}),vn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vn||{}),Tr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Tr||{});function RR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Ff(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];NR(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function xR(t){return t===3||t===4||t===6}function NR(t){return t.charCodeAt(0)===64}function Hs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?PI(t,n,i,null,e[++r]):PI(t,n,i,null,null))}}return t}function PI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var CE="ng-template";function PR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(bp(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function bp(t){return t.type===4&&t.value!==CE}function OR(t,e,n){let r=t.type===4&&!n?CE:t.value;return e===r}function kR(t,e,n){let r=4,i=t.attrs,o=i!==null?VR(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!en(r)&&!en(u))return!1;if(s&&en(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!OR(t,u,n)||u===""&&e.length===1){if(en(r))return!1;s=!0}}else if(r&8){if(i===null||!PR(t,i,u,n)){if(en(r))return!1;s=!0}}else{let l=e[++a],h=FR(u,i,bp(t),n);if(h===-1){if(en(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(en(r))return!1;s=!0}}}}return en(r)||s}function en(t){return(t&1)===0}function FR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return jR(e,t)}function LR(t,e,n=!1){for(let r=0;r<e.length;r++)if(kR(t,e[r],n))return!0;return!1}function VR(t){for(let e=0;e<t.length;e++){let n=t[e];if(xR(n))return e}return t.length}function jR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function OI(t,e){return t?":not("+e.trim()+")":e}function UR(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!en(s)&&(e+=OI(o,i),i=""),r=s,o=o||!en(r);n++}return i!==""&&(e+=OI(o,i)),e}function BR(t){return t.map(UR).join(",")}function $R(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!en(i))break;i=o}r++}return{attrs:e,classes:n}}function Le(t){return Js(()=>{let e=xE(t),n=ce(O({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vn.Emulated,styles:t.styles||$t,_:null,schemas:t.schemas||null,tView:null,id:""});NE(n);let r=t.dependencies;return n.directiveDefs=FI(r,!1),n.pipeDefs=FI(r,!0),n.id=qR(n),n})}function HR(t){return ri(t)||SE(t)}function zR(t){return t!==null}function _o(t){return Js(()=>({type:t.type,bootstrap:t.bootstrap||$t,declarations:t.declarations||$t,imports:t.imports||$t,exports:t.exports||$t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function kI(t,e){if(t==null)return so;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Tr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Tr.None?[r,a]:r,e[o]=s):n[o]=r}return n}function kt(t){return Js(()=>{let e=xE(t);return NE(e),e})}function TE(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ri(t){return t[hR]||null}function SE(t){return t[fR]||null}function AE(t){return t[pR]||null}function ME(t){let e=ri(t)||SE(t)||AE(t);return e!==null?e.standalone:!1}function RE(t,e){let n=t[gR]||null;if(!n&&e===!0)throw new Error(`Type ${Et(t)} does not have '\u0275mod' property.`);return n}function xE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||so,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||$t,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kI(t.inputs,e),outputs:kI(t.outputs),debugInfo:null}}function NE(t){t.features?.forEach(e=>e(t))}function FI(t,e){if(!t)return null;let n=e?AE:HR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(zR)}function qR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Qu(t){return{\u0275providers:t}}function GR(...t){return{\u0275providers:PE(!0,t),\u0275fromNgModule:!0}}function PE(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Dp(e,s=>{let a=s;Lf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&OE(i,o),n}function OE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Cp(i,o=>{e(o,r)})}}function Lf(t,e,n,r){if(t=It(t),!t)return!1;let i=null,o=MI(t),s=!o&&ri(t);if(!o&&!s){let u=t.ngModule;if(o=MI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Lf(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Dp(o.imports,h=>{Lf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&OE(l,e)}if(!a){let l=ni(i)||(()=>new i);e({provide:i,useFactory:l,deps:$t},i),e({provide:DE,useValue:i,multi:!0},i),e({provide:ao,useValue:()=>J(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Cp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Cp(t,e){for(let n of t)mE(n)&&(n=n.\u0275providers),Array.isArray(n)?Cp(n,e):e(n)}var WR=Se({provide:String,useValue:Se});function kE(t){return t!==null&&typeof t=="object"&&WR in t}function KR(t){return!!(t&&t.useExisting)}function QR(t){return!!(t&&t.useFactory)}function co(t){return typeof t=="function"}function YR(t){return!!t.useClass}var Yu=new W(""),yu={},JR={},If;function Tp(){return If===void 0&&(If=new Cu),If}var qt=class{},zs=class extends qt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jf(e,s=>this.processProvider(s)),this.records.set(EE,to(void 0,this)),i.has("environment")&&this.records.set(qt,to(void 0,this));let o=this.records.get(Yu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(DE,$t,ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Dr(this),r=Tt(void 0),i;try{return e()}finally{Dr(n),Tt(r)}}get(e,n=$s,r=ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xI))return e[xI](this);r=Ku(r);let i,o=Dr(this),s=Tt(void 0);try{if(!(r&ie.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=nx(e)&&Wu(e);l&&this.injectableDefInScope(l)?u=to(Vf(e),yu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ie.Self?Tp():this.parent;return n=r&ie.Optional&&n===$s?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Du]=a[Du]||[]).unshift(Et(e)),o)throw a;return CR(a,e,"R3InjectorError",this.source)}else throw a}finally{Tt(s),Dr(o)}}resolveInjectorInitializers(){let e=me(null),n=Dr(this),r=Tt(void 0),i;try{let o=this.get(ao,$t,ie.Self);for(let s of o)s()}finally{Dr(n),Tt(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Et(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processProvider(e){e=It(e);let n=co(e)?e:It(e&&e.provide),r=XR(e);if(!co(e)&&e.multi===!0){let i=this.records.get(n);i||(i=to(void 0,yu,!0),i.factory=()=>kf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===yu&&(n.value=JR,n.value=n.factory()),typeof n.value=="object"&&n.value&&tx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=It(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Vf(t){let e=Wu(t),n=e!==null?e.factory:ni(t);if(n!==null)return n;if(t instanceof W)throw new q(204,!1);if(t instanceof Function)return ZR(t);throw new q(204,!1)}function ZR(t){if(t.length>0)throw new q(204,!1);let n=lR(t);return n!==null?()=>n.factory(t):()=>new t}function XR(t){if(kE(t))return to(void 0,t.useValue);{let e=FE(t);return to(e,yu)}}function FE(t,e,n){let r;if(co(t)){let i=It(t);return ni(i)||Vf(i)}else if(kE(t))r=()=>It(t.useValue);else if(QR(t))r=()=>t.useFactory(...kf(t.deps||[]));else if(KR(t))r=()=>J(It(t.useExisting));else{let i=It(t&&(t.useClass||t.provide));if(ex(t))r=()=>new i(...kf(t.deps));else return ni(i)||Vf(i)}return r}function to(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ex(t){return!!t.deps}function tx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function nx(t){return typeof t=="function"||typeof t=="object"&&t instanceof W}function jf(t,e){for(let n of t)Array.isArray(n)?jf(n,e):n&&mE(n)?jf(n.\u0275providers,e):e(n)}function Qn(t,e){t instanceof zs&&t.assertNotDestroyed();let n,r=Dr(t),i=Tt(void 0);try{return e()}finally{Dr(r),Tt(i)}}function rx(){return yE()!==void 0||ER()!=null}function ix(t){return typeof t=="function"}var Yn=0,ae=1,Y=2,Dt=3,tn=4,rn=5,Tu=6,Su=7,nn=8,uo=9,_n=10,Xe=11,qs=12,LI=13,wo=14,wn=15,lo=16,no=17,ho=18,Ju=19,LE=20,br=21,Ef=22,Ht=23,In=25,VE=1;var ii=7,Au=8,Mu=9,zt=10,Ru=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ru||{});function Cr(t){return Array.isArray(t)&&typeof t[VE]=="object"}function Jn(t){return Array.isArray(t)&&t[VE]===!0}function jE(t){return(t.flags&4)!==0}function Zu(t){return t.componentOffset>-1}function Sp(t){return(t.flags&1)===1}function Sr(t){return!!t.template}function Uf(t){return(t[Y]&512)!==0}var Bf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function UE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Io(){return BE}function BE(t){return t.type.prototype.ngOnChanges&&(t.setInput=sx),ox}Io.ngInherit=!0;function ox(){let t=HE(this),e=t?.current;if(e){let n=t.previous;if(n===so)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sx(t,e,n,r,i){let o=this.declaredInputs[r],s=HE(t)||ax(t,{previous:so,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Bf(l&&l.currentValue,n,u===so),UE(t,e,i,n)}var $E="__ngSimpleChanges__";function HE(t){return t[$E]||null}function ax(t,e){return t[$E]=e}var VI=null;var mn=function(t,e,n){VI?.(t,e,n)},zE="svg",cx="math";function En(t){for(;Array.isArray(t);)t=t[Yn];return t}function qE(t,e){return En(e[t])}function on(t,e){return En(e[t.index])}function GE(t,e){return t.data[e]}function ux(t,e){return t[e]}function xr(t,e){let n=e[t];return Cr(n)?n:n[Yn]}function Ap(t){return(t[Y]&128)===128}function lx(t){return Jn(t[Dt])}function xu(t,e){return e==null?null:t[e]}function WE(t){t[no]=0}function KE(t){t[Y]&1024||(t[Y]|=1024,Ap(t)&&Xu(t))}function dx(t,e){for(;t>0;)e=e[wo],t--;return e}function Gs(t){return!!(t[Y]&9216||t[Ht]?.dirty)}function $f(t){t[_n].changeDetectionScheduler?.notify(7),t[Y]&64&&(t[Y]|=1024),Gs(t)&&Xu(t)}function Xu(t){t[_n].changeDetectionScheduler?.notify(0);let e=oi(t);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!Ap(e)));)e=oi(e)}function QE(t,e){if((t[Y]&256)===256)throw new q(911,!1);t[br]===null&&(t[br]=[]),t[br].push(e)}function hx(t,e){if(t[br]===null)return;let n=t[br].indexOf(e);n!==-1&&t[br].splice(n,1)}function oi(t){let e=t[Dt];return Jn(e)?e[Dt]:e}var oe={lFrame:o0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var YE=!1;function fx(){return oe.lFrame.elementDepthCount}function px(){oe.lFrame.elementDepthCount++}function gx(){oe.lFrame.elementDepthCount--}function JE(){return oe.bindingsEnabled}function mx(){return oe.skipHydrationRootTNode!==null}function yx(t){return oe.skipHydrationRootTNode===t}function vx(){oe.skipHydrationRootTNode=null}function Ce(){return oe.lFrame.lView}function St(){return oe.lFrame.tView}function ze(t){return oe.lFrame.contextLView=t,t[nn]}function qe(t){return oe.lFrame.contextLView=null,t}function At(){let t=ZE();for(;t!==null&&t.type===64;)t=t.parent;return t}function ZE(){return oe.lFrame.currentTNode}function _x(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Xs(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function XE(){return oe.lFrame.isParent}function wx(){oe.lFrame.isParent=!1}function e0(){return YE}function jI(t){YE=t}function t0(){let t=oe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ix(t){return oe.lFrame.bindingIndex=t}function Mp(){return oe.lFrame.bindingIndex++}function Ex(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Dx(){return oe.lFrame.inI18n}function bx(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hf(e)}function Cx(){return oe.lFrame.currentDirectiveIndex}function Hf(t){oe.lFrame.currentDirectiveIndex=t}function Tx(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function n0(t){oe.lFrame.currentQueryIndex=t}function Sx(t){let e=t[ae];return e.type===2?e.declTNode:e.type===1?t[rn]:null}function r0(t,e,n){if(n&ie.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ie.Host);)if(i=Sx(o),i===null||(o=o[wo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=oe.lFrame=i0();return r.currentTNode=e,r.lView=t,!0}function Rp(t){let e=i0(),n=t[ae];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function i0(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?o0(t):e}function o0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function s0(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var a0=s0;function xp(){let t=s0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ax(t){return(oe.lFrame.contextLView=dx(t,oe.lFrame.contextLView))[nn]}function Eo(){return oe.lFrame.selectedIndex}function si(t){oe.lFrame.selectedIndex=t}function Np(){let t=oe.lFrame;return GE(t.tView,t.selectedIndex)}function c0(){oe.lFrame.currentNamespace=zE}function Mx(){return oe.lFrame.currentNamespace}var u0=!0;function Pp(){return u0}function Op(t){u0=t}function Rx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=BE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function kp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function vu(t,e,n){l0(t,e,3,n)}function _u(t,e,n,r){(t[Y]&3)===n&&l0(t,e,n,r)}function Df(t,e){let n=t[Y];(n&3)===e&&(n&=16383,n+=1,t[Y]=n)}function l0(t,e,n,r){let i=r!==void 0?t[no]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[no]+=65536),(a<o||o==-1)&&(xx(t,n,e,u),t[no]=(t[no]&4294901760)+u+2),u++}function UI(t,e){mn(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),mn(5,t,e)}}function xx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Y]>>14<t[no]>>16&&(t[Y]&3)===e&&(t[Y]+=16384,UI(a,o)):UI(a,o)}var oo=-1,ai=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Nx(t){return t instanceof ai}function Px(t){return(t.flags&8)!==0}function Ox(t){return(t.flags&16)!==0}var bf={},zf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ku(r);let i=this.injector.get(e,bf,r);return i!==bf||n===bf?i:this.parentInjector.get(e,n,r)}};function d0(t){return t!==oo}function Nu(t){return t&32767}function kx(t){return t>>16}function Pu(t,e){let n=kx(t),r=e;for(;n>0;)r=r[wo],n--;return r}var qf=!0;function Ou(t){let e=qf;return qf=t,e}var Fx=256,h0=Fx-1,f0=5,Lx=0,yn={};function Vx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bs)&&(r=n[Bs]),r==null&&(r=n[Bs]=Lx++);let i=r&h0,o=1<<i;e.data[t+(i>>f0)]|=o}function ku(t,e){let n=p0(t,e);if(n!==-1)return n;let r=e[ae];r.firstCreatePass&&(t.injectorIndex=e.length,Cf(r.data,t),Cf(e,null),Cf(r.blueprint,null));let i=Fp(t,e),o=t.injectorIndex;if(d0(i)){let s=Nu(i),a=Pu(i,e),u=a[ae].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Cf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function p0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Fp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=_0(i),r===null)return oo;if(n++,i=i[wo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return oo}function Gf(t,e,n){Vx(t,e,n)}function g0(t,e,n){if(n&ie.Optional||t!==void 0)return t;Ip(e,"NodeInjector")}function m0(t,e,n,r){if(n&ie.Optional&&r===void 0&&(r=null),!(n&(ie.Self|ie.Host))){let i=t[uo],o=Tt(void 0);try{return i?i.get(e,r,n&ie.Optional):vE(e,r,n&ie.Optional)}finally{Tt(o)}}return g0(r,e,n)}function y0(t,e,n,r=ie.Default,i){if(t!==null){if(e[Y]&2048&&!(r&ie.Self)){let s=Hx(t,e,n,r,yn);if(s!==yn)return s}let o=v0(t,e,n,r,yn);if(o!==yn)return o}return m0(e,n,r,i)}function v0(t,e,n,r,i){let o=Bx(n);if(typeof o=="function"){if(!r0(e,t,r))return r&ie.Host?g0(i,n,r):m0(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ie.Optional))Ip(n);else return s}finally{a0()}}else if(typeof o=="number"){let s=null,a=p0(t,e),u=oo,l=r&ie.Host?e[wn][rn]:null;for((a===-1||r&ie.SkipSelf)&&(u=a===-1?Fp(t,e):e[a+8],u===oo||!$I(r,!1)?a=-1:(s=e[ae],a=Nu(u),e=Pu(u,e)));a!==-1;){let h=e[ae];if(BI(o,a,h.data)){let p=jx(a,e,n,s,r,l);if(p!==yn)return p}u=e[a+8],u!==oo&&$I(r,e[ae].data[a+8]===l)&&BI(o,a,e)?(s=h,a=Nu(u),e=Pu(u,e)):a=-1}}return i}function jx(t,e,n,r,i,o){let s=e[ae],a=s.data[t+8],u=r==null?Zu(a)&&qf:r!=s&&(a.type&3)!==0,l=i&ie.Host&&o===a,h=Ux(a,s,n,u,l);return h!==null?fo(e,s,h,a):yn}function Ux(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&Sr(y)&&y.type===n)return u}return null}function fo(t,e,n,r){let i=t[n],o=e.data;if(Nx(i)){let s=i;s.resolving&&yR(mR(o[n]));let a=Ou(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Tt(s.injectImpl):null,h=r0(t,r,ie.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Rx(n,o[n],e)}finally{l!==null&&Tt(l),Ou(a),s.resolving=!1,a0()}}return i}function Bx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Bs)?t[Bs]:void 0;return typeof e=="number"?e>=0?e&h0:$x:e}function BI(t,e,n){let r=1<<t;return!!(n[e+(t>>f0)]&r)}function $I(t,e){return!(t&ie.Self)&&!(t&ie.Host&&e)}var ti=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return y0(this._tNode,this._lView,e,Ku(r),n)}};function $x(){return new ti(At(),Ce())}function Do(t){return Js(()=>{let e=t.prototype.constructor,n=e[Eu]||Wf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Eu]||Wf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wf(t){return hE(t)?()=>{let e=Wf(It(t));return e&&e()}:ni(t)}function Hx(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Y]&2048&&!(s[Y]&512);){let a=v0(o,s,n,r|ie.Self,yn);if(a!==yn)return a;let u=o.parent;if(!u){let l=s[LE];if(l){let h=l.get(n,yn,r);if(h!==yn)return h}u=_0(s),s=s[wo]}o=u}return i}function _0(t){let e=t[ae],n=e.type;return n===2?e.declTNode:n===1?t[rn]:null}function HI(t,e=null,n=null,r){let i=w0(t,e,n,r);return i.resolveInjectorInitializers(),i}function w0(t,e=null,n=null,r,i=new Set){let o=[n||$t,GR(t)];return r=r||(typeof t=="object"?void 0:Et(t)),new zs(o,e||Tp(),r||null,i)}var ei=class ei{static create(e,n){if(Array.isArray(e))return HI({name:""},n,e,"");{let r=e.name??"";return HI({name:r},e.parent,e.providers,r)}}};ei.THROW_IF_NOT_FOUND=$s,ei.NULL=new Cu,ei.\u0275prov=B({token:ei,providedIn:"any",factory:()=>J(EE)}),ei.__NG_ELEMENT_ID__=-1;var Ar=ei;var zx=new W("");zx.__NG_ELEMENT_ID__=t=>{let e=At();if(e===null)throw new q(204,!1);if(e.type&2)return e.value;if(t&ie.Optional)return null;throw new q(204,!1)};var qx="ngOriginalError";function Tf(t){return t[qx]}var I0=!0,E0=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Gx,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Kf=class extends E0{constructor(e){super(),this._lView=e}onDestroy(e){return QE(this._lView,e),()=>hx(this._lView,e)}};function Gx(){return new Kf(Ce())}var bo=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ue(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Qf=class extends ot{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,rx()&&(this.destroyRef=k(E0,{optional:!0})??void 0,this.pendingTasks=k(bo,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Pe=Qf;function Fu(...t){}function D0(t){let e,n;function r(){t=Fu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function zI(t){return queueMicrotask(()=>t()),()=>{t=Fu}}var Lp="isAngularZone",Lu=Lp+"_ID",Wx=0,Ze=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pe(!1),this.onMicrotaskEmpty=new Pe(!1),this.onStable=new Pe(!1),this.onError=new Pe(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=I0}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Yx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Lp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Kx,Fu,Fu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Kx={};function Vp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){D0(()=>{t.callbackScheduled=!1,Yf(t),t.isCheckStableRunning=!0,Vp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Yf(t)}function Yx(t){let e=()=>{Qx(t)},n=Wx++;t._inner=t._inner.fork({name:"angular",properties:{[Lp]:!0,[Lu]:n,[Lu+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Jx(u))return r.invokeTask(o,s,a,u);try{return qI(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),GI(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return qI(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Zx(u)&&e(),GI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Yf(t),Vp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Yf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function GI(t){t._nesting--,Vp(t)}var Jf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pe,this.onMicrotaskEmpty=new Pe,this.onStable=new Pe,this.onError=new Pe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Jx(t){return b0(t,"__ignore_ng_zone__")}function Zx(t){return b0(t,"__scheduler_tick__")}function b0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Mr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Tf(e);for(;n&&Tf(n);)n=Tf(n);return n||null}},Xx=new W("",{providedIn:"root",factory:()=>{let t=k(Ze),e=k(Mr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function eN(){return el(At(),Ce())}function el(t,e){return new Nr(on(t,e))}var Nr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=eN;let t=e;return t})();function C0(t){return(t.flags&128)===128}var T0=new Map,tN=0;function nN(){return tN++}function rN(t){T0.set(t[Ju],t)}function iN(t){T0.delete(t[Ju])}var WI="__ngContext__";function ci(t,e){Cr(e)?(t[WI]=e[Ju],rN(e)):t[WI]=e}function S0(t){return M0(t[qs])}function A0(t){return M0(t[tn])}function M0(t){for(;t!==null&&!Jn(t);)t=t[tn];return t}var Zf;function R0(t){Zf=t}function oN(){if(Zf!==void 0)return Zf;if(typeof document<"u")return document;throw new q(210,!1)}var jp=new W("",{providedIn:"root",factory:()=>sN}),sN="ng",Up=new W(""),Co=new W("",{providedIn:"platform",factory:()=>"unknown"});var Bp=new W("",{providedIn:"root",factory:()=>oN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aN="h",cN="b";var uN=()=>null;function $p(t,e,n=!1){return uN(t,e,n)}var x0=!1,lN=new W("",{providedIn:"root",factory:()=>x0});var Vu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lE})`}};function tl(t){return t instanceof Vu?t.changingThisBreaksApplicationSecurity:t}function N0(t,e){let n=dN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${lE})`)}return n===e}function dN(t){return t instanceof Vu&&t.getTypeName()||null}var hN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function P0(t){return t=String(t),t.match(hN)?t:"unsafe:"+t}var Hp=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Hp||{});function O0(t){let e=fN();return e?e.sanitize(Hp.URL,t)||"":N0(t,"URL")?tl(t):P0(wp(t))}function fN(){let t=Ce();return t&&t[_n].sanitizer}function k0(t){return t instanceof Function?t():t}var Kn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Kn||{}),pN;function zp(t,e){return pN(t,e)}function ro(t,e,n,r,i){if(r!=null){let o,s=!1;Jn(r)?o=r:Cr(r)&&(s=!0,r=r[Yn]);let a=En(r);t===0&&n!==null?i==null?U0(e,n,a):ju(e,n,a,i||null,!0):t===1&&n!==null?ju(e,n,a,i||null,!0):t===2?MN(e,a,s):t===3&&e.destroyNode(a),o!=null&&xN(e,t,o,n,i)}}function gN(t,e){return t.createText(e)}function mN(t,e,n){t.setValue(e,n)}function F0(t,e,n){return t.createElement(e,n)}function yN(t,e){L0(t,e),e[Yn]=null,e[rn]=null}function vN(t,e,n,r,i,o){r[Yn]=i,r[rn]=e,nl(t,r,n,1,i,o)}function L0(t,e){e[_n].changeDetectionScheduler?.notify(8),nl(t,e,e[Xe],2,null,null)}function _N(t){let e=t[qs];if(!e)return Sf(t[ae],t);for(;e;){let n=null;if(Cr(e))n=e[qs];else{let r=e[zt];r&&(n=r)}if(!n){for(;e&&!e[tn]&&e!==t;)Cr(e)&&Sf(e[ae],e),e=e[Dt];e===null&&(e=t),Cr(e)&&Sf(e[ae],e),n=e&&e[tn]}e=n}}function wN(t,e,n,r){let i=zt+r,o=n.length;r>0&&(n[i-1][tn]=e),r<o-zt?(e[tn]=n[i],IE(n,zt+r,e)):(n.push(e),e[tn]=null),e[Dt]=n;let s=e[lo];s!==null&&n!==s&&V0(s,e);let a=e[ho];a!==null&&a.insertView(t),$f(e),e[Y]|=128}function V0(t,e){let n=t[Mu],r=e[Dt];if(Cr(r))t[Y]|=Ru.HasTransplantedViews;else{let i=r[Dt][wn];e[wn]!==i&&(t[Y]|=Ru.HasTransplantedViews)}n===null?t[Mu]=[e]:n.push(e)}function qp(t,e){let n=t[Mu],r=n.indexOf(e);n.splice(r,1)}function Xf(t,e){if(t.length<=zt)return;let n=zt+e,r=t[n];if(r){let i=r[lo];i!==null&&i!==t&&qp(i,r),e>0&&(t[n-1][tn]=r[tn]);let o=bu(t,zt+e);yN(r[ae],r);let s=o[ho];s!==null&&s.detachView(o[ae]),r[Dt]=null,r[tn]=null,r[Y]&=-129}return r}function j0(t,e){if(!(e[Y]&256)){let n=e[Xe];n.destroyNode&&nl(t,e,n,3,null,null),_N(e)}}function Sf(t,e){if(e[Y]&256)return;let n=me(null);try{e[Y]&=-129,e[Y]|=256,e[Ht]&&ef(e[Ht]),EN(t,e),IN(t,e),e[ae].type===1&&e[Xe].destroy();let r=e[lo];if(r!==null&&Jn(e[Dt])){r!==e[Dt]&&qp(r,e);let i=e[ho];i!==null&&i.detachView(t)}iN(e)}finally{me(n)}}function IN(t,e){let n=t.cleanup,r=e[Su];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Su]=null);let i=e[br];if(i!==null){e[br]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function EN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ai)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];mn(4,a,u);try{u.call(a)}finally{mn(5,a,u)}}else{mn(4,i,o);try{o.call(i)}finally{mn(5,i,o)}}}}}function DN(t,e,n){return bN(t,e.parent,n)}function bN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Yn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===vn.None||o===vn.Emulated)return null}return on(r,n)}}function ju(t,e,n,r,i){t.insertBefore(e,n,r,i)}function U0(t,e,n){t.appendChild(e,n)}function KI(t,e,n,r,i){r!==null?ju(t,e,n,r,i):U0(t,e,n)}function B0(t,e){return t.parentNode(e)}function CN(t,e){return t.nextSibling(e)}function TN(t,e,n){return AN(t,e,n)}function SN(t,e,n){return t.type&40?on(t,n):null}var AN=SN,QI;function Gp(t,e,n,r){let i=DN(t,r,e),o=e[Xe],s=r.parent||e[rn],a=TN(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)KI(o,i,n[u],a,!1);else KI(o,i,n,a,!1);QI!==void 0&&QI(o,r,e,n,i)}function Us(t,e){if(e!==null){let n=e.type;if(n&3)return on(e,t);if(n&4)return ep(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Us(t,r);{let i=t[e.index];return Jn(i)?ep(-1,i):En(i)}}else{if(n&128)return Us(t,e.next);if(n&32)return zp(e,t)()||En(t[e.index]);{let r=$0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=oi(t[wn]);return Us(i,r)}else return Us(t,e.next)}}}return null}function $0(t,e){if(e!==null){let r=t[wn][rn],i=e.projection;return r.projection[i]}return null}function ep(t,e){let n=zt+t+1;if(n<e.length){let r=e[n],i=r[ae].firstChild;if(i!==null)return Us(r,i)}return e[ii]}function MN(t,e,n){t.removeChild(null,e,n)}function Wp(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&ci(En(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Wp(t,e,n.child,r,i,o,!1),ro(e,t,i,a,o);else if(u&32){let l=zp(n,r),h;for(;h=l();)ro(e,t,i,h,o);ro(e,t,i,a,o)}else u&16?RN(t,e,r,n,i,o):ro(e,t,i,a,o);n=s?n.projectionNext:n.next}}function nl(t,e,n,r,i,o){Wp(n,r,t.firstChild,e,i,o,!1)}function RN(t,e,n,r,i,o){let s=n[wn],u=s[rn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ro(e,t,i,h,o)}else{let l=u,h=s[Dt];C0(r)&&(l.flags|=128),Wp(t,e,l,h,i,o,!0)}}function xN(t,e,n,r,i){let o=n[ii],s=En(n);o!==s&&ro(e,t,r,o,i);for(let a=zt;a<n.length;a++){let u=n[a];nl(u[ae],u,t,e,r,o)}}function NN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Kn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Kn.Important),t.setStyle(n,r,i,o))}}function PN(t,e,n){t.setAttribute(e,"style",n)}function H0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function z0(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Ff(t,e,r),i!==null&&H0(t,e,i),o!==null&&PN(t,e,o)}var Pr={};function we(t=1){q0(St(),Ce(),Eo()+t,!1)}function q0(t,e,n,r){if(!r)if((e[Y]&3)===3){let o=t.preOrderCheckHooks;o!==null&&vu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&_u(e,o,0,n)}si(n)}function $(t,e=ie.Default){let n=Ce();if(n===null)return J(t,e);let r=At();return y0(r,n,It(t),e)}function G0(t,e,n,r,i,o){let s=me(null);try{let a=null;i&Tr.SignalBased&&(a=e[r][qn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Tr.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):UE(e,a,r,o)}finally{me(s)}}function ON(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)si(~i);else{let o=i,s=n[++r],a=n[++r];bx(s,o);let u=e[o];a(2,u)}}}finally{si(-1)}}function rl(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Yn]=i,p[Y]=r|4|128|8|64,(l!==null||t&&t[Y]&2048)&&(p[Y]|=2048),WE(p),p[Dt]=p[wo]=t,p[nn]=n,p[_n]=s||t&&t[_n],p[Xe]=a||t&&t[Xe],p[uo]=u||t&&t[uo]||null,p[rn]=o,p[Ju]=nN(),p[Tu]=h,p[LE]=l,p[wn]=e.type==2?t[wn]:p,p}function il(t,e,n,r,i){let o=t.data[e];if(o===null)o=kN(t,e,n,r,i),Dx()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=_x();o.injectorIndex=s===null?-1:s.injectorIndex}return Xs(o,!0),o}function kN(t,e,n,r,i){let o=ZE(),s=XE(),a=s?o:o&&o.parent,u=t.data[e]=UN(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function W0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function K0(t,e,n,r,i){let o=Eo(),s=r&2;try{si(-1),s&&e.length>In&&q0(t,e,In,!1),mn(s?2:0,i),n(r,i)}finally{si(o),mn(s?3:1,i)}}function Q0(t,e,n){if(jE(e)){let r=me(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{me(r)}}}function Y0(t,e,n){JE()&&(GN(t,e,n,on(n,e)),(n.flags&64)===64&&tD(t,e,n))}function J0(t,e,n=on){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Z0(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Kp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Kp(t,e,n,r,i,o,s,a,u,l,h){let p=In+r,m=p+i,y=FN(p,m),S=typeof l=="function"?l():l;return y[ae]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function FN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Pr);return n}function LN(t,e,n,r){let o=r.get(lN,x0)||n===vn.ShadowDom,s=t.selectRootElement(e,o);return VN(s),s}function VN(t){jN(t)}var jN=()=>null;function UN(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return mx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function YI(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Tr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?JI(r,n,l,a,u):JI(r,n,l,a)}return r}function JI(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function BN(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=n?n.get(p):null,y=m?m.inputs:null,S=m?m.outputs:null;u=YI(0,p.inputs,h,u,y),l=YI(1,p.outputs,h,l,S);let x=u!==null&&s!==null&&!bp(e)?tP(u,h,s):null;a.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function $N(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Qp(t,e,n,r,i,o,s,a){let u=on(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Yp(t,n,h,r,i),Zu(e)&&HN(n,e.index)):e.type&3?(r=$N(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function HN(t,e){let n=xr(e,t);n[Y]&16||(n[Y]|=64)}function X0(t,e,n,r){if(JE()){let i=r===null?null:{"":-1},o=KN(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&eD(t,e,n,s,i,a),i&&QN(n,r,i)}n.mergedAttrs=Hs(n.mergedAttrs,n.attrs)}function eD(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Gf(ku(n,e),t,r[l].type);JN(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=W0(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Hs(n.mergedAttrs,h.hostAttrs),ZN(t,n,e,u,h),YN(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}BN(t,n,o)}function zN(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;qN(s)!=a&&s.push(a),s.push(n,r,o)}}function qN(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function GN(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Zu(n)&&XN(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ku(n,e),ci(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=fo(e,t,a,n);if(ci(l,e),s!==null&&eP(e,a-i,l,u,n,s),Sr(u)){let h=xr(n.index,e);h[nn]=fo(e,t,a,n)}}}function tD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Cx();try{si(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Hf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&WN(u,l)}}finally{si(-1),Hf(s)}}function WN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function KN(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(LR(e,s.selectors,!1))if(r||(r=[]),Sr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;tp(t,e,u)}else r.unshift(s),tp(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function tp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function QN(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new q(-301,!1);r.push(e[i],o)}}}function YN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Sr(e)&&(n[""]=t)}}function JN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ZN(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ni(i.type,!0)),s=new ai(o,Sr(i),$);t.blueprint[r]=s,n[r]=s,zN(t,e,r,W0(t,n,i.hostVars,Pr),i)}function XN(t,e,n){let r=on(e,t),i=Z0(n),o=t[_n].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ol(t,rl(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function eP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];G0(r,n,u,l,h,p)}}function tP(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function nD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function rD(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];n0(o),a.contentQueries(2,e[s],s)}}}finally{me(r)}}}function ol(t,e){return t[qs]?t[LI][tn]=e:t[qs]=e,t[LI]=e,e}function np(t,e,n){n0(0);let r=me(null);try{e(t,n)}finally{me(r)}}function nP(t){return t[Su]??=[]}function rP(t){return t.cleanup??=[]}function iD(t,e){let n=t[uo],r=n?n.get(Mr,null):null;r&&r.handleError(e)}function Yp(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],h=t.data[s];G0(h,l,r,a,u,i)}}function iP(t,e,n){let r=qE(e,t);mN(t[Xe],r,n)}function oP(t,e){let n=xr(e,t),r=n[ae];sP(r,n);let i=n[Yn];i!==null&&n[Tu]===null&&(n[Tu]=$p(i,n[uo])),Jp(r,n,n[nn])}function sP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Jp(t,e,n){Rp(e);try{let r=t.viewQuery;r!==null&&np(1,r,n);let i=t.template;i!==null&&K0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ho]?.finishViewCreation(t),t.staticContentQueries&&rD(t,e),t.staticViewQueries&&np(2,t.viewQuery,n);let o=t.components;o!==null&&aP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Y]&=-5,xp()}}function aP(t,e){for(let n=0;n<e.length;n++)oP(t,e[n])}function cP(t,e,n,r){let i=me(null);try{let o=e.tView,a=t[Y]&4096?4096:16,u=rl(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[lo]=l;let h=t[ho];return h!==null&&(u[ho]=h.createEmbeddedView(o)),Jp(o,u,n),u}finally{me(i)}}function ZI(t,e){return!e||e.firstChild===null||C0(t)}function uP(t,e,n,r=!0){let i=e[ae];if(wN(i,e,t,n),r){let s=ep(n,t),a=e[Xe],u=B0(a,t[ii]);u!==null&&vN(i,t[rn],a,e,u,s)}let o=e[Tu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Uu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(En(o)),Jn(o)&&lP(o,r);let s=n.type;if(s&8)Uu(t,e,n.child,r);else if(s&32){let a=zp(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=$0(e,n);if(Array.isArray(a))r.push(...a);else{let u=oi(e[wn]);Uu(u[ae],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function lP(t,e){for(let n=zt;n<t.length;n++){let r=t[n],i=r[ae].firstChild;i!==null&&Uu(r[ae],r,i,e)}t[ii]!==t[Yn]&&e.push(t[ii])}var oD=[];function dP(t){return t[Ht]??hP(t)}function hP(t){let e=oD.pop()??Object.create(pP);return e.lView=t,e}function fP(t){t.lView[Ht]!==t&&(t.lView=null,oD.push(t))}var pP=ce(O({},Fs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Xu(t.lView)},consumerOnSignalRead(){this.lView[Ht]=this}});function gP(t){let e=t[Ht]??Object.create(mP);return e.lView=t,e}var mP=ce(O({},Fs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=oi(t.lView);for(;e&&!sD(e[ae]);)e=oi(e);e&&KE(e)},consumerOnSignalRead(){this.lView[Ht]=this}});function sD(t){return t.type!==2}var yP=100;function aD(t,e=!0,n=0){let r=t[_n],i=r.rendererFactory,o=!1;o||i.begin?.();try{vP(t,n)}catch(s){throw e&&iD(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function vP(t,e){let n=e0();try{jI(!0),rp(t,e);let r=0;for(;Gs(t);){if(r===yP)throw new q(103,!1);r++,rp(t,1)}}finally{jI(n)}}function _P(t,e,n,r){let i=e[Y];if((i&256)===256)return;let o=!1,s=!1;!o&&e[_n].inlineEffectRunner?.flush(),Rp(e);let a=!0,u=null,l=null;o||(sD(t)?(l=dP(e),u=jc(l)):Hw()===null?(a=!1,l=gP(e),u=jc(l)):e[Ht]&&(ef(e[Ht]),e[Ht]=null));try{WE(e),Ix(t.bindingStartIndex),n!==null&&K0(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&vu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&_u(e,y,0,null),Df(e,0)}if(s||wP(e),cD(e,0),t.contentQueries!==null&&rD(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&vu(e,y)}else{let y=t.contentHooks;y!==null&&_u(e,y,1),Df(e,1)}ON(t,e);let p=t.components;p!==null&&lD(e,p,0);let m=t.viewQuery;if(m!==null&&np(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&vu(e,y)}else{let y=t.viewHooks;y!==null&&_u(e,y,2),Df(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ef]){for(let y of e[Ef])y();e[Ef]=null}o||(e[Y]&=-73)}catch(h){throw o||Xu(e),h}finally{l!==null&&(Zh(l,u),a&&fP(l)),xp()}}function cD(t,e){for(let n=S0(t);n!==null;n=A0(n))for(let r=zt;r<n.length;r++){let i=n[r];uD(i,e)}}function wP(t){for(let e=S0(t);e!==null;e=A0(e)){if(!(e[Y]&Ru.HasTransplantedViews))continue;let n=e[Mu];for(let r=0;r<n.length;r++){let i=n[r];KE(i)}}}function IP(t,e,n){let r=xr(e,t);uD(r,n)}function uD(t,e){Ap(t)&&rp(t,e)}function rp(t,e){let r=t[ae],i=t[Y],o=t[Ht],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Xh(o)),s||=!1,o&&(o.dirty=!1),t[Y]&=-9217,s)_P(r,t,r.template,t[nn]);else if(i&8192){cD(t,1);let a=r.components;a!==null&&lD(t,a,1)}}function lD(t,e,n){for(let r=0;r<e.length;r++)IP(t,e[r],n)}function Zp(t,e){let n=e0()?64:1088;for(t[_n].changeDetectionScheduler?.notify(e);t;){t[Y]|=n;let r=oi(t);if(Uf(t)&&!r)return t;t=r}return null}var ui=class{get rootNodes(){let e=this._lView,n=e[ae];return Uu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nn]}set context(e){this._lView[nn]=e}get destroyed(){return(this._lView[Y]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dt];if(Jn(e)){let n=e[Au],r=n?n.indexOf(this):-1;r>-1&&(Xf(e,r),bu(n,r))}this._attachedToViewContainer=!1}j0(this._lView[ae],this._lView)}onDestroy(e){QE(this._lView,e)}markForCheck(){Zp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){$f(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,aD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Uf(this._lView),n=this._lView[lo];n!==null&&!e&&qp(n,this._lView),L0(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let n=Uf(this._lView),r=this._lView[lo];r!==null&&!n&&V0(r,this._lView),$f(this._lView)}},sl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=bP;let t=e;return t})(),EP=sl,DP=class extends EP{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=cP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ui(i)}};function bP(){return CP(At(),Ce())}function CP(t,e){return t.type&4?new DP(e,t,el(t,e)):null}var f8=new RegExp(`^(\\d+)*(${cN}|${aN})*(.*)`);var TP=()=>null;function XI(t,e){return TP(t,e)}var Ws=class{},Xp=new W("",{providedIn:"root",factory:()=>!1});var dD=new W(""),hD=new W(""),ip=class{},Bu=class{};function SP(t){let e=Error(`No component factory found for ${Et(t)}.`);return e[AP]=t,e}var AP="ngComponent";var op=class{resolveComponentFactory(e){throw SP(e)}},cg=class cg{};cg.NULL=new op;var po=cg,go=class{},di=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>MP();let t=e;return t})();function MP(){let t=Ce(),e=At(),n=xr(e.index,t);return(Cr(n)?n:t)[Xe]}var RP=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var eE=new Set;function ea(t){eE.has(t)||(eE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var fD=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function sp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=SI(i,a);else if(o==2){let u=a,l=e[++s];r=SI(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var $u=class extends po{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ri(e);return new Ks(n,this.ngModule)}};function tE(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Tr.None;e?n.push({propName:s,templateName:r,isSignal:(a&Tr.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function xP(t){let e=t.toLowerCase();return e==="svg"?zE:e==="math"?cx:null}var Ks=class extends Bu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=tE(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return tE(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=BR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=me(null);try{i=i||this.ngModule;let s=i instanceof qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new zf(e,s):e,u=a.get(go,null);if(u===null)throw new q(407,!1);let l=a.get(RP,null),h=a.get(fD,null),p=a.get(Ws,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},y=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",x=r?LN(y,r,this.componentDef.encapsulation,a):F0(y,S,xP(S)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let L=null;x!==null&&(L=$p(x,a,!0));let G=Kp(0,null,null,1,0,null,null,null,null,null,null),H=rl(null,G,null,R,null,null,m,y,a,null,L);Rp(H);let he,ke;try{let ne=this.componentDef,D,v=null;ne.findHostDirectiveDefs?(D=[],v=new Map,ne.findHostDirectiveDefs(ne,D,v),D.push(ne)):D=[ne];let w=NP(H,x),E=PP(w,x,ne,D,H,m,y);ke=GE(G,In),x&&FP(y,ne,x,r),n!==void 0&&LP(ke,this.ngContentSelectors,n),he=kP(E,ne,D,v,H,[VP]),Jp(G,H,null)}finally{xp()}return new ap(this.componentType,he,el(ke,H),H,ke)}finally{me(o)}}},ap=class extends ip{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ui(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Yp(o[ae],o,i,e,n),this.previousInputValues.set(e,n);let s=xr(this._tNode.index,o);Zp(s,1)}}get injector(){return new ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function NP(t,e){let n=t[ae],r=In;return t[r]=e,il(n,r,2,"#host",null)}function PP(t,e,n,r,i,o,s){let a=i[ae];OP(r,t,e,s);let u=null;e!==null&&(u=$p(e,i[uo]));let l=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=rl(i,Z0(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&tp(a,t,r.length-1),ol(i,p),i[t.index]=p}function OP(t,e,n,r){for(let i of t)e.mergedAttrs=Hs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(sp(e,e.mergedAttrs,!0),n!==null&&z0(r,n,e))}function kP(t,e,n,r,i,o){let s=At(),a=i[ae],u=on(s,i);eD(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let p=s.directiveStart+h,m=fo(i,a,p,s);ci(m,i)}tD(a,i,s),u&&ci(u,i);let l=fo(i,a,s.directiveStart+s.componentOffset,s);if(t[nn]=i[nn]=l,o!==null)for(let h of o)h(l,e);return Q0(a,s,i),l}function FP(t,e,n,r){if(r)Ff(t,n,["ng-version","18.2.1"]);else{let{attrs:i,classes:o}=$R(e.selectors[0]);i&&Ff(t,n,i),o&&o.length>0&&H0(t,n,o.join(" "))}}function LP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function VP(){let t=At();kp(Ce()[ae],t)}var To=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jP;let t=e;return t})();function jP(){let t=At();return BP(t,Ce())}var UP=To,pD=class extends UP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return el(this._hostTNode,this._hostLView)}get injector(){return new ti(this._hostTNode,this._hostLView)}get parentInjector(){let e=Fp(this._hostTNode,this._hostLView);if(d0(e)){let n=Pu(e,this._hostLView),r=Nu(e),i=n[ae].data[r+8];return new ti(i,n)}else return new ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=nE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-zt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=XI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ZI(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!ix(e),a;if(s)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new Ks(ri(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let x=(s?l:this.parentInjector).get(qt,null);x&&(o=x)}let h=ri(u.componentType??{}),p=XI(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,ZI(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(lx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Dt],l=new pD(u,u[rn],u[Dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return uP(s,i,o,r),e.attachToViewContainerRef(),IE(Af(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=nE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Xf(this._lContainer,n);r&&(bu(Af(this._lContainer),n),j0(r[ae],r))}detach(e){let n=this._adjustIndex(e,-1),r=Xf(this._lContainer,n);return r&&bu(Af(this._lContainer),n)!=null?new ui(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function nE(t){return t[Au]}function Af(t){return t[Au]||(t[Au]=[])}function BP(t,e){let n,r=e[t.index];return Jn(r)?n=r:(n=nD(r,e,null,t),e[t.index]=n,ol(e,n)),HP(n,e,t,r),new pD(n,t,e)}function $P(t,e){let n=t[Xe],r=n.createComment(""),i=on(e,t),o=B0(n,i);return ju(n,o,r,CN(n,i),!1),r}var HP=GP,zP=()=>!1;function qP(t,e,n){return zP(t,e,n)}function GP(t,e,n,r){if(t[ii])return;let i;n.type&8?i=En(r):i=$P(e,n),t[ii]=i}function WP(t){return typeof t=="function"&&t[qn]!==void 0}function al(t,e){ea("NgSignals");let n=eI(t),r=n[qn];return e?.equal&&(r.equal=e.equal),n.set=i=>tf(r,i),n.update=i=>tI(r,i),n.asReadonly=KP.bind(n),n}function KP(){let t=this[qn];if(t.readonlyFn===void 0){let e=()=>this();e[qn]=t,t.readonlyFn=e}return t.readonlyFn}function gD(t){return WP(t)&&typeof t.set=="function"}function QP(t){return Object.getPrototypeOf(t.prototype).constructor}function hi(t){let e=QP(t.type),n=!0,r=[t];for(;e;){let i;if(Sr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=pu(t.inputs),s.inputTransforms=pu(t.inputTransforms),s.declaredInputs=pu(t.declaredInputs),s.outputs=pu(t.outputs);let a=i.hostBindings;a&&e1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&ZP(t,u),l&&XP(t,l),YP(t,i),cR(t.outputs,i.outputs),Sr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===hi&&(n=!1)}}e=Object.getPrototypeOf(e)}JP(r)}function YP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function JP(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Hs(i.hostAttrs,n=Hs(n,i.hostAttrs))}}function pu(t){return t===so?{}:t===$t?[]:t}function ZP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function XP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function e1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Rr=class{},Qs=class{};var cp=class extends Rr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $u(this);let o=RE(e);this._bootstrapComponents=k0(o.bootstrap),this._r3Injector=w0(e,n,[{provide:Rr,useValue:this},{provide:po,useValue:this.componentFactoryResolver},...r],Et(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},up=class extends Qs{constructor(e){super(),this.moduleType=e}create(e){return new cp(this.moduleType,e,[])}};var Hu=class extends Rr{constructor(e){super(),this.componentFactoryResolver=new $u(this),this.instance=null;let n=new zs([...e.providers,{provide:Rr,useValue:this},{provide:po,useValue:this.componentFactoryResolver}],e.parent||Tp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function eg(t,e,n=null){return new Hu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function mD(t){return n1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function t1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function n1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function r1(t,e,n){return t[e]=n}function ta(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function i1(t){return(t.flags&32)===32}function o1(t,e,n,r,i,o,s,a,u){let l=e.consts,h=il(e,t,4,s||null,a||null);X0(e,n,h,xu(l,u)),kp(e,h);let p=h.tView=Kp(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function s1(t,e,n,r,i,o,s,a,u,l){let h=n+In,p=e.firstCreatePass?o1(h,e,t,r,i,o,s,a,u):e.data[h];Xs(p,!1);let m=a1(e,t,p,n);Pp()&&Gp(e,t,m,p),ci(m,t);let y=nD(m,t,m,p);return t[h]=y,ol(t,y),qP(y,p,t),Sp(p)&&Y0(e,t,p),u!=null&&J0(t,p,l),p}function bt(t,e,n,r,i,o,s,a){let u=Ce(),l=St(),h=xu(l.consts,o);return s1(u,l,t,e,n,r,i,h,s,a),bt}var a1=c1;function c1(t,e,n,r){return Op(!0),e[Xe].createComment("")}function yD(t,e,n,r){return ta(t,Mp(),n)?e+wp(n)+r:Pr}function gu(t,e){return t<<17|e<<2}function li(t){return t>>17&32767}function u1(t){return(t&2)==2}function l1(t,e){return t&131071|e<<17}function lp(t){return t|2}function mo(t){return(t&131068)>>2}function Mf(t,e){return t&-131069|e<<2}function d1(t){return(t&1)===1}function dp(t){return t|1}function h1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=li(s),u=mo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Zs(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=li(t[a+1]);t[r+1]=gu(m,a),m!==0&&(t[m+1]=Mf(t[m+1],r)),t[a+1]=l1(t[a+1],r)}else t[r+1]=gu(a,0),a!==0&&(t[a+1]=Mf(t[a+1],r)),a=r;else t[r+1]=gu(u,0),a===0?a=r:t[u+1]=Mf(t[u+1],r),u=r;l&&(t[r+1]=lp(t[r+1])),rE(t,h,r,!0),rE(t,h,r,!1),f1(e,h,t,r,o),s=gu(a,u),o?e.classBindings=s:e.styleBindings=s}function f1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Zs(o,e)>=0&&(n[r+1]=dp(n[r+1]))}function rE(t,e,n,r){let i=t[n+1],o=e===null,s=r?li(i):mo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];p1(u,e)&&(a=!0,t[s+1]=r?dp(l):lp(l)),s=r?li(l):mo(l)}a&&(t[n+1]=r?lp(i):dp(i))}function p1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Zs(t,e)>=0:!1}function Me(t,e,n){let r=Ce(),i=Mp();if(ta(r,i,e)){let o=St(),s=Np();Qp(o,s,r,t,e,r[Xe],n,!1)}return Me}function iE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Yp(t,n,o[s],s,r)}function tg(t,e){return g1(t,e,null,!0),tg}function g1(t,e,n,r){let i=Ce(),o=St(),s=Ex(2);if(o.firstUpdatePass&&y1(o,t,s,r),e!==Pr&&ta(i,s,e)){let a=o.data[Eo()];E1(o,a,i,i[Xe],t,i[s+1]=D1(e,n),r,s)}}function m1(t,e){return e>=t.expandoStartIndex}function y1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Eo()],s=m1(t,n);b1(o,r)&&e===null&&!s&&(e=!1),e=v1(i,o,e,r),h1(i,o,e,n,s,r)}}function v1(t,e,n,r){let i=Tx(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Rf(null,t,e,n,r),n=Ys(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Rf(i,t,e,n,r),o===null){let u=_1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Rf(null,t,e,u[1],r),u=Ys(u,e.attrs,r),w1(t,e,r,u))}else o=I1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function _1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(mo(r)!==0)return t[li(r)]}function w1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[li(i)]=r}function I1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ys(r,s,n)}return Ys(r,e.attrs,n)}function Rf(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ys(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ys(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),AR(t,s,n?!0:e[++o]))}return t===void 0?null:t}function E1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=d1(l)?oE(u,e,n,i,mo(l),s):void 0;if(!zu(h)){zu(o)||u1(l)&&(o=oE(u,null,n,i,a,s));let p=qE(Eo(),n);NN(r,s,p,i,o)}}function oE(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Pr&&(m=p?$t:void 0);let y=p?wf(m,r):h===r?m:void 0;if(l&&!zu(y)&&(y=wf(u,r)),zu(y)&&(a=y,s))return a;let S=t[i+1];i=s?li(S):mo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=wf(u,r))}return a}function zu(t){return t!==void 0}function D1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Et(tl(t)))),t}function b1(t,e){return(t.flags&(e?8:16))!==0}function C1(t,e,n,r,i,o){let s=e.consts,a=xu(s,i),u=il(e,t,2,r,a);return X0(e,n,u,xu(s,o)),u.attrs!==null&&sp(u,u.attrs,!1),u.mergedAttrs!==null&&sp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function V(t,e,n,r){let i=Ce(),o=St(),s=In+t,a=i[Xe],u=o.firstCreatePass?C1(s,o,i,e,n,r):o.data[s],l=T1(o,i,u,a,e,t);i[s]=l;let h=Sp(u);return Xs(u,!0),z0(a,l,u),!i1(u)&&Pp()&&Gp(o,i,l,u),fx()===0&&ci(l,i),px(),h&&(Y0(o,i,u),Q0(o,u,i)),r!==null&&J0(i,u),V}function U(){let t=At();XE()?wx():(t=t.parent,Xs(t,!1));let e=t;yx(e)&&vx(),gx();let n=St();return n.firstCreatePass&&(kp(n,t),jE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Px(e)&&iE(n,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ox(e)&&iE(n,e,Ce(),e.stylesWithoutHost,!1),U}function xe(t,e,n,r){return V(t,e,n,r),U(),xe}var T1=(t,e,n,r,i,o)=>(Op(!0),F0(r,i,Mx()));function sn(){return Ce()}var qu="en-US";var S1=qu;function A1(t){typeof t=="string"&&(S1=t.toLowerCase().replace(/_/g,"-"))}var M1=(t,e,n)=>{};function Ee(t,e,n,r){let i=Ce(),o=St(),s=At();return vD(o,i,i[Xe],s,t,e,r),Ee}function R1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Su],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function vD(t,e,n,r,i,o,s){let a=Sp(r),l=t.firstCreatePass&&rP(t),h=e[nn],p=nP(e),m=!0;if(r.type&3||s){let x=on(r,e),R=s?s(x):x,L=p.length,G=s?he=>s(En(he[r.index])):r.index,H=null;if(!s&&a&&(H=R1(t,e,i,r.index)),H!==null){let he=H.__ngLastListenerFn__||H;he.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,m=!1}else{o=aE(r,e,h,o),M1(x,i,o);let he=n.listen(R,i,o);p.push(o,he),l&&l.push(i,G,L,L+1)}}else o=aE(r,e,h,o);let y=r.outputs,S;if(m&&y!==null&&(S=y[i])){let x=S.length;if(x)for(let R=0;R<x;R+=2){let L=S[R],G=S[R+1],ke=e[L][G].subscribe(o),ne=p.length;p.push(o,ke),l&&l.push(i,r.index,ne,-(ne+1))}}}function sE(t,e,n,r){let i=me(null);try{return mn(6,e,n),n(r)!==!1}catch(o){return iD(t,o),!1}finally{mn(7,e,n),me(i)}}function aE(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?xr(t.index,e):e;Zp(s,5);let a=sE(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=sE(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function De(t=1){return Ax(t)}function ng(t,e,n){return _D(t,"",e,"",n),ng}function _D(t,e,n,r,i){let o=Ce(),s=yD(o,e,n,r);if(s!==Pr){let a=St(),u=Np();Qp(a,u,o,t,s,o[Xe],i,!1)}return _D}function x1(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function fe(t,e=""){let n=Ce(),r=St(),i=t+In,o=r.firstCreatePass?il(r,i,1,e,null):r.data[i],s=N1(r,n,o,e,t);n[i]=s,Pp()&&Gp(r,n,s,o),Xs(o,!1)}var N1=(t,e,n,r,i)=>(Op(!0),gN(e[Xe],r));function fi(t){return wD("",t,""),fi}function wD(t,e,n){let r=Ce(),i=yD(r,t,e,n);return i!==Pr&&iP(r,Eo(),i),wD}function Dn(t,e,n){gD(e)&&(e=e());let r=Ce(),i=Mp();if(ta(r,i,e)){let o=St(),s=Np();Qp(o,s,r,t,e,r[Xe],n,!1)}return Dn}function Zn(t,e){let n=gD(t);return n&&t.set(e),n}function bn(t,e){let n=Ce(),r=St(),i=At();return vD(r,n,n[Xe],i,t,e),bn}function P1(t,e,n){let r=St();if(r.firstCreatePass){let i=Sr(t);hp(n,r.data,r.blueprint,i,!0),hp(e,r.data,r.blueprint,i,!1)}}function hp(t,e,n,r,i){if(t=It(t),Array.isArray(t))for(let o=0;o<t.length;o++)hp(t[o],e,n,r,i);else{let o=St(),s=Ce(),a=At(),u=co(t)?t:It(t.provide),l=FE(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(co(t)||!t.multi){let y=new ai(l,i,$),S=Nf(u,e,i?h:h+m,p);S===-1?(Gf(ku(a,s),o,u),xf(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[S]=y,s[S]=y)}else{let y=Nf(u,e,h+m,p),S=Nf(u,e,h,h+m),x=y>=0&&n[y],R=S>=0&&n[S];if(i&&!R||!i&&!x){Gf(ku(a,s),o,u);let L=F1(i?k1:O1,n.length,i,r,l);!i&&R&&(n[S].providerFactory=L),xf(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(L),s.push(L)}else{let L=ID(n[i?S:y],l,!i&&r);xf(o,t,y>-1?y:S,L)}!i&&r&&R&&n[S].componentProviders++}}}function xf(t,e,n,r){let i=co(e),o=YR(e);if(i||o){let u=(o?It(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function ID(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Nf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function O1(t,e,n,r){return fp(this.multi,[])}function k1(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=fo(n,n[ae],this.providerFactory.index,r);o=a.slice(0,s),fp(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],fp(i,o);return o}function fp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function F1(t,e,n,r,i){let o=new ai(t,n,$);return o.multi=[],o.index=e,o.componentProviders=0,ID(o,i,r&&!n),o}function cl(t,e=[]){return n=>{n.providersResolver=(r,i)=>P1(r,i?i(t):t,e)}}var L1=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=PE(!1,r.type),o=i.length>0?eg([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=B({token:e,providedIn:"environment",factory:()=>new e(J(qt))});let t=e;return t})();function Ve(t){ea("NgStandalone"),t.getStandaloneInjector=e=>e.get(L1).getOrCreateStandaloneInjector(t)}function So(t,e,n,r){return ED(Ce(),t0(),t,e,n,r)}function V1(t,e){let n=t[e];return n===Pr?void 0:n}function ED(t,e,n,r,i,o){let s=e+n;return ta(t,s,i)?r1(t,s+1,o?r.call(o,i):r(i)):V1(t,s+1)}function DD(t,e){let n=St(),r,i=t+In;n.firstCreatePass?(r=j1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=ni(r.type,!0)),s,a=Tt($);try{let u=Ou(!1),l=o();return Ou(u),x1(n,Ce(),i,l),l}finally{Tt(a)}}function j1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function bD(t,e,n){let r=t+In,i=Ce(),o=ux(i,r);return U1(i,r)?ED(i,t0(),e,o.transform,n,o):o.transform(n)}function U1(t,e){return t[ae].data[e].pure}var ul=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var CD=new W("");function Or(t){return!!t&&typeof t.then=="function"}function rg(t){return!!t&&typeof t.subscribe=="function"}var ll=new W(""),TD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=k(ll,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Or(s))r.push(s);else if(rg(s)){let a=new Promise((u,l)=>{s.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ig=new W("");function B1(){Xw(()=>{throw new q(600,!1)})}function $1(t){return t.isBoundToModule}var H1=10;function z1(t,e,n){try{let r=n();return Or(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var pi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(Xx),this.afterRenderEffectManager=k(fD),this.zonelessEnabled=k(Xp),this.externalTestViews=new Set,this.beforeRender=new ot,this.afterTick=new ot,this.componentTypes=[],this.components=[],this.isStable=k(bo).hasPendingTasks.pipe(se(r=>!r)),this._injector=k(qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Bu;if(!this._injector.get(TD).done){let y=!o&&ME(r),S=!1;throw new q(405,S)}let a;o?a=r:a=this._injector.get(po).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=$1(a)?void 0:this._injector.get(Rr),l=i||a.selector,h=a.create(Ar.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(CD,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),wu(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new q(101,!1);let i=me(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,me(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(go,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<H1;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:u,notifyErrorHandler:l}of this._views)q1(u,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:u})=>Gs(u))&&(s.execute(),!this.allViews.some(({_lView:u})=>Gs(u))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;wu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ig,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>wu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function q1(t,e,n,r){if(!n&&!Gs(t))return;aD(t,e,n&&!r?0:1)}var pp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},og=(()=>{let e=class e{compileModuleSync(r){return new up(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=RE(r),s=k0(o.declarations).reduce((a,u)=>{let l=ri(u);return l&&a.push(new Ks(l)),a},[]);return new pp(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var G1=(()=>{let e=class e{constructor(){this.zone=k(Ze),this.changeDetectionScheduler=k(Ws),this.applicationRef=k(pi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),W1=new W("",{factory:()=>!1});function SD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ze(ce(O({},MD()),{scheduleInRootZone:n})),[{provide:Ze,useFactory:t},{provide:ao,multi:!0,useFactory:()=>{let r=k(G1,{optional:!0});return()=>r.initialize()}},{provide:ao,multi:!0,useFactory:()=>{let r=k(K1);return()=>{r.initialize()}}},e===!0?{provide:dD,useValue:!0}:[],{provide:hD,useValue:n??I0}]}function AD(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=SD({ngZoneFactory:()=>{let i=MD(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ea("NgZone_CoalesceEvent"),new Ze(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Qu([{provide:W1,useValue:!0},{provide:Xp,useValue:!1},r])}function MD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var K1=(()=>{let e=class e{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=k(Ze),this.pendingTasks=k(bo)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ze.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ze.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Q1=(()=>{let e=class e{constructor(){this.appRef=k(pi),this.taskService=k(bo),this.ngZone=k(Ze),this.zonelessEnabled=k(Xp),this.disableScheduling=k(dD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Lu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(hD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jf||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?zI:D0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick(this.shouldRefreshViews))):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick(this.shouldRefreshViews)))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Lu+this.angularZoneId))}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Y1(){return typeof $localize<"u"&&$localize.locale||qu}var sg=new W("",{providedIn:"root",factory:()=>k(sg,ie.Optional|ie.SkipSelf)||Y1()});var RD=new W("");function mu(t){return!!t.platformInjector}function J1(t){let e=mu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ze);return n.run(()=>{mu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Mr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),mu(t)){let o=()=>e.destroy(),s=t.platformInjector.get(RD);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else t.moduleRef.onDestroy(()=>{wu(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return z1(r,n,()=>{let o=e.get(TD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(sg,qu);if(A1(s||qu),mu(t)){let a=e.get(pi);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return Z1(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Z1(t,e){let n=t.injector.get(pi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new q(-403,!1);e.push(t)}var Iu=null;function X1(t=[],e){return Ar.create({name:e,providers:[{provide:Yu,useValue:"platform"},{provide:RD,useValue:new Set([()=>Iu=null])},...t]})}function eO(t=[]){if(Iu)return Iu;let e=X1(t);return Iu=e,B1(),tO(e),e}function tO(t){t.get(Up,null)?.forEach(n=>n())}var kr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nO;let t=e;return t})();function nO(t){return rO(At(),Ce(),(t&16)===16)}function rO(t,e,n){if(Zu(t)&&!n){let r=xr(t.index,e);return new ui(r,r)}else if(t.type&175){let r=e[wn];return new ui(r,e)}return null}var gp=class{constructor(){}supports(e){return mD(e)}create(e){return new mp(e)}},iO=(t,e)=>e,mp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||iO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<cE(r,i,o)?n:r,a=cE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;h<=S&&S<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!mD(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,t1(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new yp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Gu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},yp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},vp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Gu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new vp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function cE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function uE(){return new ag([new gp])}var ag=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||uE()),deps:[[e,new wE,new Ep]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new q(901,!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:uE});let t=e;return t})();function xD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=eO(r),o=[SD({}),{provide:Ws,useExisting:Q1},...n||[]],s=new Hu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return J1({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var ND=new W("");function dl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function hl(t,e){ea("NgSignals");let n=Yw(t);return e?.equal&&(n[qn].equal=e.equal),n}function Cn(t){let e=me(null);try{return t()}finally{me(e)}}var VD=null;function Xn(){return VD}function jD(t){VD??=t}var fl=class{};var Ft=new W(""),UD=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(aO),providedIn:"platform"});let t=e;return t})();var aO=(()=>{let e=class e extends UD{constructor(){super(),this._doc=k(Ft),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xn().getBaseHref(this._doc)}onPopState(r){let i=Xn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Xn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function BD(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function PD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function gi(t){return t&&t[0]!=="?"?"?"+t:t}var gl=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k($D),providedIn:"root"});let t=e;return t})(),cO=new W(""),$D=(()=>{let e=class e extends gl{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(Ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return BD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+gi(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+gi(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+gi(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(J(UD),J(cO,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var na=(()=>{let e=class e{constructor(r){this._subject=new Pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=dO(PD(OD(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+gi(i))}normalize(r){return e.stripTrailingSlash(lO(this._basePath,OD(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+gi(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+gi(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=gi,e.joinWithSlash=BD,e.stripTrailingSlash=PD,e.\u0275fac=function(i){return new(i||e)(J(gl))},e.\u0275prov=B({token:e,factory:()=>uO(),providedIn:"root"});let t=e;return t})();function uO(){return new na(J(gl))}function lO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function OD(t){return t.replace(/\/index.html$/,"")}function dO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function HD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ug=/\s+/,kD=[],ml=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=kD,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(ug):kD}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(ug):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(ug).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)($(Nr),$(di))},e.\u0275dir=kt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var lg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yl=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new lg(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),FD(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);FD(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(To),$(sl),$(ag))},e.\u0275dir=kt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function FD(t,e){t.context.$implicit=e.item}var Tn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new dg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){LD("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){LD("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(To),$(sl))},e.\u0275dir=kt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),dg=class{constructor(){this.$implicit=null,this.ngIf=null}};function LD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Et(e)}'.`)}function hO(t,e){return new q(2100,!1)}var hg=class{createSubscription(e,n){return Cn(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Cn(()=>e.unsubscribe())}},fg=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},fO=new fg,pO=new hg,zD=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Or(r))return fO;if(rg(r))return pO;throw hO(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)($(kr,16))},e.\u0275pipe=TE({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var qD="browser",gO="server";function gg(t){return t===gO}var pl=class{};var vg=class extends fl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_g=class t extends vg{static makeCurrent(){jD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=mO();return n==null?null:yO(n)}resetBaseElement(){ra=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return HD(document.cookie,e)}},ra=null;function mO(){return ra=ra||document.querySelector("base"),ra?ra.getAttribute("href"):null}function yO(t){return new URL(t,document.baseURI).pathname}var vO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),vl=new W(""),QD=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(J(vl),J(Ze))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),ia=class{constructor(e){this._doc=e}},mg="ng-app-id",YD=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gg(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${mg}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(mg),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(mg,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(J(Ft),J(jp),J(Bp,8),J(Co))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),yg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ig=/%COMP%/g,JD="%COMP%",_O=`_nghost-${JD}`,wO=`_ngcontent-${JD}`,IO=!0,EO=new W("",{providedIn:"root",factory:()=>IO});function DO(t){return wO.replace(Ig,t)}function bO(t){return _O.replace(Ig,t)}function ZD(t,e){return e.map(n=>n.replace(Ig,t))}var GD=(()=>{let e=class e{constructor(r,i,o,s,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=gg(u),this.defaultRenderer=new oa(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===vn.ShadowDom&&(i=ce(O({},i),{encapsulation:vn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof _l?o.applyToHost(r):o instanceof sa&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case vn.Emulated:s=new _l(l,h,i,this.appId,p,a,u,m);break;case vn.ShadowDom:return new wg(l,h,r,i,a,u,this.nonce,m);default:s=new sa(l,h,i,p,a,u,m);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(J(QD),J(YD),J(jp),J(EO),J(Ft),J(Co),J(Ze),J(Bp))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),oa=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(yg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(WD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(WD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=yg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=yg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Kn.DashCase|Kn.Important)?e.style.setProperty(n,r,i&Kn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Kn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Xn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function WD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var wg=class extends oa{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ZD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},sa=class extends oa{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?ZD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_l=class extends sa{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=DO(l),this.hostAttr=bO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},CO=(()=>{let e=class e extends ia{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(J(Ft))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),TO=(()=>{let e=class e extends ia{constructor(r){super(r),this.delegate=k(ND,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(J(Ft))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),KD=["alt","control","meta","shift"],SO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},MO=(()=>{let e=class e extends ia{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),KD.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=SO[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),KD.forEach(a=>{if(a!==o){let u=AO[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(J(Ft))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function XD(t,e){return xD(O({rootComponent:t},RO(e)))}function RO(t){return{appProviders:[...kO,...t?.providers??[]],platformProviders:OO}}function xO(){_g.makeCurrent()}function NO(){return new Mr}function PO(){return R0(document),document}var OO=[{provide:Co,useValue:qD},{provide:Up,useValue:xO,multi:!0},{provide:Ft,useFactory:PO,deps:[]}];var kO=[{provide:Yu,useValue:"root"},{provide:Mr,useFactory:NO,deps:[]},{provide:vl,useClass:CO,multi:!0,deps:[Ft,Ze,Co]},{provide:vl,useClass:MO,multi:!0,deps:[Ft]},{provide:vl,useClass:TO,multi:!0},GD,YD,QD,{provide:go,useExisting:GD},{provide:pl,useClass:vO,deps:[]},[]];var eb=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(J(Ft))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var re="primary",Da=Symbol("RouteTitle"),Tg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Po(t){return new Tg(t)}function VO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function jO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Sn(t[n],e[n]))return!1;return!0}function Sn(t,e){let n=t?Sg(t):void 0,r=e?Sg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!cb(t[i],e[i]))return!1;return!0}function Sg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function cb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function ub(t){return t.length>0?t[t.length-1]:null}function Fr(t){return hf(t)?t:Or(t)?Be(Promise.resolve(t)):ee(t)}var UO={exact:db,subset:hb},lb={exact:BO,subset:$O,ignored:()=>!0};function tb(t,e,n){return UO[n.paths](t.root,e.root,n.matrixParams)&&lb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function BO(t,e){return Sn(t,e)}function db(t,e,n){if(!yi(t.segments,e.segments)||!El(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!db(t.children[r],e.children[r],n))return!1;return!0}function $O(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>cb(t[n],e[n]))}function hb(t,e,n){return fb(t,e,e.segments,n)}function fb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!yi(i,n)||e.hasChildren()||!El(i,n,r))}else if(t.segments.length===n.length){if(!yi(t.segments,n)||!El(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!hb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!yi(t.segments,i)||!El(t.segments,i,r)||!t.children[re]?!1:fb(t.children[re],e,o,r)}}function El(t,e,n){return e.every((r,i)=>lb[n](t[i].parameters,r.parameters))}var tr=class{constructor(e=new be([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){return qO.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dl(this)}},mi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Po(this.parameters),this._parameterMap}toString(){return gb(this)}};function HO(t,e){return yi(t,e)&&t.every((n,r)=>Sn(n.parameters,e[r].parameters))}function yi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function zO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var Xg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new fa,providedIn:"root"});let t=e;return t})(),fa=class{parse(e){let n=new Mg(e);return new tr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${aa(e.root,!0)}`,r=KO(e.queryParams),i=typeof e.fragment=="string"?`#${GO(e.fragment)}`:"";return`${n}${r}${i}`}},qO=new fa;function Dl(t){return t.segments.map(e=>gb(e)).join("/")}function aa(t,e){if(!t.hasChildren())return Dl(t);if(e){let n=t.children[re]?aa(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${aa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=zO(t,(r,i)=>i===re?[aa(t.children[re],!1)]:[`${i}:${aa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Dl(t)}/${n[0]}`:`${Dl(t)}/(${n.join("//")})`}}function pb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wl(t){return pb(t).replace(/%3B/gi,";")}function GO(t){return encodeURI(t)}function Ag(t){return pb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bl(t){return decodeURIComponent(t)}function nb(t){return bl(t.replace(/\+/g,"%20"))}function gb(t){return`${Ag(t.path)}${WO(t.parameters)}`}function WO(t){return Object.entries(t).map(([e,n])=>`;${Ag(e)}=${Ag(n)}`).join("")}function KO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${wl(n)}=${wl(i)}`).join("&"):`${wl(n)}=${wl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var QO=/^[^\/()?;#]+/;function Eg(t){let e=t.match(QO);return e?e[0]:""}var YO=/^[^\/()?;=#]+/;function JO(t){let e=t.match(YO);return e?e[0]:""}var ZO=/^[^=?&#]+/;function XO(t){let e=t.match(ZO);return e?e[0]:""}var ek=/^[^&#]+/;function tk(t){let e=t.match(ek);return e?e[0]:""}var Mg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new be(e,n)),r}parseSegment(){let e=Eg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new mi(bl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=JO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Eg(this.remaining);i&&(r=i,this.capture(r))}e[bl(n)]=bl(r)}parseQueryParam(e){let n=XO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=tk(this.remaining);s&&(r=s,this.capture(r))}let i=nb(n),o=nb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Eg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[re]:new be([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function mb(t){return t.segments.length>0?new be([],{[re]:t}):t}function yb(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=yb(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new be(t.segments,e);return nk(n)}function nk(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new be(t.segments.concat(e.segments),e.children)}return t}function pa(t){return t instanceof tr}function rk(t,e,n=null,r=null){let i=vb(t);return _b(i,e,n,r)}function vb(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new be(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=mb(r);return e??i}function _b(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Dg(i,i,i,n,r);let o=ik(e);if(o.toRoot())return Dg(i,i,new be([],{}),n,r);let s=ok(o,i,t),a=s.processChildren?la(s.segmentGroup,s.index,o.commands):Ib(s.segmentGroup,s.index,o.commands);return Dg(i,s.segmentGroup,a,n,r)}function Cl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ga(t){return typeof t=="object"&&t!=null&&t.outlets}function Dg(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=wb(t,e,n);let a=mb(yb(s));return new tr(a,o,i)}function wb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=wb(o,e,n)}),new be(t.segments,r)}var Tl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Cl(r[0]))throw new q(4003,!1);let i=r.find(ga);if(i&&i!==ub(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ik(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Tl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Tl(n,e,r)}var Ro=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function ok(t,e,n){if(t.isAbsolute)return new Ro(e,!0,0);if(!n)return new Ro(e,!1,NaN);if(n.parent===null)return new Ro(n,!0,0);let r=Cl(t.commands[0])?0:1,i=n.segments.length-1+r;return sk(n,i,t.numberOfDoubleDots)}function sk(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new Ro(r,!1,i-o)}function ak(t){return ga(t[0])?t[0].outlets:{[re]:t}}function Ib(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return la(t,e,n);let r=ck(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new be(t.segments.slice(0,r.pathIndex),{});return o.children[re]=new be(t.segments.slice(r.pathIndex),t.children),la(o,0,i)}else return r.match&&i.length===0?new be(t.segments,{}):r.match&&!t.hasChildren()?Rg(t,e,n):r.match?la(t,0,i):Rg(t,e,n)}function la(t,e,n){if(n.length===0)return new be(t.segments,{});{let r=ak(n),i={};if(Object.keys(r).some(o=>o!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let o=la(t.children[re],e,n);return new be(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Ib(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new be(t.segments,i)}}function ck(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ga(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ib(u,l,s))return o;r+=2}else{if(!ib(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Rg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ga(o)){let u=uk(o.outlets);return new be(r,u)}if(i===0&&Cl(n[0])){let u=t.segments[e];r.push(new mi(u.path,rb(n[0]))),i++;continue}let s=ga(o)?o.outlets[re]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Cl(a)?(r.push(new mi(s,rb(a))),i+=2):(r.push(new mi(s,{})),i++)}return new be(r,{})}function uk(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Rg(new be([],{}),0,r))}),e}function rb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ib(t,e,n){return t==n.path&&Sn(e,n.parameters)}var da="imperative",at=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(at||{}),Gt=class{constructor(e,n){this.id=e,this.url=n}},ma=class extends Gt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cn=class extends Gt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Vt||{}),xg=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(xg||{}),er=class extends Gt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},vi=class extends Gt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},ya=class extends Gt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Sl=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ng=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pg=class extends Gt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Og=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kg=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Lg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vg=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jg=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ug=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bg=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var va=class{},Oo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function lk(t,e){return t.providers&&!t._injector&&(t._injector=eg(t.providers,e,`Route: ${t.path}`)),t._injector??e}function an(t){return t.outlet||re}function dk(t,e){let n=t.filter(r=>an(r)===e);return n.push(...t.filter(r=>an(r)!==e)),n}function ba(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var $g=class{get injector(){return ba(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ol(this.rootInjector),this.attachRef=null}},Ol=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new $g(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(J(qt))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Al=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Hg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Hg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=zg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zg(e,this._root).map(n=>n.value)}};function Hg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Hg(t,n);if(r)return r}return null}function zg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=zg(t,n);if(r.length)return r.unshift(e),r}return[]}var Lt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Mo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ml=class extends Al{constructor(e,n){super(e),this.snapshot=n,em(this,e)}toString(){return this.snapshot.toString()}};function Eb(t){let e=hk(t),n=new Ue([new mi("",{})]),r=new Ue({}),i=new Ue({}),o=new Ue({}),s=new Ue(""),a=new An(n,r,o,s,i,re,t,e.root);return a.snapshot=e.root,new Ml(new Lt(a,[]),e)}function hk(t){let e={},n={},r={},i="",o=new xo([],e,r,i,n,re,t,null,{});return new xl("",new Lt(o,[]))}var An=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(se(l=>l[Da]))??ee(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>Po(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>Po(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),t.params),data:O(O({},e.data),t.data),resolve:O(O(O(O({},t.data),e.data),i?.data),t._resolvedData)}:r={params:O({},t.params),data:O({},t.data),resolve:O(O({},t.data),t._resolvedData??{})},i&&bb(i)&&(r.resolve[Da]=i.title),r}var xo=class{get title(){return this.data?.[Da]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Po(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},xl=class extends Al{constructor(e,n){super(n),this.url=e,em(this,n)}toString(){return Db(this._root)}};function em(t,e){e.value._routerState=t,e.children.forEach(n=>em(t,n))}function Db(t){let e=t.children.length>0?` { ${t.children.map(Db).join(", ")} } `:"";return`${t.value}${e}`}function bg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Sn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Sn(e.params,n.params)||t.paramsSubject.next(n.params),jO(e.url,n.url)||t.urlSubject.next(n.url),Sn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function qg(t,e){let n=Sn(t.params,e.params)&&HO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||qg(t.parent,e.parent))}function bb(t){return typeof t.title=="string"||t.title===null}var tm=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new Pe,this.deactivateEvents=new Pe,this.attachEvents=new Pe,this.detachEvents=new Pe,this.parentContexts=k(Ol),this.location=k(To),this.changeDetector=k(kr),this.inputBinder=k(nm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Gg(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=kt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Io]});let t=e;return t})(),Gg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===An?this.route:e===Ol?this.childContexts:this.parent.get(e,n)}},nm=new W("");function fk(t,e,n){let r=_a(t,e._root,n?n._root:void 0);return new Ml(r,e)}function _a(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=pk(t,e,n);return new Lt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>_a(t,a)),s}}let r=gk(e.value),i=e.children.map(o=>_a(t,o));return new Lt(r,i)}}function pk(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return _a(t,r,i);return _a(t,r)})}function gk(t){return new An(new Ue(t.url),new Ue(t.params),new Ue(t.queryParams),new Ue(t.fragment),new Ue(t.data),t.outlet,t.component,t)}var wa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Cb="ngNavigationCancelingError";function Nl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=pa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Tb(!1,Vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Tb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Cb]=!0,n.cancellationCode=e,n}function mk(t){return Sb(t)&&pa(t.url)}function Sb(t){return!!t&&t[Cb]}var yk=(t,e,n,r)=>se(i=>(new Wg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Wg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),bg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Mo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Mo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Bg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new jg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(bg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),bg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Pl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},No=class{constructor(e,n){this.component=e,this.route=n}};function vk(t,e,n){let r=t._root,i=e?e._root:null;return ca(r,i,n,[r.value])}function _k(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Fo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!fE(t)?t:e.get(t):r}function ca(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Mo(e);return t.children.forEach(s=>{wk(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ha(a,n.getContext(s),i)),i}function wk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Ik(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Pl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ca(t,e,a?a.children:null,r,i):ca(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new No(a.outlet.component,s))}else s&&ha(e,a,i),i.canActivateChecks.push(new Pl(r)),o.component?ca(t,null,a?a.children:null,r,i):ca(t,null,n,r,i);return i}function Ik(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!yi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!yi(t.url,e.url)||!Sn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qg(t,e)||!Sn(t.queryParams,e.queryParams);case"paramsChange":default:return!qg(t,e)}}function ha(t,e,n){let r=Mo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ha(s,e.children.getContext(o),n):ha(s,null,n):ha(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new No(e.outlet.component,i)):n.canDeactivateChecks.push(new No(null,i)):n.canDeactivateChecks.push(new No(null,i))}function Ca(t){return typeof t=="function"}function Ek(t){return typeof t=="boolean"}function Dk(t){return t&&Ca(t.canLoad)}function bk(t){return t&&Ca(t.canActivate)}function Ck(t){return t&&Ca(t.canActivateChild)}function Tk(t){return t&&Ca(t.canDeactivate)}function Sk(t){return t&&Ca(t.canMatch)}function Ab(t){return t instanceof Gn||t?.name==="EmptyError"}var Il=Symbol("INITIAL_VALUE");function ko(){return Xt(t=>lu(t.map(e=>e.pipe(Wn(1),vf(Il)))).pipe(se(e=>{for(let n of e)if(n!==!0){if(n===Il)return Il;if(n===!1||Ak(n))return n}return!0}),Zt(e=>e!==Il),Wn(1)))}function Ak(t){return pa(t)||t instanceof wa}function Mk(t,e){return Je(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ee(ce(O({},n),{guardsResult:!0})):Rk(s,r,i,t).pipe(Je(a=>a&&Ek(a)?xk(r,o,t,e):ee(a)),se(a=>ce(O({},n),{guardsResult:a})))})}function Rk(t,e,n,r){return Be(t).pipe(Je(i=>Fk(i.component,i.route,n,e,r)),gn(i=>i!==!0,!0))}function xk(t,e,n,r){return Be(e).pipe(Xi(i=>Zi(Pk(i.route.parent,r),Nk(i.route,r),kk(t,i.path,n),Ok(t,i.route,n))),gn(i=>i!==!0,!0))}function Nk(t,e){return t!==null&&e&&e(new Ug(t)),ee(!0)}function Pk(t,e){return t!==null&&e&&e(new Vg(t)),ee(!0)}function Ok(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>du(()=>{let s=ba(e)??n,a=Fo(o,s),u=bk(a)?a.canActivate(e,t):Qn(s,()=>a(e,t));return Fr(u).pipe(gn())}));return ee(i).pipe(ko())}function kk(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>_k(s)).filter(s=>s!==null).map(s=>du(()=>{let a=s.guards.map(u=>{let l=ba(s.node)??n,h=Fo(u,l),p=Ck(h)?h.canActivateChild(r,t):Qn(l,()=>h(r,t));return Fr(p).pipe(gn())});return ee(a).pipe(ko())}));return ee(o).pipe(ko())}function Fk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=ba(e)??i,l=Fo(a,u),h=Tk(l)?l.canDeactivate(t,e,n,r):Qn(u,()=>l(t,e,n,r));return Fr(h).pipe(gn())});return ee(s).pipe(ko())}function Lk(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=Fo(s,t),u=Dk(a)?a.canLoad(e,n):Qn(t,()=>a(e,n));return Fr(u)});return ee(o).pipe(ko(),Mb(r))}function Mb(t){return cf(st(e=>{if(typeof e!="boolean")throw Nl(t,e)}),se(e=>e===!0))}function Vk(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=Fo(s,t),u=Sk(a)?a.canMatch(e,n):Qn(t,()=>a(e,n));return Fr(u)});return ee(o).pipe(ko(),Mb(r))}var Ia=class{constructor(e){this.segmentGroup=e||null}},Ea=class extends Error{constructor(e){super(),this.urlTree=e}};function Ao(t){return Ji(new Ia(t))}function jk(t){return Ji(new q(4e3,!1))}function Uk(t){return Ji(Tb(!1,Vt.GuardRejected))}var Kg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[re])return jk(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:S,title:x}=i,R=Qn(o,()=>a({params:y,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:x}));if(R instanceof tr)throw new Ea(R);n=R}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Ea(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new tr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new be(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Qg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bk(t,e,n,r,i){let o=rm(t,e,n);return o.matched?(r=lk(e,r),Vk(r,e,n,i).pipe(se(s=>s===!0?o:O({},Qg)))):ee(o)}function rm(t,e,n){if(e.path==="**")return $k(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?O({},Qg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||VO)(n,t,e);if(!i)return O({},Qg);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function $k(t){return{matched:!0,parameters:t.length>0?ub(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ob(t,e,n,r){return n.length>0&&qk(t,n,r)?{segmentGroup:new be(e,zk(r,new be(n,t.children))),slicedSegments:[]}:n.length===0&&Gk(t,n,r)?{segmentGroup:new be(t.segments,Hk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function Hk(t,e,n,r){let i={};for(let o of n)if(kl(t,e,o)&&!r[an(o)]){let s=new be([],{});i[an(o)]=s}return O(O({},r),i)}function zk(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&an(r)!==re){let i=new be([],{});n[an(r)]=i}return n}function qk(t,e,n){return n.some(r=>kl(t,e,r)&&an(r)!==re)}function Gk(t,e,n){return n.some(r=>kl(t,e,r))}function kl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Wk(t,e,n,r){return an(t)!==r&&(r===re||!kl(e,n,t))?!1:rm(e,t,n).matched}function Kk(t,e,n){return e.length===0&&!t.children[n]}var Yg=class{};function Qk(t,e,n,r,i,o,s="emptyOnly"){return new Jg(t,e,n,r,i,s,o).recognize()}var Yk=31,Jg=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Kg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=ob(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:n,rootSnapshot:r})=>{let i=new Lt(r,n),o=new xl("",i),s=rk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new xo([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,n).pipe(se(r=>({children:r,rootSnapshot:n})),Ir(r=>{if(r instanceof Ea)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ia?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(se(s=>s instanceof Lt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Be(o).pipe(Xi(s=>{let a=r.children[s],u=dk(n,s);return this.processSegmentGroup(e,u,a,s,i)}),yf((s,a)=>(s.push(...a),s)),Er(null),mf(),Je(s=>{if(s===null)return Ao(r);let a=Rb(s);return Jk(a),ee(a)}))}processSegment(e,n,r,i,o,s,a){return Be(n).pipe(Xi(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Ir(l=>{if(l instanceof Ia)return ee(null);throw l}))),gn(u=>!!u),Ir(u=>{if(Ab(u))return Kk(r,i,o)?ee(new Yg):Ao(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Wk(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Ao(i):Ao(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=rm(n,i,o);if(!u)return Ao(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Yk&&(this.allowRedirects=!1));let y=new xo(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,sb(i),an(i),i.component??i._loadedComponent??null,i,ab(i)),S=Rl(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let x=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,x).pipe(Je(R=>this.processSegment(e,r,n,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=Bk(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Xt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Xt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new xo(m,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,sb(r),an(r),r.component??r._loadedComponent??null,r,ab(r)),x=Rl(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(x.params),S.data=Object.freeze(x.data);let{segmentGroup:R,slicedSegments:L}=ob(n,m,y,l);if(L.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(se(H=>new Lt(S,H)));if(l.length===0&&L.length===0)return ee(new Lt(S,[]));let G=an(r)===o;return this.processSegment(h,l,R,L,G?re:o,!0,S).pipe(se(H=>new Lt(S,H instanceof Lt?[H]:[])))}))):Ao(n)))}getChildConfig(e,n,r){return n.children?ee({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ee({routes:n._loadedRoutes,injector:n._loadedInjector}):Lk(e,n,r,this.urlSerializer).pipe(Je(i=>i?this.configLoader.loadChildren(e,n).pipe(st(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Uk(n))):ee({routes:[],injector:e})}};function Jk(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function Zk(t){let e=t.value.routeConfig;return e&&e.path===""}function Rb(t){let e=[],n=new Set;for(let r of t){if(!Zk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Rb(r.children);e.push(new Lt(r.value,i))}return e.filter(r=>!n.has(r))}function sb(t){return t.data||{}}function ab(t){return t.resolve||{}}function Xk(t,e,n,r,i,o){return Je(s=>Qk(t,e,n,r,s.extractedUrl,i,o).pipe(se(({state:a,tree:u})=>ce(O({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function eF(t,e){return Je(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ee(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of xb(u))s.add(l);let a=0;return Be(s).pipe(Xi(u=>o.has(u)?tF(u,r,t,e):(u.data=Rl(u,u.parent,t).resolve,ee(void 0))),st(()=>a++),eo(1),Je(u=>a===s.size?ee(n):Ot))})}function xb(t){let e=t.children.map(n=>xb(n)).flat();return[t,...e]}function tF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!bb(i)&&(o[Da]=i.title),nF(o,t,e,r).pipe(se(s=>(t._resolvedData=s,t.data=Rl(t,t.parent,n).resolve,null)))}function nF(t,e,n,r){let i=Sg(t);if(i.length===0)return ee({});let o={};return Be(i).pipe(Je(s=>rF(t[s],e,n,r).pipe(gn(),st(a=>{if(a instanceof wa)throw Nl(new fa,a);o[s]=a}))),eo(1),gf(o),Ir(s=>Ab(s)?Ot:Ji(s)))}function rF(t,e,n,r){let i=ba(e)??r,o=Fo(t,i),s=o.resolve?o.resolve(e,n):Qn(i,()=>o(e,n));return Fr(s)}function Cg(t){return Xt(e=>{let n=t(e);return n?Be(n).pipe(se(()=>e)):ee(e)})}var Nb=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===re);return i}getResolvedTitleForRoute(r){return r.data[Da]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(iF),providedIn:"root"});let t=e;return t})(),iF=(()=>{let e=class e extends Nb{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(J(eb))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),im=new W("",{providedIn:"root",factory:()=>({})}),oF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Le({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ve],decls:1,vars:0,template:function(i,o){i&1&&xe(0,"router-outlet")},dependencies:[tm],encapsulation:2});let t=e;return t})();function om(t){let e=t.children&&t.children.map(om),n=e?ce(O({},t),{children:e}):O({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=oF),n}var sm=new W(""),sF=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(og)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Fr(r.loadComponent()).pipe(se(Pb),st(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),js(()=>{this.componentLoaders.delete(r)})),o=new Yi(i,()=>new ot).pipe(Qi());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ee({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=aF(i,this.compiler,r,this.onLoadEndListener).pipe(js(()=>{this.childrenLoaders.delete(i)})),a=new Yi(s,()=>new ot).pipe(Qi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aF(t,e,n,r){return Fr(t.loadChildren()).pipe(se(Pb),Je(i=>i instanceof Qs||Array.isArray(i)?ee(i):Be(e.compileModuleAsync(i))),se(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(sm,[],{optional:!0,self:!0}).flat()),{routes:s.map(om),injector:o}}))}function cF(t){return t&&typeof t=="object"&&"default"in t}function Pb(t){return cF(t)?t.default:t}var am=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(uF),providedIn:"root"});let t=e;return t})(),uF=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lF=new W("");var dF=new W(""),hF=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ot,this.transitionAbortSubject=new ot,this.configLoader=k(sF),this.environmentInjector=k(qt),this.urlSerializer=k(Xg),this.rootContexts=k(Ol),this.location=k(na),this.inputBindingEnabled=k(nm,{optional:!0})!==null,this.titleStrategy=k(Nb),this.options=k(im,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(am),this.createViewTransition=k(lF,{optional:!0}),this.navigationErrorHandler=k(dF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Fg(o)),i=o=>this.events.next(new Lg(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ce(O(O({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ue({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:da,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zt(s=>s.id!==0),se(s=>ce(O({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xt(s=>{let a=!1,u=!1;return ee(s).pipe(Xt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Vt.SupersededByNewNavigation),Ot;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ce(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new vi(l.id,this.urlSerializer.serialize(l.rawUrl),m,xg.IgnoredSameUrlNavigation)),l.resolve(!1),Ot}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ee(l).pipe(Xt(m=>{let y=this.transitions?.getValue();return this.events.next(new ma(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Ot:Promise.resolve(m)}),Xk(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),st(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=ce(O({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new Sl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:S,restoredState:x,extras:R}=l,L=new ma(m,this.urlSerializer.serialize(y),S,x);this.events.next(L);let G=Eb(this.rootComponentType).snapshot;return this.currentTransition=s=ce(O({},l),{targetSnapshot:G,urlAfterRedirects:y,extras:ce(O({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,ee(s)}else{let m="";return this.events.next(new vi(l.id,this.urlSerializer.serialize(l.extractedUrl),m,xg.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ot}}),st(l=>{let h=new Ng(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),se(l=>(this.currentTransition=s=ce(O({},l),{guards:vk(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),Mk(this.environmentInjector,l=>this.events.next(l)),st(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Nl(this.urlSerializer,l.guardsResult);let h=new Pg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Zt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Vt.GuardRejected),!1)),Cg(l=>{if(l.guards.canActivateChecks.length)return ee(l).pipe(st(h=>{let p=new Og(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),Xt(h=>{let p=!1;return ee(h).pipe(eF(this.paramsInheritanceStrategy,this.environmentInjector),st({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Vt.NoDataFromResolver)}}))}),st(h=>{let p=new kg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Cg(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(st(y=>{p.component=y}),se(()=>{})));for(let y of p.children)m.push(...h(y));return m};return lu(h(l.targetSnapshot.root)).pipe(Er(null),Wn(1))}),Cg(()=>this.afterPreactivation()),Xt(()=>{let{currentSnapshot:l,targetSnapshot:h}=s,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Be(p).pipe(se(()=>s)):ee(s)}),se(l=>{let h=fk(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ce(O({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),st(()=>{this.events.next(new va)}),yk(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Wn(1),st({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),_f(this.transitionAbortSubject.pipe(st(l=>{throw l}))),js(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Vt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ir(l=>{if(u=!0,Sb(l))this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),mk(l)?this.events.next(new Oo(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let h=new ya(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let p=Qn(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof wa){let{message:m,cancellationCode:y}=Nl(this.urlSerializer,p);this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),m,y)),this.events.next(new Oo(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let m=r.errorHandler(l);s.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return Ot}))}))}cancelNavigationTransition(r,i,o){let s=new er(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fF(t){return t!==da}var pF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(gF),providedIn:"root"});let t=e;return t})(),Zg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},gF=(()=>{let e=class e extends Zg{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Do(e)))(o||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ob=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(mF),providedIn:"root"});let t=e;return t})(),mF=(()=>{let e=class e extends Ob{constructor(){super(...arguments),this.location=k(na),this.urlSerializer=k(Xg),this.options=k(im,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(am),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new tr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Eb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ma)this.stateMemento=this.createStateMemento();else if(r instanceof vi)this.rawUrlTree=i.initialUrl;else if(r instanceof Sl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof va?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof er&&(r.code===Vt.GuardRejected||r.code===Vt.NoDataFromResolver)?this.restoreHistory(i):r instanceof ya?this.restoreHistory(i,!0):r instanceof cn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof tr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=O(O({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=O(O({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Do(e)))(o||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ua=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ua||{});function yF(t,e){t.events.pipe(Zt(n=>n instanceof cn||n instanceof er||n instanceof ya||n instanceof vi),se(n=>n instanceof cn||n instanceof vi?ua.COMPLETE:(n instanceof er?n.code===Vt.Redirect||n.code===Vt.SupersededByNewNavigation:!1)?ua.REDIRECTING:ua.FAILED),Zt(n=>n!==ua.REDIRECTING),Wn(1)).subscribe(()=>{e()})}function vF(t){throw t}var _F={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(ul),this.stateManager=k(Ob),this.options=k(im,{optional:!0})||{},this.pendingTasks=k(bo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(hF),this.urlSerializer=k(Xg),this.location=k(na),this.urlHandlingStrategy=k(am),this._events=new ot,this.errorHandler=this.options.errorHandler||vF,this.navigated=!1,this.routeReuseStrategy=k(pF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(sm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(nm,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof er&&i.code!==Vt.Redirect&&i.code!==Vt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof cn)this.navigated=!0;else if(i instanceof Oo){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=O({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fF(o.source)},a);this.scheduleNavigation(u,da,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}EF(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),da,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=O({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(om),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":p=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let y=o?o.snapshot:this.routerState.snapshot.root;m=vb(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),m=this.currentUrlTree.root}return _b(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=pa(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,da,null,i)}navigate(r,i={skipLocationChange:!1}){return IF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=O({},_F):i===!1?o=O({},wF):o=i,pa(r))return tb(this.currentUrlTree,r,o);let s=this.parseUrl(r);return tb(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,y)=>{u=m,l=y});let p=this.pendingTasks.add();return yF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new q(4008,!1)}function EF(t){return!(t instanceof va)&&!(t instanceof Oo)}var DF=new W("");function kb(t,...e){return Qu([{provide:sm,multi:!0,useValue:t},[],{provide:An,useFactory:bF,deps:[gt]},{provide:ig,multi:!0,useFactory:CF},e.map(n=>n.\u0275providers)])}function bF(t){return t.routerState.root}function CF(){let t=k(Ar);return e=>{let n=t.get(pi);if(e!==n.components[0])return;let r=t.get(gt),i=t.get(TF);t.get(SF)===1&&r.initialNavigation(),t.get(AF,null,ie.Optional)?.setUpPreloading(),t.get(DF,null,ie.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var TF=new W("",{factory:()=>new ot}),SF=new W("",{providedIn:"root",factory:()=>1});var AF=new W("");var Lb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},MF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Vb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new um;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},um=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},RF=function(t){let e=Lb(t);return Vb.encodeByteArray(e,!0)},Ta=function(t){return RF(t).replace(/\./g,"")},dm=function(t){try{return Vb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var NF=()=>xF().__FIREBASE_DEFAULTS__,PF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&dm(t[1]);return e&&JSON.parse(e)},Ll=()=>{try{return NF()||PF()||OF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hm=t=>{var e,n;return(n=(e=Ll())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jb=t=>{let e=hm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fm=()=>{var t;return(t=Ll())===null||t===void 0?void 0:t.config},pm=t=>{var e;return(e=Ll())===null||e===void 0?void 0:e[`_${t}`]};var Fl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ub(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ta(JSON.stringify(n)),Ta(JSON.stringify(s)),""].join(".")}function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function kF(){var t;let e=(t=Ll())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vl(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $b(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hb(){let t=et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zb(){return!kF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sa(){try{return typeof indexedDB=="object"}catch{return!1}}function jl(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function qb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var FF="FirebaseError",ct=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}},jt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?LF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new ct(i,a,r)}};function LF(t,e){return t.replace(VF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var VF=/\{\$([^}]+)}/g;function Gb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(Fb(o)&&Fb(s)){if(!nr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Fb(t){return t!==null&&typeof t=="object"}function Vo(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wb(t,e){let n=new lm(t,e);return n.subscribe.bind(n)}var lm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=cm),i.error===void 0&&(i.error=cm),i.complete===void 0&&(i.complete=cm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cm(){}var UF=1e3,BF=2,$F=4*60*60*1e3,HF=.5;function gm(t,e=UF,n=BF){let r=e*Math.pow(n,t),i=Math.round(HF*r*(Math.random()-.5)*2);return Math.min($F,r+i)}function tt(t){return t&&t._delegate?t._delegate:t}var nt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var _i="[DEFAULT]";var mm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Fl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qF(e))try{this.getOrInitializeService({instanceIdentifier:_i})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=_i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=_i){return this.instances.has(e)}getOptions(e=_i){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_i){return this.component?this.component.multipleInstances?e:_i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zF(t){return t===_i?void 0:t}function qF(t){return t.instantiationMode==="EAGER"}var Ul=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new mm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var GF=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),WF={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},KF=le.INFO,QF={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},YF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=QF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mn=class{constructor(e){this.name=e,this._logLevel=KF,this._logHandler=YF,this._userLogHandler=null,GF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var JF=(t,e)=>e.some(n=>t instanceof n),Kb,Qb;function ZF(){return Kb||(Kb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XF(){return Qb||(Qb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Yb=new WeakMap,vm=new WeakMap,Jb=new WeakMap,ym=new WeakMap,wm=new WeakMap;function eL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Rn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Yb.set(n,t)}).catch(()=>{}),wm.set(e,t),e}function tL(t){if(vm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});vm.set(t,e)}var _m={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Zb(t){_m=t(_m)}function nL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Bl(this),e,...n);return Jb.set(r,e.sort?e.sort():[e]),Rn(r)}:XF().includes(t)?function(...e){return t.apply(Bl(this),e),Rn(Yb.get(this))}:function(...e){return Rn(t.apply(Bl(this),e))}}function rL(t){return typeof t=="function"?nL(t):(t instanceof IDBTransaction&&tL(t),JF(t,ZF())?new Proxy(t,_m):t)}function Rn(t){if(t instanceof IDBRequest)return eL(t);if(ym.has(t))return ym.get(t);let e=rL(t);return e!==t&&(ym.set(t,e),wm.set(e,t)),e}var Bl=t=>wm.get(t);function $l(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Rn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Rn(s.result),u.oldVersion,u.newVersion,Rn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var iL=["get","getKey","getAll","getAllKeys","count"],oL=["put","add","delete","clear"],Im=new Map;function Xb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Im.get(e))return Im.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=oL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iL.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Im.set(e,o),o}Zb(t=>ce(O({},t),{get:(e,n,r)=>Xb(e,n)||t.get(e,n,r),has:(e,n)=>!!Xb(e,n)||t.has(e,n)}));var Dm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function sL(t){let e=t.getComponent();return e?.type==="VERSION"}var bm="@firebase/app",eC="0.10.9";var rr=new Mn("@firebase/app"),aL="@firebase/app-compat",cL="@firebase/analytics-compat",uL="@firebase/analytics",lL="@firebase/app-check-compat",dL="@firebase/app-check",hL="@firebase/auth",fL="@firebase/auth-compat",pL="@firebase/database",gL="@firebase/database-compat",mL="@firebase/functions",yL="@firebase/functions-compat",vL="@firebase/installations",_L="@firebase/installations-compat",wL="@firebase/messaging",IL="@firebase/messaging-compat",EL="@firebase/performance",DL="@firebase/performance-compat",bL="@firebase/remote-config",CL="@firebase/remote-config-compat",TL="@firebase/storage",SL="@firebase/storage-compat",AL="@firebase/firestore",ML="@firebase/vertexai-preview",RL="@firebase/firestore-compat",xL="firebase",NL="10.13.0";var Cm="[DEFAULT]",PL={[bm]:"fire-core",[aL]:"fire-core-compat",[uL]:"fire-analytics",[cL]:"fire-analytics-compat",[dL]:"fire-app-check",[lL]:"fire-app-check-compat",[hL]:"fire-auth",[fL]:"fire-auth-compat",[pL]:"fire-rtdb",[gL]:"fire-rtdb-compat",[mL]:"fire-fn",[yL]:"fire-fn-compat",[vL]:"fire-iid",[_L]:"fire-iid-compat",[wL]:"fire-fcm",[IL]:"fire-fcm-compat",[EL]:"fire-perf",[DL]:"fire-perf-compat",[bL]:"fire-rc",[CL]:"fire-rc-compat",[TL]:"fire-gcs",[SL]:"fire-gcs-compat",[AL]:"fire-fst",[RL]:"fire-fst-compat",[ML]:"fire-vertex","fire-js":"fire-js",[xL]:"fire-js-all"};var Hl=new Map,OL=new Map,Tm=new Map;function tC(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mt(t){let e=t.name;if(Tm.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Tm.set(e,t);for(let n of Hl.values())tC(n,t);for(let n of OL.values())tC(n,t);return!0}function un(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t.settings!==void 0}var kL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new jt("app","Firebase",kL);var Sm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}};var Vr=NL;function Rm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Cm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=fm()),!n)throw Lr.create("no-options");let o=Hl.get(i);if(o){if(nr(n,o.options)&&nr(r,o.config))return o;throw Lr.create("duplicate-app",{appName:i})}let s=new Ul(i);for(let u of Tm.values())s.addComponent(u);let a=new Sm(n,r,s);return Hl.set(i,a),a}function wi(t=Cm){let e=Hl.get(t);if(!e&&t===Cm&&fm())return Rm();if(!e)throw Lr.create("no-app",{appName:t});return e}function ut(t,e,n){var r;let i=(r=PL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(a.join(" "));return}Mt(new nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var FL="firebase-heartbeat-database",LL=1,Aa="firebase-heartbeat-store",Em=null;function oC(){return Em||(Em=$l(FL,LL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),Em}function VL(t){return _(this,null,function*(){try{let n=(yield oC()).transaction(Aa),r=yield n.objectStore(Aa).get(sC(t));return yield n.done,r}catch(e){if(e instanceof ct)rr.warn(e.message);else{let n=Lr.create("idb-get",{originalErrorMessage:e?.message});rr.warn(n.message)}}})}function nC(t,e){return _(this,null,function*(){try{let r=(yield oC()).transaction(Aa,"readwrite");yield r.objectStore(Aa).put(e,sC(t)),yield r.done}catch(n){if(n instanceof ct)rr.warn(n.message);else{let r=Lr.create("idb-set",{originalErrorMessage:n?.message});rr.warn(r.message)}}})}function sC(t){return`${t.name}!${t.options.appId}`}var jL=1024,UL=30*24*60*60*1e3,Am=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Mm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n,r;try{let o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rC();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let u=new Date(a.date).valueOf();return Date.now()-u<=UL}),this._storage.overwrite(this._heartbeatsCache))}catch(i){rr.warn(i)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=rC(),{heartbeatsToSend:r,unsentEntries:i}=BL(this._heartbeatsCache.heartbeats),o=Ta(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return rr.warn(n),""}})}};function rC(){return new Date().toISOString().substring(0,10)}function BL(t,e=jL){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),iC(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Mm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Sa()?jl().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield VL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return nC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return nC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function iC(t){return Ta(JSON.stringify({version:2,heartbeats:t})).length}function $L(t){Mt(new nt("platform-logger",e=>new Dm(e),"PRIVATE")),Mt(new nt("heartbeat",e=>new Am(e),"PRIVATE")),ut(bm,eC,t),ut(bm,eC,"esm2017"),ut("fire-js","")}$L("");var aC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cC={};var jr,xm;(function(){var t;function e(D,v){function w(){}w.prototype=v.prototype,D.D=v.prototype,D.prototype=new w,D.prototype.constructor=D,D.C=function(E,b,T){for(var I=Array(arguments.length-2),$n=2;$n<arguments.length;$n++)I[$n-2]=arguments[$n];return v.prototype[b].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)E[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)E[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=D.g[0],w=D.g[1],b=D.g[2];var T=D.g[3],I=v+(T^w&(b^T))+E[0]+3614090360&4294967295;v=w+(I<<7&4294967295|I>>>25),I=T+(b^v&(w^b))+E[1]+3905402710&4294967295,T=v+(I<<12&4294967295|I>>>20),I=b+(w^T&(v^w))+E[2]+606105819&4294967295,b=T+(I<<17&4294967295|I>>>15),I=w+(v^b&(T^v))+E[3]+3250441966&4294967295,w=b+(I<<22&4294967295|I>>>10),I=v+(T^w&(b^T))+E[4]+4118548399&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(b^v&(w^b))+E[5]+1200080426&4294967295,T=v+(I<<12&4294967295|I>>>20),I=b+(w^T&(v^w))+E[6]+2821735955&4294967295,b=T+(I<<17&4294967295|I>>>15),I=w+(v^b&(T^v))+E[7]+4249261313&4294967295,w=b+(I<<22&4294967295|I>>>10),I=v+(T^w&(b^T))+E[8]+1770035416&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(b^v&(w^b))+E[9]+2336552879&4294967295,T=v+(I<<12&4294967295|I>>>20),I=b+(w^T&(v^w))+E[10]+4294925233&4294967295,b=T+(I<<17&4294967295|I>>>15),I=w+(v^b&(T^v))+E[11]+2304563134&4294967295,w=b+(I<<22&4294967295|I>>>10),I=v+(T^w&(b^T))+E[12]+1804603682&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(b^v&(w^b))+E[13]+4254626195&4294967295,T=v+(I<<12&4294967295|I>>>20),I=b+(w^T&(v^w))+E[14]+2792965006&4294967295,b=T+(I<<17&4294967295|I>>>15),I=w+(v^b&(T^v))+E[15]+1236535329&4294967295,w=b+(I<<22&4294967295|I>>>10),I=v+(b^T&(w^b))+E[1]+4129170786&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^b&(v^w))+E[6]+3225465664&4294967295,T=v+(I<<9&4294967295|I>>>23),I=b+(v^w&(T^v))+E[11]+643717713&4294967295,b=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(b^T))+E[0]+3921069994&4294967295,w=b+(I<<20&4294967295|I>>>12),I=v+(b^T&(w^b))+E[5]+3593408605&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^b&(v^w))+E[10]+38016083&4294967295,T=v+(I<<9&4294967295|I>>>23),I=b+(v^w&(T^v))+E[15]+3634488961&4294967295,b=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(b^T))+E[4]+3889429448&4294967295,w=b+(I<<20&4294967295|I>>>12),I=v+(b^T&(w^b))+E[9]+568446438&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^b&(v^w))+E[14]+3275163606&4294967295,T=v+(I<<9&4294967295|I>>>23),I=b+(v^w&(T^v))+E[3]+4107603335&4294967295,b=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(b^T))+E[8]+1163531501&4294967295,w=b+(I<<20&4294967295|I>>>12),I=v+(b^T&(w^b))+E[13]+2850285829&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^b&(v^w))+E[2]+4243563512&4294967295,T=v+(I<<9&4294967295|I>>>23),I=b+(v^w&(T^v))+E[7]+1735328473&4294967295,b=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(b^T))+E[12]+2368359562&4294967295,w=b+(I<<20&4294967295|I>>>12),I=v+(w^b^T)+E[5]+4294588738&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^b)+E[8]+2272392833&4294967295,T=v+(I<<11&4294967295|I>>>21),I=b+(T^v^w)+E[11]+1839030562&4294967295,b=T+(I<<16&4294967295|I>>>16),I=w+(b^T^v)+E[14]+4259657740&4294967295,w=b+(I<<23&4294967295|I>>>9),I=v+(w^b^T)+E[1]+2763975236&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^b)+E[4]+1272893353&4294967295,T=v+(I<<11&4294967295|I>>>21),I=b+(T^v^w)+E[7]+4139469664&4294967295,b=T+(I<<16&4294967295|I>>>16),I=w+(b^T^v)+E[10]+3200236656&4294967295,w=b+(I<<23&4294967295|I>>>9),I=v+(w^b^T)+E[13]+681279174&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^b)+E[0]+3936430074&4294967295,T=v+(I<<11&4294967295|I>>>21),I=b+(T^v^w)+E[3]+3572445317&4294967295,b=T+(I<<16&4294967295|I>>>16),I=w+(b^T^v)+E[6]+76029189&4294967295,w=b+(I<<23&4294967295|I>>>9),I=v+(w^b^T)+E[9]+3654602809&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^b)+E[12]+3873151461&4294967295,T=v+(I<<11&4294967295|I>>>21),I=b+(T^v^w)+E[15]+530742520&4294967295,b=T+(I<<16&4294967295|I>>>16),I=w+(b^T^v)+E[2]+3299628645&4294967295,w=b+(I<<23&4294967295|I>>>9),I=v+(b^(w|~T))+E[0]+4096336452&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~b))+E[7]+1126891415&4294967295,T=v+(I<<10&4294967295|I>>>22),I=b+(v^(T|~w))+E[14]+2878612391&4294967295,b=T+(I<<15&4294967295|I>>>17),I=w+(T^(b|~v))+E[5]+4237533241&4294967295,w=b+(I<<21&4294967295|I>>>11),I=v+(b^(w|~T))+E[12]+1700485571&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~b))+E[3]+2399980690&4294967295,T=v+(I<<10&4294967295|I>>>22),I=b+(v^(T|~w))+E[10]+4293915773&4294967295,b=T+(I<<15&4294967295|I>>>17),I=w+(T^(b|~v))+E[1]+2240044497&4294967295,w=b+(I<<21&4294967295|I>>>11),I=v+(b^(w|~T))+E[8]+1873313359&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~b))+E[15]+4264355552&4294967295,T=v+(I<<10&4294967295|I>>>22),I=b+(v^(T|~w))+E[6]+2734768916&4294967295,b=T+(I<<15&4294967295|I>>>17),I=w+(T^(b|~v))+E[13]+1309151649&4294967295,w=b+(I<<21&4294967295|I>>>11),I=v+(b^(w|~T))+E[4]+4149444226&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~b))+E[11]+3174756917&4294967295,T=v+(I<<10&4294967295|I>>>22),I=b+(v^(T|~w))+E[2]+718787259&4294967295,b=T+(I<<15&4294967295|I>>>17),I=w+(T^(b|~v))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var w=v-this.blockSize,E=this.B,b=this.h,T=0;T<v;){if(b==0)for(;T<=w;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<v;)if(E[b++]=D.charCodeAt(T++),b==this.blockSize){i(this,E),b=0;break}}else for(;T<v;)if(E[b++]=D[T++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var w=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=w&255,w/=256;for(this.u(D),D=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)D[w++]=this.g[v]>>>E&255;return D};function o(D,v){var w=a;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=v(D)}function s(D,v){this.h=v;for(var w=[],E=!0,b=D.length-1;0<=b;b--){var T=D[b]|0;E&&T==v||(w[b]=T,E=!1)}this.g=w}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],w=1,E=0;D>=w;E++)v[E]=D/w|0,w*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=p,b=0;b<D.length;b+=8){var T=Math.min(8,D.length-b),I=parseInt(D.substring(b,b+T),v);8>T?(T=l(Math.pow(v,T)),E=E.j(T).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(x(this))return-R(this).m();for(var D=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);D+=(0<=E?E:4294967296+E)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(x(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),w=this,E="";;){var b=he(w,v).g;w=L(w,b.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(D);if(w=b,S(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function x(D){return D.h==-1}t.l=function(D){return D=L(this,D),x(D)?-1:S(D)?0:1};function R(D){for(var v=D.g.length,w=[],E=0;E<v;E++)w[E]=~D.g[E];return new s(w,~D.h).add(m)}t.abs=function(){return x(this)?R(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0,b=0;b<=v;b++){var T=E+(this.i(b)&65535)+(D.i(b)&65535),I=(T>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);E=I>>>16,T&=65535,I&=65535,w[b]=I<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function L(D,v){return D.add(R(v))}t.j=function(D){if(S(this)||S(D))return p;if(x(this))return x(D)?R(this).j(R(D)):R(R(this).j(D));if(x(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<D.g.length;b++){var T=this.i(E)>>>16,I=this.i(E)&65535,$n=D.i(b)>>>16,ms=D.i(b)&65535;w[2*E+2*b]+=I*ms,G(w,2*E+2*b),w[2*E+2*b+1]+=T*ms,G(w,2*E+2*b+1),w[2*E+2*b+1]+=I*$n,G(w,2*E+2*b+1),w[2*E+2*b+2]+=T*$n,G(w,2*E+2*b+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function G(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function H(D,v){this.g=D,this.h=v}function he(D,v){if(S(v))throw Error("division by zero");if(S(D))return new H(p,p);if(x(D))return v=he(R(D),v),new H(R(v.g),R(v.h));if(x(v))return v=he(D,R(v)),new H(R(v.g),v.h);if(30<D.g.length){if(x(D)||x(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=v;0>=E.l(D);)w=ke(w),E=ke(E);var b=ne(w,1),T=ne(E,1);for(E=ne(E,2),w=ne(w,2);!S(E);){var I=T.add(E);0>=I.l(D)&&(b=b.add(w),T=I),E=ne(E,1),w=ne(w,1)}return v=L(D,b.j(v)),new H(b,v)}for(b=p;0<=D.l(v);){for(w=Math.max(1,Math.floor(D.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),I=T.j(v);x(I)||0<I.l(D);)w-=E,T=l(w),I=T.j(v);S(T)&&(T=m),b=b.add(T),D=L(D,I)}return new H(b,D)}t.A=function(D){return he(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&D.i(E);return new s(w,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|D.i(E);return new s(w,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^D.i(E);return new s(w,this.h^D.h)};function ke(D){for(var v=D.g.length+1,w=[],E=0;E<v;E++)w[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(w,D.h)}function ne(D,v){var w=v>>5;v%=32;for(var E=D.g.length-w,b=[],T=0;T<E;T++)b[T]=0<v?D.i(T+w)>>>v|D.i(T+w+1)<<32-v:D.i(T+w);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xm=cC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,jr=cC.Integer=s}).apply(typeof aC<"u"?aC:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={};var Nm,Pm,jo,Om,Ma,ql,km,Fm,Lm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var P=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)P[Te-2]=arguments[Te];return d.prototype[C].apply(g,P)}}function x(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let P=0;P<A;P++)c[C+P]=g[P]}else c.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var ke=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ne(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function I(){var c=bh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class $n{constructor(){this.h=this.g=null}add(d,f){let g=ms.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ms=new L(()=>new WA,c=>c.reset());class WA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ys,vs=!1,bh=new $n,j_=()=>{let c=a.Promise.resolve(void 0);ys=()=>{c.then(KA)}};var KA=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){T(f)}var d=ms;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}vs=!1};function gr(){this.s=this.s,this.C=this.C}gr.prototype.s=!1,gr.prototype.ma=function(){this.s||(this.s=!0,this.N())},gr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function dt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}dt.prototype.h=function(){this.defaultPrevented=!0};var QA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function _s(c,d){if(dt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ke){e:{try{he(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:YA[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&_s.aa.h.call(this)}}S(_s,dt);var YA={2:"touch",3:"pen",4:"mouse"};_s.prototype.h=function(){_s.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ws="closure_listenable_"+(1e6*Math.random()|0),JA=0;function ZA(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++JA,this.da=this.fa=!1}function _c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function wc(c){this.src=c,this.g={},this.h=0}wc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var P=Th(c,d,g,C);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new ZA(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Ch(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(_c(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Th(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Sh="closure_lm_"+(1e6*Math.random()|0),Ah={};function U_(c,d,f,g,C){if(g&&g.once)return $_(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)U_(c,d[A],f,g,C);return null}return f=Nh(f),c&&c[ws]?c.K(d,f,l(g)?!!g.capture:!!g,C):B_(c,d,f,!1,g,C)}function B_(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var P=l(C)?!!C.capture:!!C,Te=Rh(c);if(Te||(c[Sh]=Te=new wc(c)),f=Te.add(d,f,g,P,A),f.proxy)return f;if(g=XA(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)QA||(C=P),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(z_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function XA(){function c(f){return d.call(c.src,c.listener,f)}let d=eM;return c}function $_(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)$_(c,d[A],f,g,C);return null}return f=Nh(f),c&&c[ws]?c.L(d,f,l(g)?!!g.capture:!!g,C):B_(c,d,f,!0,g,C)}function H_(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)H_(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Nh(f),c&&c[ws]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Th(A,f,g,C),-1<f&&(_c(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Rh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Th(d,f,g,C)),(f=-1<c?d[c]:null)&&Mh(f))}function Mh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ws])Ch(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(z_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Rh(d))?(Ch(f,c),f.h==0&&(f.src=null,d[Sh]=null)):_c(c)}}}function z_(c){return c in Ah?Ah[c]:Ah[c]="on"+c}function eM(c,d){if(c.da)c=!0;else{d=new _s(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Mh(c),c=f.call(g,d)}return c}function Rh(c){return c=c[Sh],c instanceof wc?c:null}var xh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nh(c){return typeof c=="function"?c:(c[xh]||(c[xh]=function(d){return c.handleEvent(d)}),c[xh])}function ht(){gr.call(this),this.i=new wc(this),this.M=this,this.F=null}S(ht,gr),ht.prototype[ws]=!0,ht.prototype.removeEventListener=function(c,d,f,g){H_(this,c,d,f,g)};function _t(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new dt(d,c);else if(d instanceof dt)d.target=d.target||c;else{var C=d;d=new dt(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];C=Ic(P,g,!0,d)&&C}if(P=d.g=c,C=Ic(P,g,!0,d)&&C,C=Ic(P,g,!1,d)&&C,f)for(A=0;A<f.length;A++)P=d.g=f[A],C=Ic(P,g,!1,d)&&C}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)_c(f[g]);delete c.g[d],c.h--}}this.F=null},ht.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ht.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Ic(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var Te=P.listener,it=P.ha||P.src;P.fa&&Ch(c.i,P),C=Te.call(it,g)!==!1&&C}}return C&&!g.defaultPrevented}function q_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function G_(c){c.g=q_(()=>{c.g=null,c.i&&(c.i=!1,G_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class tM extends gr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:G_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(c){gr.call(this),this.h=c,this.g={}}S(Is,gr);var W_=[];function K_(c){ne(c.g,function(d,f){this.g.hasOwnProperty(f)&&Mh(d)},c),c.g={}}Is.prototype.N=function(){Is.aa.N.call(this),K_(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ph=a.JSON.stringify,nM=a.JSON.parse,rM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Oh(){}Oh.prototype.h=null;function Q_(c){return c.h||(c.h=c.i())}function Y_(){}var Es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kh(){dt.call(this,"d")}S(kh,dt);function Fh(){dt.call(this,"c")}S(Fh,dt);var Wr={},J_=null;function Ec(){return J_=J_||new ht}Wr.La="serverreachability";function Z_(c){dt.call(this,Wr.La,c)}S(Z_,dt);function Ds(c){let d=Ec();_t(d,new Z_(d))}Wr.STAT_EVENT="statevent";function X_(c,d){dt.call(this,Wr.STAT_EVENT,c),this.stat=d}S(X_,dt);function wt(c){let d=Ec();_t(d,new X_(d,c))}Wr.Ma="timingevent";function ew(c,d){dt.call(this,Wr.Ma,c),this.size=d}S(ew,dt);function bs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Cs(){this.g=!0}Cs.prototype.xa=function(){this.g=!1};function iM(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var P="",Te=A.split("&"),it=0;it<Te.length;it++){var ye=Te[it].split("=");if(1<ye.length){var ft=ye[0];ye=ye[1];var pt=ft.split("_");P=2<=pt.length&&pt[1]=="type"?P+(ft+"="+ye+"&"):P+(ft+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+P})}function oM(c,d,f,g,C,A,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+P})}function Ui(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+aM(c,f)+(g?" "+g:"")})}function sM(c,d){c.info(function(){return"TIMEOUT: "+d})}Cs.prototype.info=function(){};function aM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<C.length;P++)C[P]=""}}}}return Ph(f)}catch{return d}}var Dc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lh;function bc(){}S(bc,Oh),bc.prototype.g=function(){return new XMLHttpRequest},bc.prototype.i=function(){return{}},Lh=new bc;function mr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nw}function nw(){this.i=null,this.g="",this.h=!1}var rw={},Vh={};function jh(c,d,f){c.L=1,c.v=Ac(Hn(d)),c.m=f,c.P=!0,iw(c,null)}function iw(c,d){c.F=Date.now(),Cc(c),c.A=Hn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),vw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new nw,c.g=Fw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new tM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(W_[0]=C.toString()),C=W_);for(var A=0;A<C.length;A++){var P=U_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ds(),iM(c.i,c.u,c.A,c.l,c.R,c.m)}mr.prototype.ca=function(c){c=c.target;let d=this.M;d&&zn(c)==3?d.j():this.Y(c)},mr.prototype.Y=function(c){try{if(c==this.g)e:{let pt=zn(this.g);var d=this.g.Ba();let Hi=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Cw(this.g)))){this.J||pt!=4||d==7||(d==8||0>=Hi?Ds(3):Ds(2)),Uh(this);var f=this.g.Z();this.X=f;t:if(ow(this)){var g=Cw(this.g);c="";var C=g.length,A=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),Ts(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,oM(this.i,this.u,this.A,this.l,this.R,pt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,it=this.g;if((Te=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Te)){var ye=Te;break t}}ye=null}if(f=ye)Ui(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bh(this,f);else{this.o=!1,this.s=3,wt(12),Kr(this),Ts(this);break e}}if(this.P){f=!0;let Yt;for(;!this.J&&this.C<P.length;)if(Yt=cM(this,P),Yt==Vh){pt==4&&(this.s=4,wt(14),f=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==rw){this.s=4,wt(15),Ui(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else Ui(this.i,this.l,Yt,null),Bh(this,Yt);if(ow(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||P.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)Ui(this.i,this.l,P,"[Invalid Chunked Response]"),Kr(this),Ts(this);else if(0<P.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Wh(ft),ft.M=!0,wt(11))}}else Ui(this.i,this.l,P,null),Bh(this,P);pt==4&&Kr(this),this.o&&!this.J&&(pt==4?Nw(this.j,this):(this.o=!1,Cc(this)))}else CM(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Kr(this),Ts(this)}}}catch{}finally{}};function ow(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function cM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Vh:(f=Number(d.substring(f,g)),isNaN(f)?rw:(g+=1,g+f>d.length?Vh:(d=d.slice(g,g+f),c.C=g+f,d)))}mr.prototype.cancel=function(){this.J=!0,Kr(this)};function Cc(c){c.S=Date.now()+c.I,sw(c,c.I)}function sw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=bs(m(c.ba,c),d)}function Uh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}mr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(sM(this.i,this.A),this.L!=2&&(Ds(),wt(17)),Kr(this),this.s=2,Ts(this)):sw(this,this.S-c)};function Ts(c){c.j.G==0||c.J||Nw(c.j,c)}function Kr(c){Uh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,K_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Bh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||$h(f.h,c))){if(!c.K&&$h(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Pc(f),xc(f);else break e;Gh(f),wt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=bs(m(f.Za,f),6e3));if(1>=uw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Yr(f,11)}else if((c.K||f.g==c)&&Pc(f),!G(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ye=C[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let ft=ye[3];ft!=null&&(f.la=ft,f.j.info("VER="+f.la));let pt=ye[4];pt!=null&&(f.Aa=pt,f.j.info("SVER="+f.Aa));let Hi=ye[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(g=1.5*Hi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Yt=c.g;if(Yt){let kc=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kc){var A=g.h;A.g||kc.indexOf("spdy")==-1&&kc.indexOf("quic")==-1&&kc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Hh(A,A.h),A.h=null))}if(g.D){let Kh=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Kh&&(g.ya=Kh,Re(g.I,g.D,Kh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=kw(g,g.J?g.ia:null,g.W),P.K){lw(g.h,P);var Te=P,it=g.L;it&&(Te.I=it),Te.B&&(Uh(Te),Cc(Te)),g.g=P}else Rw(g);0<f.i.length&&Nc(f)}else ye[0]!="stop"&&ye[0]!="close"||Yr(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Yr(f,7):qh(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}Ds(4)}catch{}}var uM=class{constructor(c,d){this.g=c,this.map=d}};function aw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function uw(c){return c.h?1:c.g?c.g.size:0}function $h(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Hh(c,d){c.g?c.g.add(d):c.h=d}function lw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}aw.prototype.cancel=function(){if(this.i=dw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function dw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return x(c.i)}function lM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function dM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function hw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=dM(c),g=lM(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var fw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Qr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Qr){this.h=c.h,Tc(this,c.j),this.o=c.o,this.g=c.g,Sc(this,c.s),this.l=c.l;var d=c.i,f=new Ms;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),pw(this,f),this.m=c.m}else c&&(d=String(c).match(fw))?(this.h=!1,Tc(this,d[1]||"",!0),this.o=Ss(d[2]||""),this.g=Ss(d[3]||"",!0),Sc(this,d[4]),this.l=Ss(d[5]||"",!0),pw(this,d[6]||"",!0),this.m=Ss(d[7]||"")):(this.h=!1,this.i=new Ms(null,this.h))}Qr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(As(d,gw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(As(d,gw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(As(f,f.charAt(0)=="/"?gM:pM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",As(f,yM)),c.join("")};function Hn(c){return new Qr(c)}function Tc(c,d,f){c.j=f?Ss(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Sc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function pw(c,d,f){d instanceof Ms?(c.i=d,vM(c.i,c.h)):(f||(d=As(d,mM)),c.i=new Ms(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function Ac(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ss(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function As(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,fM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var gw=/[#\/\?@]/g,pM=/[#\?:]/g,gM=/[#\?]/g,mM=/[#\?@]/g,yM=/#/g;function Ms(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function yr(c){c.g||(c.g=new Map,c.h=0,c.i&&hM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ms.prototype,t.add=function(c,d){yr(this),this.i=null,c=Bi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function mw(c,d){yr(c),d=Bi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function yw(c,d){return yr(c),d=Bi(c,d),c.g.has(d)}t.forEach=function(c,d){yr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){yr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){yr(this);let d=[];if(typeof c=="string")yw(this,c)&&(d=d.concat(this.g.get(Bi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return yr(this),this.i=null,c=Bi(this,c),yw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function vw(c,d,f){mw(c,d),0<f.length&&(c.i=null,c.g.set(Bi(c,d),x(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var C=A;P[g]!==""&&(C+="="+encodeURIComponent(String(P[g]))),c.push(C)}}return this.i=c.join("&")};function Bi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function vM(c,d){d&&!c.j&&(yr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(mw(this,g),vw(this,C,f))},c)),c.j=d}function _M(c,d){let f=new Cs;if(a.Image){let g=new Image;g.onload=y(vr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(vr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(vr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(vr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function wM(c,d){let f=new Cs,g=new AbortController,C=setTimeout(()=>{g.abort(),vr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?vr(f,"TestPingServer: ok",!0,d):vr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),vr(f,"TestPingServer: error",!1,d)})}function vr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function IM(){this.g=new rM}function EM(c,d,f){let g=f||"";try{hw(c,function(C,A){let P=C;l(C)&&(P=Ph(C)),d.push(g+A+"="+encodeURIComponent(P))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Rs(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Rs,Oh),Rs.prototype.g=function(){return new Mc(this.l,this.j)},Rs.prototype.i=function(c){return function(){return c}}({});function Mc(c,d){ht.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Mc,ht),t=Mc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ns(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_w(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function _w(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?xs(this):Ns(this),this.readyState==3&&_w(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,xs(this))},t.Qa=function(c){this.g&&(this.response=c,xs(this))},t.ga=function(){this.g&&xs(this)};function xs(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ns(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ns(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ww(c){let d="";return ne(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function zh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=ww(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Fe(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Fe,ht);var DM=/^https?$/i,bM=["POST","PUT"];t=Fe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lh.g(),this.v=this.o?Q_(this.o):Q_(Lh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Iw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bM,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Iw(this,A)}};function Iw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Ew(c),Rc(c)}function Ew(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),Rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Dw(this):this.bb())},t.bb=function(){Dw(this)};function Dw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||zn(c)!=4||c.Z()!=2)){if(c.u&&zn(c)==4)q_(c.Ea,0,c);else if(_t(c,"readystatechange"),zn(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var C=String(c.D).match(fw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!DM.test(C?C.toLowerCase():"")}f=g}if(f)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var A=2<zn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Ew(c)}}finally{Rc(c)}}}}function Rc(c,d){if(c.g){bw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||_t(c,"ready");try{f.onreadystatechange=g}catch{}}}function bw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function zn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),nM(d)}};function Cw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function CM(c){let d={};c=(c.g&&2<=zn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var f=b(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Tw(c){this.Aa=0,this.i=[],this.j=new Cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ps("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ps("baseRetryDelayMs",5e3,c),this.cb=Ps("retryDelaySeedMs",1e4,c),this.Wa=Ps("forwardChannelMaxRetries",2,c),this.wa=Ps("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new aw(c&&c.concurrentRequestLimit),this.Da=new IM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){wt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=kw(this,null,this.W),Nc(this)};function qh(c){if(Sw(c),c.G==3){var d=c.U++,f=Hn(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),Os(c,f),d=new mr(c,c.j,d),d.L=2,d.v=Ac(Hn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Fw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Cc(d)}Ow(c)}function xc(c){c.g&&(Wh(c),c.g.cancel(),c.g=null)}function Sw(c){xc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Pc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Nc(c){if(!cw(c.h)&&!c.s){c.s=!0;var d=c.Ga;ys||j_(),vs||(ys(),vs=!0),bh.add(d,c),c.B=0}}function TM(c,d){return uw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=bs(m(c.Ga,c,d),Pw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new mr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Mw(this,C,d),f=Hn(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),Os(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(ww(A)))+"&"+d:this.m&&zh(f,this.m,A)),Hh(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,jh(C,f,null)):jh(C,f,d),this.G=2}}else this.G==3&&(c?Aw(this,c):this.i.length==0||cw(this.h)||Aw(this))};function Aw(c,d){var f;d?f=d.l:f=c.U++;let g=Hn(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),Os(c,g),c.m&&c.o&&zh(g,c.m,c.o),f=new mr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Mw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Hh(c.h,f),jh(f,g,d)}function Os(c,d){c.H&&ne(c.H,function(f,g){Re(d,g,f)}),c.l&&hw({},function(f,g){Re(d,g,f)})}function Mw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=C[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let Te=!0;for(let it=0;it<f;it++){let ye=C[it].g,ft=C[it].map;if(ye-=A,0>ye)A=Math.max(0,C[it].g-100),Te=!1;else try{EM(ft,P,"req"+ye+"_")}catch{g&&g(ft)}}if(Te){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Rw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ys||j_(),vs||(ys(),vs=!0),bh.add(d,c),c.v=0}}function Gh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=bs(m(c.Fa,c),Pw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,xw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=bs(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),xc(this),xw(this))};function Wh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function xw(c){c.g=new mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Hn(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),Os(c,d),c.m&&c.o&&zh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ac(Hn(d)),f.m=null,f.P=!0,iw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,xc(this),Gh(this),wt(19))};function Pc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Nw(c,d){var f=null;if(c.g==d){Pc(c),Wh(c),c.g=null;var g=2}else if($h(c.h,d))f=d.D,lw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Ec(),_t(g,new ew(g,f)),Nc(c)}else Rw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&TM(c,d)||g==2&&Gh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Yr(c,5);break;case 4:Yr(c,10);break;case 3:Yr(c,6);break;default:Yr(c,2)}}}function Pw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Yr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Qr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tc(g,"https"),Ac(g),C?_M(g.toString(),f):wM(g.toString(),f)}else wt(2);c.G=0,c.l&&c.l.sa(d),Ow(c),Sw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Ow(c){if(c.G=0,c.ka=[],c.l){let d=dw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function kw(c,d,f){var g=f instanceof Qr?Hn(f):new Qr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Sc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Qr(null);g&&Tc(A,g),d&&(A.g=d),C&&Sc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),Os(c,g),g}function Fw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Fe(new Rs({eb:f})):new Fe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lw(){}t=Lw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oc(){}Oc.prototype.g=function(c,d){return new Nt(c,d)};function Nt(c,d){ht.call(this),this.g=new Tw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new $i(this)}S(Nt,ht),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){qh(this.g)},Nt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Ph(c),c=f);d.i.push(new uM(d.Ya++,c)),d.G==3&&Nc(d)},Nt.prototype.N=function(){this.g.l=null,delete this.j,qh(this.g),delete this.g,Nt.aa.N.call(this)};function Vw(c){kh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(Vw,kh);function jw(){Fh.call(this),this.status=1}S(jw,Fh);function $i(c){this.g=c}S($i,Lw),$i.prototype.ua=function(){_t(this.g,"a")},$i.prototype.ta=function(c){_t(this.g,new Vw(c))},$i.prototype.sa=function(c){_t(this.g,new jw)},$i.prototype.ra=function(){_t(this.g,"b")},Oc.prototype.createWebChannel=Oc.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Lm=ir.createWebChannelTransport=function(){return new Oc},Fm=ir.getStatEventTarget=function(){return Ec()},km=ir.Event=Wr,ql=ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dc.NO_ERROR=0,Dc.TIMEOUT=8,Dc.HTTP_ERROR=6,Ma=ir.ErrorCode=Dc,tw.COMPLETE="complete",Om=ir.EventType=tw,Y_.EventType=Es,Es.OPEN="a",Es.CLOSE="b",Es.ERROR="c",Es.MESSAGE="d",ht.prototype.listen=ht.prototype.K,jo=ir.WebChannel=Y_,Pm=ir.FetchXmlHttpFactory=Rs,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Nm=ir.XhrIo=Fe}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});var uC="@firebase/firestore";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var is="10.13.0";var bi=new Mn("@firebase/firestore");function Ra(){return bi.logLevel}function j(t,...e){if(bi.logLevel<=le.DEBUG){let n=e.map(Iv);bi.debug(`Firestore (${is}): ${t}`,...n)}}function sr(t,...e){if(bi.logLevel<=le.ERROR){let n=e.map(Iv);bi.error(`Firestore (${is}): ${t}`,...n)}}function Go(t,...e){if(bi.logLevel<=le.WARN){let n=e.map(Iv);bi.warn(`Firestore (${is}): ${t}`,...n)}}function Iv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${is}) INTERNAL ASSERTION FAILED: `+t;throw sr(e),new Error(e)}function Ae(t,e){t||K()}function Z(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends ct{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Yl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$m=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}},Hm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},zm=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new dn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new Yl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new rt(e)}},qm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Gm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Km=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new Wm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function HL(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Jl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=HL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ve(t,e){return t<e?-1:t>e?1:0}function Wo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var lt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new lt(0,0))}static max(){return new t(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Oe=class t extends Zl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},zL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ut=class t extends Zl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return zL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Oe.fromString(e))}static fromName(e){return new t(Oe.fromString(e).popFirst(5))}static empty(){return new t(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Oe(e.slice()))}};var Qm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Qm.UNKNOWN_ID=-1;function qL(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new Ci(i,z.empty(),e)}function GL(t){return new Ci(t.readTime,t.key,-1)}var Ci=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),z.empty(),-1)}static max(){return new t(te.max(),z.empty(),-1)}};function WL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}var KL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ym=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Qa(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==KL)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var N=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function QL(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ya(t){return t.name==="IndexedDbTransactionError"}var $C=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Md(t){return t==null}function Fa(t){return t===0&&1/t==-1/0}function YL(t){return typeof t=="number"&&Number.isInteger(t)&&!Fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var JL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_q=[...JL,"documentOverlays"],ZL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],XL=ZL,eV=[...XL,"indexConfiguration","indexState","indexEntries"];var wq=[...eV,"globals"];function lC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function os(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var je=class t{constructor(e,n){this.comparator=e,this.root=n||On.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ho(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ho(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ho(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ho(this.root,e,this.comparator,!0)}},Ho=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},On=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,i,o){return this}insert(e,n,r){return new On(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var yt=class t{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xl(this.data.getIterator())}getIteratorFrom(e){return new Xl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Xl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pn=class t{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new t([])}unionWith(e){let n=new yt(Ut.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ed=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var vt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ed("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};vt.EMPTY_BYTE_STRING=new vt("");var tV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(Ae(!!t),typeof t=="string"){let e=0,n=tV.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Br(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}function Ev(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Dv(t){let e=t.mapValue.fields.__previous_value__;return Ev(e)?Dv(e):e}function La(t){let e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}var Jm=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},td=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Gl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ev(t)?4:qC(t)?9007199254740991:zC(t)?10:11:K()}function Ln(t,e){if(t===e)return!0;let n=Ti(t);if(n!==Ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return La(t).isEqual(La(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ar(i.timestampValue),a=ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Br(i.bytesValue).isEqual(Br(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Fa(s)===Fa(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Wo(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(lC(s)!==lC(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Ln(s[u],a[u])))return!1;return!0}(t,e);default:return K()}}function Va(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function Ko(t,e){if(t===e)return 0;let n=Ti(t),r=Ti(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return dC(t.timestampValue,e.timestampValue);case 4:return dC(La(t),La(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Br(o),u=Br(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ve(a[l],u[l]);if(h!==0)return h}return ve(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ve(Ne(o.latitude),Ne(s.latitude));return a!==0?a:ve(Ne(o.longitude),Ne(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hC(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,x=ve(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:hC(y,S)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Gl.mapValue&&s===Gl.mapValue)return 0;if(o===Gl.mapValue)return 1;if(s===Gl.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ve(u[p],h[p]);if(m!==0)return m;let y=Ko(a[u[p]],l[h[p]]);if(y!==0)return y}return ve(u.length,h.length)}(t.mapValue,e.mapValue);default:throw K()}}function dC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);let n=ar(t),r=ar(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function hC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ko(n[i],r[i]);if(o)return o}return ve(n.length,r.length)}function Qo(t){return Zm(t)}function Zm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Zm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Zm(n.fields[s])}`;return i+"}"}(t.mapValue):K()}function fC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xm(t){return!!t&&"integerValue"in t}function bv(t){return!!t&&"arrayValue"in t}function pC(t){return!!t&&"nullValue"in t}function gC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kl(t){return!!t&&"mapValue"in t}function zC(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Na(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ln=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(n)}setAll(e){let n=Ut.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Na(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){os(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Na(this.value))}};function GC(t){let e=[];return os(t.fields,(n,r)=>{let i=new Ut([n]);if(Kl(r)){let o=GC(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Pn(e)}var hn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),ln.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Yo=class{constructor(e,n){this.position=e,this.inclusive=n}};function mC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),n.key):r=Ko(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function yC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}var Jo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function nV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var nd=class{},Qe=class t extends nd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ty(e,n,r):n==="array-contains"?new iy(e,r):n==="in"?new oy(e,r):n==="not-in"?new sy(e,r):n==="array-contains-any"?new ay(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ny(e,r):new ry(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ko(n,this.value)):n!==null&&Ti(this.value)===Ti(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fn=class t extends nd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return WC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function WC(t){return t.op==="and"}function KC(t){return rV(t)&&WC(t)}function rV(t){for(let e of t.filters)if(e instanceof fn)return!1;return!0}function ey(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+Qo(t.value);if(KC(t))return t.filters.map(e=>ey(e)).join(",");{let e=t.filters.map(n=>ey(n)).join(",");return`${t.op}(${e})`}}function QC(t,e){return t instanceof Qe?function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&Ln(r.value,i.value)}(t,e):t instanceof fn?function(r,i){return i instanceof fn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&QC(s,i.filters[a]),!0):!1}(t,e):void K()}function YC(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Qo(n.value)}`}(t):t instanceof fn?function(n){return n.op.toString()+" {"+n.getFilters().map(YC).join(" ,")+"}"}(t):"Filter"}var ty=class extends Qe{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},ny=class extends Qe{constructor(e,n){super(e,"in",n),this.keys=JC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},ry=class extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=JC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function JC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var iy=class extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return bv(n)&&Va(n.arrayValue,this.value)}},oy=class extends Qe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Va(this.value.arrayValue,n)}},sy=class extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Va(this.value.arrayValue,n)}},ay=class extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!bv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Va(this.value.arrayValue,r))}};var cy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function vC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new cy(t,e,n,r,i,o,s)}function Cv(t){let e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ey(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qo(r)).join(",")),e.ue=n}return e.ue}function Tv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yC(t.startAt,e.startAt)&&yC(t.endAt,e.endAt)}function uy(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Si=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function iV(t,e,n,r,i,o,s,a){return new Si(t,e,n,r,i,o,s,a)}function Sv(t){return new Si(t)}function _C(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZC(t){return t.collectionGroup!==null}function Pa(t){let e=Z(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new yt(Ut.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Jo(o,r))}),n.has(Ut.keyField().canonicalString())||e.ce.push(new Jo(Ut.keyField(),r))}return e.ce}function kn(t){let e=Z(t);return e.le||(e.le=oV(e,Pa(t))),e.le}function oV(t,e){if(t.limitType==="F")return vC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Jo(i.field,o)});let n=t.endAt?new Yo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yo(t.startAt.position,t.startAt.inclusive):null;return vC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ly(t,e){let n=t.filters.concat([e]);return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rd(t,e,n){return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return Tv(kn(t),kn(e))&&t.limitType===e.limitType}function XC(t){return`${Cv(kn(t))}|lt:${t.limitType}`}function Uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>YC(i)).join(", ")}]`),Md(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qo(i)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function xd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Pa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=mC(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Pa(r),i)||r.endAt&&!function(s,a,u){let l=mC(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Pa(r),i))}(t,e)}function sV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eT(t){return(e,n)=>{let r=!1;for(let i of Pa(t)){let o=aV(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aV(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ko(u,l):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var $r=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return HC(this.inner)}size(){return this.innerSize}};var cV=new je(z.comparator);function cr(){return cV}var tT=new je(z.comparator);function xa(...t){let e=tT;for(let n of t)e=e.insert(n.key,n);return e}function nT(t){let e=tT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ii(){return Oa()}function rT(){return Oa()}function Oa(){return new $r(t=>t.toString(),(t,e)=>t.isEqual(e))}var uV=new je(z.comparator),lV=new yt(z.comparator);function de(...t){let e=lV;for(let n of t)e=e.add(n);return e}var dV=new yt(ve);function hV(){return dV}function Av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fa(e)?"-0":e}}function iT(t){return{integerValue:""+t}}function fV(t,e){return YL(e)?iT(e):Av(t,e)}var Zo=class{constructor(){this._=void 0}};function pV(t,e,n){return t instanceof Xo?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ev(o)&&(o=Dv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Ai?sT(t,e):t instanceof Mi?aT(t,e):function(i,o){let s=oT(i,o),a=wC(s)+wC(i.Pe);return Xm(s)&&Xm(i.Pe)?iT(a):Av(i.serializer,a)}(t,e)}function gV(t,e,n){return t instanceof Ai?sT(t,e):t instanceof Mi?aT(t,e):n}function oT(t,e){return t instanceof es?function(r){return Xm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Xo=class extends Zo{},Ai=class extends Zo{constructor(e){super(),this.elements=e}};function sT(t,e){let n=cT(e);for(let r of t.elements)n.some(i=>Ln(i,r))||n.push(r);return{arrayValue:{values:n}}}var Mi=class extends Zo{constructor(e){super(),this.elements=e}};function aT(t,e){let n=cT(e);for(let r of t.elements)n=n.filter(i=>!Ln(i,r));return{arrayValue:{values:n}}}var es=class extends Zo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function wC(t){return Ne(t.integerValue||t.doubleValue)}function cT(t){return bv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function mV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ai&&i instanceof Ai||r instanceof Mi&&i instanceof Mi?Wo(r.elements,i.elements,Ln):r instanceof es&&i instanceof es?Ln(r.Pe,i.Pe):r instanceof Xo&&i instanceof Xo}(t.transform,e.transform)}var dy=class{constructor(e,n){this.version=e,this.transformResults=n}},or=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ql(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ts=class{};function uT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ja(t.key,or.none()):new Ri(t.key,t.data,or.none());{let n=t.data,r=ln.empty(),i=new yt(Ut.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ur(t.key,r,new Pn(i.toArray()),or.none())}}function yV(t,e,n){t instanceof Ri?function(i,o,s){let a=i.value.clone(),u=EC(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ur?function(i,o,s){if(!Ql(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=EC(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(lT(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,r){return t instanceof Ri?function(o,s,a,u){if(!Ql(o.precondition,s))return a;let l=o.value.clone(),h=DC(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ur?function(o,s,a,u){if(!Ql(o.precondition,s))return a;let l=DC(o.fieldTransforms,u,s),h=s.data;return h.setAll(lT(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Ql(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function vV(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=oT(r.transform,i||null);o!=null&&(n===null&&(n=ln.empty()),n.set(r.field,o))}return n||null}function IC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wo(r,i,(o,s)=>mV(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ri=class extends ts{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ur=class extends ts{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function lT(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function EC(t,e,n){let r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gV(s,a,n[i]))}return r}function DC(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,pV(o,s,e))}return r}var ja=class extends ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hy=class extends ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yV(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=rT();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=uT(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(n,r)=>IC(n,r))&&Wo(this.baseMutations,e.baseMutations,(n,r)=>IC(n,r))}},py=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=function(){return uV}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var gy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var my=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var We,ge;function _V(t){switch(t){default:return K();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function dT(t){if(t===void 0)return sr("GRPC error has no .code"),M.UNKNOWN;switch(t){case We.OK:return M.OK;case We.CANCELLED:return M.CANCELLED;case We.UNKNOWN:return M.UNKNOWN;case We.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case We.INTERNAL:return M.INTERNAL;case We.UNAVAILABLE:return M.UNAVAILABLE;case We.UNAUTHENTICATED:return M.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case We.NOT_FOUND:return M.NOT_FOUND;case We.ALREADY_EXISTS:return M.ALREADY_EXISTS;case We.PERMISSION_DENIED:return M.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case We.ABORTED:return M.ABORTED;case We.OUT_OF_RANGE:return M.OUT_OF_RANGE;case We.UNIMPLEMENTED:return M.UNIMPLEMENTED;case We.DATA_LOSS:return M.DATA_LOSS;default:return K()}}(ge=We||(We={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var bC=null;function wV(){return new TextEncoder}var IV=new jr([4294967295,4294967295],0);function CC(t){let e=wV().encode(t),n=new xm;return n.update(e),new Uint8Array(n.digest())}function TC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jr([n,r],0),new jr([i,o],0)]}var yy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ei(`Invalid padding: ${n}`);if(r<0)throw new Ei(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ei(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ei(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=jr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(jr.fromNumber(r)));return i.compare(IV)===1&&(i=new jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=CC(e),[r,i]=TC(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=CC(e),[r,i]=TC(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ei=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var id=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ua.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new je(ve),cr(),de())}},Ua=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var zo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},od=class{constructor(e,n){this.targetId=e,this.me=n}},sd=class{constructor(e,n,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ad=class{constructor(){this.fe=0,this.ge=AC(),this.pe=vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Ua(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=AC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},vy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=SC(),this.Qe=new je(ve)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(uy(o))if(r===0){let s=new z(o.path);this.Ue(n,s,hn.newNoDocument(s,te.min()))}else Ae(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}bC?.et(function(h,p,m,y,S){var x,R,L,G,H,he;let ke={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ne=p.unchangedNames;return ne&&(ke.bloomFilter={applied:S===0,hashCount:(x=ne?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(G=(L=(R=ne?.bits)===null||R===void 0?void 0:R.bitmap)===null||L===void 0?void 0:L.length)!==null&&G!==void 0?G:0,padding:(he=(H=ne?.bits)===null||H===void 0?void 0:H.padding)!==null&&he!==void 0?he:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),ke}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Br(r).toUint8Array()}catch(u){if(u instanceof ed)return Go("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new yy(s,i,o)}catch(u){return Go(u instanceof Ei?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&uy(a.target)){let u=new z(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,hn.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=de();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new id(e,n,this.Qe,this.ke,r);return this.ke=cr(),this.qe=SC(),this.Qe=new je(ve),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ad,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new yt(ve),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ad),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function SC(){return new je(z.comparator)}function AC(){return new je(z.comparator)}var EV={asc:"ASCENDING",desc:"DESCENDING"},DV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bV={and:"AND",or:"OR"},_y=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function wy(t,e){return t.useProto3Json||Md(e)?e:{value:e}}function cd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CV(t,e){return cd(t,e.toTimestamp())}function Fn(t){return Ae(!!t),te.fromTimestamp(function(n){let r=ar(n);return new lt(r.seconds,r.nanos)}(t))}function Mv(t,e){return Iy(t,e).canonicalString()}function Iy(t,e){let n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fT(t){let e=Oe.fromString(t);return Ae(vT(e)),e}function Ey(t,e){return Mv(t.databaseId,e.path)}function Vm(t,e){let n=fT(e);if(n.get(1)!==t.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(gT(n))}function pT(t,e){return Mv(t.databaseId,e)}function TV(t){let e=fT(t);return e.length===4?Oe.emptyPath():gT(e)}function Dy(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gT(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function MC(t,e,n){return{name:Ey(t,e),fields:n.value.mapValue.fields}}function SV(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ae(h===void 0||typeof h=="string"),vt.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:dT(l.code);return new F(h,l.message||"")}(s);n=new sd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vm(t,r.document.name),o=Fn(r.document.updateTime),s=r.document.createTime?Fn(r.document.createTime):te.min(),a=new ln({mapValue:{fields:r.document.fields}}),u=hn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new zo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vm(t,r.document),o=r.readTime?Fn(r.readTime):te.min(),s=hn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new zo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vm(t,r.document),o=r.removedTargetIds||[];n=new zo([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new my(i,o),a=r.targetId;n=new od(a,s)}}return n}function AV(t,e){let n;if(e instanceof Ri)n={update:MC(t,e.key,e.value)};else if(e instanceof ja)n={delete:Ey(t,e.key)};else if(e instanceof ur)n={update:MC(t,e.key,e.data),updateMask:LV(e.fieldMask)};else{if(!(e instanceof hy))return K();n={verify:Ey(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Xo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ai)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof es)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:CV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(t,e.precondition)),n}function MV(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Fn(i.updateTime):Fn(o);return s.isEqual(te.min())&&(s=Fn(o)),new dy(s,i.transformResults||[])}(n,e))):[]}function RV(t,e){return{documents:[pT(t,e.path)]}}function xV(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pT(t,i);let o=function(l){if(l.length!==0)return yT(fn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Bo(m.field),direction:OV(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=wy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function NV(t){let e=TV(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ae(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let m=mT(p);return m instanceof fn&&KC(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(S){return new Jo($o(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Md(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Yo(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Yo(y,m)}(n.endAt)),iV(e,i,s,o,a,"F",u,l)}function PV(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=$o(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$o(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=$o(n.unaryFilter.field);return Qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=$o(n.unaryFilter.field);return Qe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return Qe.create($o(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fn.create(n.compositeFilter.filters.map(r=>mT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function OV(t){return EV[t]}function kV(t){return DV[t]}function FV(t){return bV[t]}function Bo(t){return{fieldPath:t.canonicalString()}}function $o(t){return Ut.fromServerFormat(t.fieldPath)}function yT(t){return t instanceof Qe?function(n){if(n.op==="=="){if(gC(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NAN"}};if(pC(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gC(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NAN"}};if(pC(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(n.field),op:kV(n.op),value:n.value}}}(t):t instanceof fn?function(n){let r=n.getFilters().map(i=>yT(i));return r.length===1?r[0]:{compositeFilter:{op:FV(n.op),filters:r}}}(t):K()}function LV(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ba=class t{constructor(e,n,r,i,o=te.min(),s=te.min(),a=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var by=class{constructor(e){this.ct=e}};function VV(t){let e=NV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rd(e,e.limit,"L"):e}var ud=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Fa(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ar(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Br(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?qC(e)?this.dt(n,Number.MAX_SAFE_INTEGER):zC(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):K()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ne(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),z.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};ud.vt=new ud;var Cy=class{constructor(){this.un=new Ty}addToCollectionParentIndex(e,n){return this.un.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Ci.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}},Ty=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new yt(Oe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yt(Oe.comparator)).toArray()}};var Eq=new Uint8Array(0);var Nn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);var $a=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Sy=class{constructor(){this.changes=new $r(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ay=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var My=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ka(r.mutation,i,Pn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=Ii();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=xa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=cr(),s=Oa(),a=function(){return Oa()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof ur)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ka(h.mutation,l,h.mutation.getFieldMask(),lt.now())):s.set(l.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Ay(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Oa(),i=new je((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Pn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=rT();h.forEach(m=>{if(!o.has(m)){let y=uT(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):N.resolve(Ii()),a=-1,u=o;return s.next(l=>N.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:nT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=xa();return this.indexManager.getCollectionParents(e,o).next(a=>N.forEach(a,u=>{let l=function(p,m){return new Si(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,hn.newInvalidDocument(h)))});let a=xa();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ka(h.mutation,l,Pn.empty(),lt.now()),xd(n,l)&&(a=a.insert(u,l))}),a})}};var Ry=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return N.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}}(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:VV(i.bundledQuery),readTime:Fn(i.readTime)}}(n)),N.resolve()}};var xy=class{constructor(){this.overlays=new je(z.comparator),this.Ir=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ii();return N.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),N.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){let i=Ii(),o=n.length+1,s=new z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new je((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ii(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ii(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return N.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new gy(n,r));let o=this.Ir.get(n);o===void 0&&(o=de(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var Ny=class{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,N.resolve()}};var Ha=class{constructor(){this.Tr=new yt(Ke.Er),this.dr=new yt(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ke(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ke(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new z(new Oe([])),r=new Ke(n,e),i=new Ke(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new z(new Oe([])),r=new Ke(n,e),i=new Ke(n,e+1),o=de();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ke(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return z.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||z.comparator(e.key,n.key)}};var Py=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new yt(Ke.Er)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new fy(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,n){return N.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yt(ve);return n.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),N.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new z(o),0),a=new yt(ve);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),N.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return N.forEach(n.mutations,i=>{let o=new Ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ke(n,0),i=this.br.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Oy=class{constructor(e){this.Mr=e,this.docs=function(){return new je(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():hn.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr(),s=n.path,a=new z(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||WL(GL(h),r)<=0||(i.has(h.key)||xd(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,n,r,i){K()}Or(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ky(this)}getSize(e){return N.resolve(this.size)}},ky=class extends Sy{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Fy=class{constructor(e){this.persistence=e,this.Nr=new $r(n=>Cv(n),Tv),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ha,this.targetCount=0,this.kr=$a.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),N.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Kn(n),N.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),N.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Br.containsKey(n))}};var Ly=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $C(0),this.Kr=!1,this.Kr=!0,this.$r=new Ny,this.referenceDelegate=e(this),this.Ur=new Fy(this),this.indexManager=new Cy,this.remoteDocumentCache=function(i){return new Oy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new by(n),this.Gr=new Ry(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Py(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new Vy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return N.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Vy=class extends Ym{constructor(e){super(),this.currentSequenceNumber=e}},jy=class t{constructor(e){this.persistence=e,this.Jr=new Ha,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),N.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return N.or([()=>N.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Uy=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var By=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $y=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zb()?8:QL(et())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new By;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ra()<=le.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),N.resolve()):(Ra()<=le.DEBUG&&j("QueryEngine","Query:",Uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ra()<=le.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):N.resolve())}Yi(e,n){if(_C(n))return N.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rd(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,rd(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return _C(n)||i.isEqual(te.min())?N.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?N.resolve(null):(Ra()<=le.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uo(n)),this.rs(e,s,n,qL(i,-1)).next(a=>a))})}ts(e,n){let r=new yt(eT(e));return n.forEach((i,o)=>{xd(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Ra()<=le.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ci.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Hy=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new je(ve),this._s=new $r(o=>Cv(o),Tv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new My(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function jV(t,e,n,r){return new Hy(t,e,n,r)}function _T(t,e){return _(this,null,function*(){let n=Z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=de();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function UV(t,e){let n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=N.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(x=>{let R=l.docVersions.get(S);Ae(R!==null),x.version.compareTo(R)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),h.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wT(t){let e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function BV(t,e){let n=Z(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(vt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(x,R,L){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(o,y))});let u=cr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push($V(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(te.min())){let h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return N.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function $V(t,e,n){let r=de(),i=de();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function HV(t,e){let n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zV(t,e){let n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Ba(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function zy(t,e,n){return _(this,null,function*(){let r=Z(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ya(s))throw s;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function RC(t,e,n){let r=Z(t),i=te.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Z(u),m=p._s.get(h);return m!==void 0?N.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:de())).next(a=>(qV(r,sV(e),a),{documents:a,Ts:o})))}function qV(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}var ld=class{constructor(){this.activeTargetIds=hV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qy=class{constructor(){this.so=new ld,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ld,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Gy=class{_o(e){}shutdown(){}};var dd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wl=null;function jm(){return Wl===null?Wl=function(){return 268435456+Math.round(2147483648*Math.random())}():Wl++,"0x"+Wl.toString(16)}var GV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Wy=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var mt="WebChannelConnection",Ky=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=jm(),u=this.xo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(h=>(j("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Go("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+is}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=GV[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=jm();return new Promise((s,a)=>{let u=new Nm;u.setWithCredentials(!0),u.listenOnce(Om.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ma.NO_ERROR:let h=u.getResponseJson();j(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ma.TIMEOUT:j(mt,`RPC '${e}' ${o} timed out`),a(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ma.HTTP_ERROR:let p=u.getStatus();if(j(mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let S=function(R){let L=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(L)>=0?L:M.UNKNOWN}(y.status);a(new F(S,y.message))}else a(new F(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new F(M.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{j(mt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);j(mt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=jm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Lm(),a=Fm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Pm({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,S=new Wy({Io:R=>{y?j(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(j(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(mt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),x=(R,L,G)=>{R.listen(L,H=>{try{G(H)}catch(he){setTimeout(()=>{throw he},0)}})};return x(p,jo.EventType.OPEN,()=>{y||(j(mt,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),x(p,jo.EventType.CLOSE,()=>{y||(y=!0,j(mt,`RPC '${e}' stream ${i} transport closed`),S.So())}),x(p,jo.EventType.ERROR,R=>{y||(y=!0,Go(mt,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new F(M.UNAVAILABLE,"The operation could not be completed")))}),x(p,jo.EventType.MESSAGE,R=>{var L;if(!y){let G=R.data[0];Ae(!!G);let H=G,he=H.error||((L=H[0])===null||L===void 0?void 0:L.error);if(he){j(mt,`RPC '${e}' stream ${i} received error:`,he);let ke=he.status,ne=function(w){let E=We[w];if(E!==void 0)return dT(E)}(ke),D=he.message;ne===void 0&&(ne=M.INTERNAL,D="Unknown error status: "+ke+" with message "+he.message),y=!0,S.So(new F(ne,D)),p.close()}else j(mt,`RPC '${e}' stream ${i} received:`,G),S.bo(G)}}),x(a,km.STAT_EVENT,R=>{R.stat===ql.PROXY?j(mt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===ql.NOPROXY&&j(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function Um(){return typeof document<"u"?document:null}function Nd(t){return new _y(t,!0)}var hd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var fd=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Qy=class extends fd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=SV(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?Fn(s.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Dy(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=uy(u)?{documents:RV(o,u)}:{query:xV(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=hT(o,s.resumeToken);let l=wy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=cd(o,s.snapshotVersion.toTimestamp());let l=wy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=PV(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Dy(this.serializer),n.removeTarget=e,this.a_(n)}},Yy=class extends fd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=MV(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Dy(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>AV(this.serializer,r))};this.a_(n)}};var Jy=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Iy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Iy(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Zy=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(n),this.D_=!1):j("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Xy=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Ni(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=Z(u);l.L_.add(4),yield Ja(l),l.q_.set("Unknown"),l.L_.delete(4),yield Pd(l)})}(this))}))}),this.q_=new Zy(r,i)}};function Pd(t){return _(this,null,function*(){if(Ni(t))for(let e of t.B_)yield e(!0)})}function Ja(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function IT(t,e){let n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Pv(n)?Nv(n):ss(n).r_()&&xv(n,e))}function Rv(t,e){let n=Z(t),r=ss(n);n.N_.delete(e),r.r_()&&ET(n,e),n.N_.size===0&&(r.r_()?r.o_():Ni(n)&&n.q_.set("Unknown"))}function xv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ss(t).A_(e)}function ET(t,e){t.Q_.xe(e),ss(t).R_(e)}function Nv(t){t.Q_=new vy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ss(t).start(),t.q_.v_()}function Pv(t){return Ni(t)&&!ss(t).n_()&&t.N_.size>0}function Ni(t){return Z(t).L_.size===0}function DT(t){t.Q_=void 0}function WV(t){return _(this,null,function*(){t.q_.set("Online")})}function KV(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{xv(t,e)})})}function QV(t,e){return _(this,null,function*(){DT(t),Pv(t)?(t.q_.M_(e),Nv(t)):t.q_.set("Unknown")})}function YV(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof sd&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pd(t,r)}else if(e instanceof zo?t.Q_.Ke(e):e instanceof od?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{let r=yield wT(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),ET(o,u);let p=new Ba(h.target,u,l,h.sequenceNumber);xv(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield pd(t,r)}})}function pd(t,e,n){return _(this,null,function*(){if(!Ya(e))throw e;t.L_.add(1),yield Ja(t),t.q_.set("Offline"),n||(n=()=>wT(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Pd(t)}))})}function bT(t,e){return e().catch(n=>pd(t,n,e))}function Od(t){return _(this,null,function*(){let e=Z(t),n=Hr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;JV(e);)try{let i=yield HV(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,ZV(e,i)}catch(i){yield pd(e,i)}CT(e)&&TT(e)})}function JV(t){return Ni(t)&&t.O_.length<10}function ZV(t,e){t.O_.push(e);let n=Hr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function CT(t){return Ni(t)&&!Hr(t).n_()&&t.O_.length>0}function TT(t){Hr(t).start()}function XV(t){return _(this,null,function*(){Hr(t).p_()})}function e2(t){return _(this,null,function*(){let e=Hr(t);for(let n of t.O_)e.m_(n.mutations)})}function t2(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=py.from(r,e,n);yield bT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Od(t)})}function n2(t,e){return _(this,null,function*(){e&&Hr(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return _V(s)&&s!==M.ABORTED}(i.code)){let o=r.O_.shift();Hr(r).s_(),yield bT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Od(r)}})}(t,e)),CT(t)&&TT(t)})}function xC(t,e){return _(this,null,function*(){let n=Z(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=Ni(n);n.L_.add(3),yield Ja(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Pd(n)})}function r2(t,e){return _(this,null,function*(){let n=Z(t);e?(n.L_.delete(2),yield Pd(n)):e||(n.L_.add(2),yield Ja(n),n.q_.set("Unknown"))})}function ss(t){return t.K_||(t.K_=function(n,r,i){let o=Z(n);return o.w_(),new Qy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:WV.bind(null,t),Ro:KV.bind(null,t),mo:QV.bind(null,t),d_:YV.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),Pv(t)?Nv(t):t.q_.set("Unknown")):(yield t.K_.stop(),DT(t))}))),t.K_}function Hr(t){return t.U_||(t.U_=function(n,r,i){let o=Z(n);return o.w_(),new Yy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:XV.bind(null,t),mo:n2.bind(null,t),f_:e2.bind(null,t),g_:t2.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield Od(t)):(yield t.U_.stop(),t.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var ev=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ov(t,e){if(sr("AsyncQueue",`${e}: ${t}`),Ya(t))return new F(M.UNAVAILABLE,`${e}: ${t}`);throw t}var gd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=xa(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var md=class{constructor(){this.W_=new je(z.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},ns=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,gd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var tv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},nv=class{constructor(){this.queries=NC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Z(n),o=i.queries;i.queries=NC(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new F(M.ABORTED,"Firestore shutting down"))}};function NC(){return new $r(t=>XC(t),Rd)}function ST(t,e){return _(this,null,function*(){let n=Z(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new tv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Ov(s,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&kv(n)})}function AT(t,e){return _(this,null,function*(){let n=Z(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function i2(t,e){let n=Z(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&kv(n)}function o2(t,e,n){let r=Z(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function kv(t){t.Y_.forEach(e=>{e.next()})}var rv,PC;(PC=rv||(rv={})).ea="default",PC.Cache="cache";var yd=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rv.Cache}};var vd=class{constructor(e){this.key=e}},_d=class{constructor(e){this.key=e}},iv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=eT(e),this.Ra=new gd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new md,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=xd(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==x&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,S){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return x(y)-x(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new ns(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new md,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new _d(r))}),this.da.forEach(r=>{e.has(r)||n.push(new vd(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ns.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ov=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},sv=class{constructor(e){this.key=e,this.va=!1}},av=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new $r(a=>XC(a),Rd),this.Ma=new Map,this.xa=new Set,this.Oa=new je(z.comparator),this.Na=new Map,this.La=new Ha,this.Ba={},this.ka=new Map,this.qa=$a.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function s2(t,e,n=!0){return _(this,null,function*(){let r=OT(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield MT(r,e,n,!0),i})}function a2(t,e){return _(this,null,function*(){let n=OT(t);yield MT(n,e,!0,!1)})}function MT(t,e,n,r){return _(this,null,function*(){let i=yield zV(t.localStore,kn(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield c2(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&IT(t.remoteStore,i),a})}function c2(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,m,y)=>function(x,R,L,G){return _(this,null,function*(){let H=R.view.ma(L);H.ns&&(H=yield RC(x.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,H)));let he=G&&G.targetChanges.get(R.targetId),ke=G&&G.targetMismatches.get(R.targetId)!=null,ne=R.view.applyChanges(H,x.isPrimaryClient,he,ke);return kC(x,R.targetId,ne.wa),ne.snapshot})}(t,p,m,y);let o=yield RC(t.localStore,e,!0),s=new iv(e,o.Ts),a=s.ma(o.documents),u=Ua.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);kC(t,n,l.wa);let h=new ov(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function u2(t,e,n){return _(this,null,function*(){let r=Z(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Rd(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rv(r.remoteStore,i.targetId),cv(r,i.targetId)}).catch(Qa))):(cv(r,i.targetId),yield zy(r.localStore,i.targetId,!0))})}function l2(t,e){return _(this,null,function*(){let n=Z(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rv(n.remoteStore,r.targetId))})}function d2(t,e,n){return _(this,null,function*(){let r=v2(t);try{let i=yield function(s,a){let u=Z(s),l=lt.now(),h=a.reduce((y,S)=>y.add(S.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=cr(),x=de();return u.cs.getEntries(y,h).next(R=>{S=R,S.forEach((L,G)=>{G.isValidDocument()||(x=x.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let L=[];for(let G of a){let H=vV(G,p.get(G.key).overlayedDocument);H!=null&&L.push(new ur(G.key,H,GC(H.value.mapValue),or.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(R=>{m=R;let L=R.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,R.batchId,L)})}).then(()=>({batchId:m.batchId,changes:nT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new je(ve)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Za(r,i.changes),yield Od(r.remoteStore)}catch(i){let o=Ov(i,"Failed to persist write");n.reject(o)}})}function RT(t,e){return _(this,null,function*(){let n=Z(t);try{let r=yield BV(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Ae(s.va):i.removedDocuments.size>0&&(Ae(s.va),s.va=!1))}),yield Za(n,r,e)}catch(r){yield Qa(r)}})}function OC(t,e,n){let r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Z(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&kv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function h2(t,e,n){return _(this,null,function*(){let r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new je(z.comparator);s=s.insert(o,hn.newNoDocument(o,te.min()));let a=de().add(o),u=new id(te.min(),new Map,new je(ve),s,a);yield RT(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Fv(r)}else yield zy(r.localStore,e,!1).then(()=>cv(r,e,n)).catch(Qa)})}function f2(t,e){return _(this,null,function*(){let n=Z(t),r=e.batch.batchId;try{let i=yield UV(n.localStore,e);NT(n,r,null),xT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Za(n,i)}catch(i){yield Qa(i)}})}function p2(t,e,n){return _(this,null,function*(){let r=Z(t);try{let i=yield function(s,a){let u=Z(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ae(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);NT(r,e,n),xT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Za(r,i)}catch(i){yield Qa(i)}})}function xT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function NT(t,e,n){let r=Z(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function cv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||PT(t,r)})}function PT(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Rv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Fv(t))}function kC(t,e,n){for(let r of n)r instanceof vd?(t.La.addReference(r.key,e),g2(t,r)):r instanceof _d?(j("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||PT(t,r.key)):K()}function g2(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(j("SyncEngine","New document in limbo: "+n),t.xa.add(r),Fv(t))}function Fv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new z(Oe.fromString(e)),r=t.qa.next();t.Na.set(r,new sv(n)),t.Oa=t.Oa.insert(n,r),IT(t.remoteStore,new Ba(kn(Sv(n.path)),r,"TargetPurposeLimboResolution",$C.oe))}}function Za(t,e,n){return _(this,null,function*(){let r=Z(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Uy.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=Z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(l,m=>N.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>N.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ya(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),S=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(m,x)}}})}(r.localStore,o))})}function m2(t,e){return _(this,null,function*(){let n=Z(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield _T(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new F(M.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Za(n,r.hs)}})}function y2(t,e){let n=Z(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function OT(t){let e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h2.bind(null,e),e.Ca.d_=i2.bind(null,e.eventManager),e.Ca.$a=o2.bind(null,e.eventManager),e}function v2(t){let e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p2.bind(null,e),e}var wd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return jV(this.persistence,new $y,e.initialUser,this.serializer)}createPersistence(e){return new Ly(jy.Zr,this.serializer)}createSharedClientState(e){return new qy}terminate(){return _(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var uv=class{initialize(e,n){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m2.bind(null,this.syncEngine),yield r2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new nv}()}createDatastore(e){let n=Nd(e.databaseInfo.databaseId),r=function(o){return new Ky(o)}(e.databaseInfo);return function(o,s,a,u){return new Jy(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new Xy(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>OC(this.syncEngine,n,0),function(){return dd.D()?new dd:new Gy}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,h){let p=new av(i,o,s,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return _(this,null,function*(){var e,n;yield function(i){return _(this,null,function*(){let o=Z(i);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ja(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var Id=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var lv=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=Jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>_(this,null,function*(){j("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ov(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Bm(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield _T(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function FC(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield w2(t);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xC(e.remoteStore,i)),t._onlineComponents=e})}function _2(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function w2(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Bm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!_2(n))throw n;Go("Error using user provided cache. Falling back to memory cache: "+n),yield Bm(t,new wd)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Bm(t,new wd);return t._offlineComponents})}function kT(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield FC(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield FC(t,new uv))),t._onlineComponents})}function I2(t){return kT(t).then(e=>e.syncEngine)}function FT(t){return _(this,null,function*(){let e=yield kT(t),n=e.eventManager;return n.onListen=s2.bind(null,e.syncEngine),n.onUnlisten=u2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=a2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l2.bind(null,e.syncEngine),n})}function E2(t,e,n={}){let r=new dn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new Id({next:m=>{s.enqueueAndForget(()=>AT(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new F(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new F(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new yd(Sv(a.path),h,{includeMetadataChanges:!0,_a:!0});return ST(o,p)}(yield FT(t),t.asyncQueue,e,n,r)})),r.promise}function D2(t,e,n={}){let r=new dn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new Id({next:m=>{s.enqueueAndForget(()=>AT(o,p)),m.fromCache&&u.source==="server"?l.reject(new F(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new yd(a,h,{includeMetadataChanges:!0,_a:!0});return ST(o,p)}(yield FT(t),t.asyncQueue,e,n,r)})),r.promise}function LT(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var LC=new Map;function VT(t,e,n){if(!n)throw new F(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function b2(t,e,n,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VC(t){if(!z.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jC(t){if(z.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=kd(t);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function C2(t,e){if(e<=0)throw new F(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Ed=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},rs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ed({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ed(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $m;switch(r.type){case"firstParty":return new Gm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=LC.get(n);r&&(j("ComponentProvider","Removing Datastore"),LC.delete(n),r.terminate())}(this),Promise.resolve()}};function T2(t,e,n,r={}){var i;let o=(t=lr(t,rs))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=rt.MOCK_USER;else{a=Ub(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new rt(l)}t._authCredentials=new Hm(new Yl(a,u))}}var xi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Rt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ur=class t extends xi{constructor(e,n,r){super(e,n,Sv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Wt(t,e,...n){if(t=tt(t),VT("collection","path",e),t instanceof rs){let r=Oe.fromString(e,...n);return jC(r),new Ur(t,null,r)}{if(!(t instanceof Rt||t instanceof Ur))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Oe.fromString(e,...n));return jC(r),new Ur(t.firestore,null,r)}}function Vn(t,e,...n){if(t=tt(t),arguments.length===1&&(e=Jl.newId()),VT("doc","path",e),t instanceof rs){let r=Oe.fromString(e,...n);return VC(r),new Rt(t,null,new z(r))}{if(!(t instanceof Rt||t instanceof Ur))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Oe.fromString(e,...n));return VC(r),new Rt(t.firestore,t instanceof Ur?t.converter:null,new z(r))}}var dv=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new hd(this,"async_queue_retry"),this.Eu=()=>{let n=Um();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Um();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new dn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return _(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Ya(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw sr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=ev.createAndSchedule(this,e,n,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&K()}verifyOperationInProgress(){}mu(){return _(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};var zr=class extends rs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new dv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||UT(this),this._firestoreClient.terminate()}};function jT(t,e){let n=typeof t=="object"?t:wi(),r=typeof t=="string"?t:e||"(default)",i=un(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=jb("firestore");o&&T2(i,...o)}return i}function Lv(t){return t._firestoreClient||UT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function UT(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new Jm(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,LT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new lv(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var za=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(vt.fromBase64String(e))}catch(n){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var qa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Dd=class{constructor(e){this._methodName=e}};var Ga=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}};var Wa=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var S2=/^__.*__$/,hv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ri(e,this.data,n,this.fieldTransforms)}};function BT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var fv=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return bd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(BT(this.wu)&&S2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},pv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nd(e)}Nu(e,n,r,i=!1){return new fv({wu:e,methodName:n,Ou:r,path:Ut.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Vv(t){let e=t._freezeSettings(),n=Nd(t._databaseId);return new pv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $T(t,e,n,r,i,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,i);qT("Data must be an object, but it was:",s,r);let a=HT(r,s),u,l;if(o.merge)u=new Pn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=M2(e,p,n);if(!s.contains(m))throw new F(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);x2(h,m)||h.push(m)}u=new Pn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new hv(new ln(a),u,l)}function A2(t,e,n,r=!1){return jv(n,t.Nu(r?4:3,e))}function jv(t,e){if(zT(t=tt(t)))return qT("Unsupported field value:",e,t),HT(t,e);if(t instanceof Dd)return function(r,i){if(!BT(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=jv(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=lt.fromDate(r);return{timestampValue:cd(i.serializer,o)}}if(r instanceof lt){let o=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cd(i.serializer,o)}}if(r instanceof Ga)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof za)return{bytesValue:hT(i.serializer,r._byteString)};if(r instanceof Rt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Mv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wa)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return Av(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${kd(r)}`)}(t,e)}function HT(t,e){let n={};return HC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(t,(r,i)=>{let o=jv(i,e.bu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function zT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Ga||t instanceof za||t instanceof Rt||t instanceof Dd||t instanceof Wa)}function qT(t,e,n){if(!zT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=kd(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function M2(t,e,n){if((e=tt(e))instanceof qa)return e._internalPath;if(typeof e=="string")return GT(t,e);throw bd("Field path arguments must be of type string or ",t,!1,void 0,n)}var R2=new RegExp("[~\\*/\\[\\]]");function GT(t,e,n){if(e.search(R2)>=0)throw bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qa(...e.split("."))._internalPath}catch{throw bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bd(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(M.INVALID_ARGUMENT,a+t+u)}function x2(t,e){return t.some(n=>n.isEqual(e))}var Cd=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(WT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},gv=class extends Cd{data(){return super.data()}};function WT(t,e){return typeof e=="string"?GT(t,e):e instanceof qa?e._internalPath:e._delegate._internalPath}function N2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ka=class{},Td=class extends Ka{};function Fd(t,e,...n){let r=[];e instanceof Ka&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof yv).length,a=o.filter(u=>u instanceof mv).length;if(s>1||s>0&&a>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var mv=class t extends Td{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return QT(e._query,n),new xi(e.firestore,e.converter,ly(e._query,n))}_parse(e){let n=Vv(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){BC(p,h);let y=[];for(let S of p)y.push(UC(u,o,S));m={arrayValue:{values:y}}}else m=UC(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||BC(p,h),m=A2(a,s,p,h==="in"||h==="not-in");return Qe.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var yv=class t extends Ka{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)QT(s,u),s=ly(s,u)}(e._query,n),new xi(e.firestore,e.converter,ly(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vv=class t extends Td{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new xi(e.firestore,e.converter,rd(e._query,this._limit,this._limitType))}};function KT(t){return C2("limit",t),vv._create("limit",t,"F")}function UC(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZC(e)&&n.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Oe.fromString(n));if(!z.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fC(t,new z(r))}if(n instanceof Rt)return fC(t,n._key);throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(n)}.`)}function BC(t,e){if(!Array.isArray(t)||t.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QT(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var _v=class{convertValue(e,n="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return os(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new Wa(o)}convertGeoPoint(e){return new Ga(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Dv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(La(e));default:return null}}convertTimestamp(e){let n=ar(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Oe.fromString(e);Ae(vT(r));let i=new td(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(n)||sr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function YT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Di=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Sd=class extends Cd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(WT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},qo=class extends Sd{data(e={}){return super.data(e)}},wv=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Di(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qo(this._firestore,this._userDataWriter,r.key,r,new Di(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new qo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Di(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new qo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Di(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:P2(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function P2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function JT(t){t=lr(t,Rt);let e=lr(t.firestore,zr);return E2(Lv(e),t._key).then(n=>O2(e,t,n))}var Ad=class extends _v{constructor(e){super(),this.firestore=e}convertBytes(e){return new za(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}};function Ld(t){t=lr(t,xi);let e=lr(t.firestore,zr),n=Lv(e),r=new Ad(e);return N2(t._query),D2(n,t._query).then(i=>new wv(e,r,t,i))}function Pi(t,e,n){t=lr(t,Rt);let r=lr(t.firestore,zr),i=YT(t.converter,e,n);return Uv(r,[$T(Vv(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,or.none())])}function ZT(t){return Uv(lr(t.firestore,zr),[new ja(t._key,or.none())])}function XT(t,e){let n=lr(t.firestore,zr),r=Vn(t),i=YT(t.converter,e);return Uv(n,[$T(Vv(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}function Uv(t,e){return function(r,i){let o=new dn;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return d2(yield I2(r),i,o)})),o.promise}(Lv(t),e)}function O2(t,e,n){let r=n.docs.get(e._key),i=new Ad(t);return new Sd(t,i,e._key,r,new Di(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){is=i})(Vr),Mt(new nt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new zr(new zm(r.getProvider("auth-internal")),new Km(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new td(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ut(uC,"4.7.0",e),ut(uC,"4.7.0","esm2017")})();var aS=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)($(di),$(Nr))},e.\u0275dir=kt({type:e});let t=e;return t})(),cS=(()=>{let e=class e extends aS{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Do(e)))(o||e)}})(),e.\u0275dir=kt({type:e,features:[hi]});let t=e;return t})(),qv=new W(""),k2={provide:qv,useExisting:yo(()=>Gv),multi:!0},Gv=(()=>{let e=class e extends cS{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Do(e)))(o||e)}})(),e.\u0275dir=kt({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Ee("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[cl([k2]),hi]});let t=e;return t})(),F2={provide:qv,useExisting:yo(()=>ls),multi:!0};function L2(){let t=Xn()?Xn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var V2=new W(""),ls=(()=>{let e=class e extends aS{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!L2())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)($(di),$(Nr),$(V2,8))},e.\u0275dir=kt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Ee("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[cl([F2]),hi]});let t=e;return t})();var j2=new W(""),U2=new W("");function uS(t){return t!=null}function lS(t){return Or(t)?Be(t):t}function dS(t){let e={};return t.forEach(n=>{e=n!=null?O(O({},e),n):e}),Object.keys(e).length===0?null:e}function hS(t,e){return e.map(n=>n(t))}function B2(t){return!t.validate}function fS(t){return t.map(e=>B2(e)?e:n=>e.validate(n))}function $2(t){if(!t)return null;let e=t.filter(uS);return e.length==0?null:function(n){return dS(hS(n,e))}}function pS(t){return t!=null?$2(fS(t)):null}function H2(t){if(!t)return null;let e=t.filter(uS);return e.length==0?null:function(n){let r=hS(n,e).map(lS);return pf(r).pipe(se(dS))}}function gS(t){return t!=null?H2(fS(t)):null}function eS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function z2(t){return t._rawValidators}function q2(t){return t._rawAsyncValidators}function Bv(t){return t?Array.isArray(t)?t:[t]:[]}function jd(t,e){return Array.isArray(t)?t.includes(e):t===e}function tS(t,e){let n=Bv(e);return Bv(t).forEach(i=>{jd(n,i)||n.push(i)}),n}function nS(t,e){return Bv(e).filter(n=>!jd(t,n))}var Ud=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},$v=class extends Ud{get formDirective(){return null}get path(){return null}},rc=class extends Ud{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Hv=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},G2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},zq=ce(O({},G2),{"[class.ng-submitted]":"isSubmitted"}),$d=(()=>{let e=class e extends Hv{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(rc,2))},e.\u0275dir=kt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&tg("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[hi]});let t=e;return t})();var Xa="VALID",Vd="INVALID",as="PENDING",ec="DISABLED",us=class{},Bd=class extends us{constructor(e,n){super(),this.value=e,this.source=n}},tc=class extends us{constructor(e,n){super(),this.pristine=e,this.source=n}},nc=class extends us{constructor(e,n){super(),this.touched=e,this.source=n}},cs=class extends us{constructor(e,n){super(),this.status=e,this.source=n}};function W2(t){return(Hd(t)?t.validators:t)||null}function K2(t){return Array.isArray(t)?pS(t):t||null}function Q2(t,e){return(Hd(e)?e.asyncValidators:t)||null}function Y2(t){return Array.isArray(t)?gS(t):t||null}function Hd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var zv=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=hl(()=>this.statusReactive()),this.statusReactive=al(void 0),this._pristine=hl(()=>this.pristineReactive()),this.pristineReactive=al(!0),this._touched=hl(()=>this.touchedReactive()),this.touchedReactive=al(!1),this._events=new ot,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Cn(this.statusReactive)}set status(e){Cn(()=>this.statusReactive.set(e))}get valid(){return this.status===Xa}get invalid(){return this.status===Vd}get pending(){return this.status==as}get disabled(){return this.status===ec}get enabled(){return this.status!==ec}get pristine(){return Cn(this.pristineReactive)}set pristine(e){Cn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Cn(this.touchedReactive)}set touched(e){Cn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nS(e,this._rawAsyncValidators))}hasValidator(e){return jd(this._rawValidators,e)}hasAsyncValidator(e){return jd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new nc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new nc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new tc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new tc(!0,r))}markAsPending(e={}){this.status=as;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new cs(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(O({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ec,this.errors=null,this._forEachChild(i=>{i.disable(ce(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bd(this.value,r)),this._events.next(new cs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xa,this._forEachChild(r=>{r.enable(ce(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xa||this.status===as)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bd(this.value,n)),this._events.next(new cs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(O({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ec:Xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=as,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=lS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new cs(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?ec:this.errors?Vd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(as)?as:this._anyControlsHaveStatus(Vd)?Vd:Xa}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new tc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new nc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Hd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=K2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Y2(this._rawAsyncValidators)}};var mS=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Wv}),Wv="always";function J2(t,e){return[...e.path,t]}function Z2(t,e,n=Wv){ej(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),tj(t,e),rj(t,e),nj(t,e),X2(t,e)}function rS(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function X2(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function ej(t,e){let n=z2(t);e.validator!==null?t.setValidators(eS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=q2(t);e.asyncValidator!==null?t.setAsyncValidators(eS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();rS(e._rawValidators,i),rS(e._rawAsyncValidators,i)}function tj(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&yS(t,e)})}function nj(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&yS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function yS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function rj(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function ij(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function oj(t){return Object.getPrototypeOf(t.constructor)===cS}function sj(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ls?n=o:oj(o)?r=o:i=o}),i||r||n||null}function iS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function oS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var aj=class extends zv{constructor(e=null,n,r){super(W2(n),Q2(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(oS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){oS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var cj={provide:rc,useExisting:yo(()=>ic)},sS=Promise.resolve(),ic=(()=>{let e=class e extends rc{constructor(r,i,o,s,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new aj,this._registered=!1,this.name="",this.update=new Pe,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=sj(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),ij(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Z2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){sS.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&dl(i);sS.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?J2(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)($($v,9),$(j2,10),$(U2,10),$(qv,10),$(kr,8),$(mS,8))},e.\u0275dir=kt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[cl([cj]),hi,Io]});let t=e;return t})();var uj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_o({type:e}),e.\u0275inj=vo({});let t=e;return t})();var zd=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:mS,useValue:r.callSetDisabledState??Wv}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_o({type:e}),e.\u0275inj=vo({imports:[uj]});let t=e;return t})();var oc={prod:!0,logging:!1,firebaseConfig:{apiKey:"AIzaSyCKKFA4iBcqm_RaojG8mBCIwRwiP_caKCE",authDomain:"impulse-develop.firebaseapp.com",projectId:"impulse-develop",storageBucket:"impulse-develop.appspot.com",messagingSenderId:"946243191276",appId:"1:946243191276:web:eed8ce767fa1d458aa40c9",measurementId:"G-BDL31YG14K"}};var _e=class{static log(...e){oc!=null&&oc.logging==!0&&console.log(...e)}};var lj="firebase",dj="10.13.0";ut(lj,dj,"app");var IS="@firebase/installations",Jv="0.6.8";var ES=1e4,DS=`w:${Jv}`,bS="FIS_v2",hj="https://firebaseinstallations.googleapis.com/v1",fj=60*60*1e3,pj="installations",gj="Installations";var mj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ki=new jt(pj,gj,mj);function CS(t){return t instanceof ct&&t.code.includes("request-failed")}function TS({projectId:t}){return`${hj}/projects/${t}/installations`}function SS(t){return{token:t.token,requestStatus:2,expiresIn:vj(t.expiresIn),creationTime:Date.now()}}function AS(t,e){return _(this,null,function*(){let r=(yield e.json()).error;return ki.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function MS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yj(t,{refreshToken:e}){let n=MS(t);return n.append("Authorization",_j(e)),n}function RS(t){return _(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function vj(t){return Number(t.replace("s","000"))}function _j(t){return`${bS} ${t}`}function wj(r,i){return _(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=TS(t),s=MS(t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:bS,appId:t.appId,sdkVersion:DS},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield RS(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:SS(p.authToken)}}else throw yield AS("Create Installation",h)})}function xS(t){return new Promise(e=>{setTimeout(e,t)})}function Ij(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var Ej=/^[cdef][\w-]{21}$/,Yv="";function Dj(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=bj(t);return Ej.test(n)?n:Yv}catch{return Yv}}function bj(t){return Ij(t).substr(0,22)}function Gd(t){return`${t.appName}!${t.appId}`}var NS=new Map;function PS(t,e){let n=Gd(t);OS(n,e),Cj(n,e)}function OS(t,e){let n=NS.get(t);if(n)for(let r of n)r(e)}function Cj(t,e){let n=Tj();n&&n.postMessage({key:t,fid:e}),Sj()}var Oi=null;function Tj(){return!Oi&&"BroadcastChannel"in self&&(Oi=new BroadcastChannel("[Firebase] FID Change"),Oi.onmessage=t=>{OS(t.data.key,t.data.fid)}),Oi}function Sj(){NS.size===0&&Oi&&(Oi.close(),Oi=null)}var Aj="firebase-installations-database",Mj=1,Fi="firebase-installations-store",Kv=null;function Zv(){return Kv||(Kv=$l(Aj,Mj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fi)}}})),Kv}function qd(t,e){return _(this,null,function*(){let n=Gd(t),i=(yield Zv()).transaction(Fi,"readwrite"),o=i.objectStore(Fi),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&PS(t,e.fid),e})}function kS(t){return _(this,null,function*(){let e=Gd(t),r=(yield Zv()).transaction(Fi,"readwrite");yield r.objectStore(Fi).delete(e),yield r.done})}function Wd(t,e){return _(this,null,function*(){let n=Gd(t),i=(yield Zv()).transaction(Fi,"readwrite"),o=i.objectStore(Fi),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&PS(t,a.fid),a})}function Xv(t){return _(this,null,function*(){let e,n=yield Wd(t.appConfig,r=>{let i=Rj(r),o=xj(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===Yv?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Rj(t){let e=t||{fid:Dj(),registrationStatus:0};return FS(e)}function xj(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(ki.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Nj(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Pj(t)}:{installationEntry:e}}function Nj(t,e){return _(this,null,function*(){try{let n=yield wj(t,e);return qd(t.appConfig,n)}catch(n){throw CS(n)&&n.customData.serverCode===409?yield kS(t.appConfig):yield qd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function Pj(t){return _(this,null,function*(){let e=yield _S(t.appConfig);for(;e.registrationStatus===1;)yield xS(100),e=yield _S(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield Xv(t);return r||n}return e})}function _S(t){return Wd(t,e=>{if(!e)throw ki.create("installation-not-found");return FS(e)})}function FS(t){return Oj(t)?{fid:t.fid,registrationStatus:0}:t}function Oj(t){return t.registrationStatus===1&&t.registrationTime+ES<Date.now()}function kj(r,i){return _(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=Fj(t,n),s=yj(t,n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:DS,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield RS(()=>fetch(o,l));if(h.ok){let p=yield h.json();return SS(p)}else throw yield AS("Generate Auth Token",h)})}function Fj(t,{fid:e}){return`${TS(t)}/${e}/authTokens:generate`}function e_(t,e=!1){return _(this,null,function*(){let n,r=yield Wd(t.appConfig,o=>{if(!LS(o))throw ki.create("not-registered");let s=o.authToken;if(!e&&jj(s))return o;if(s.requestStatus===1)return n=Lj(t,e),o;{if(!navigator.onLine)throw ki.create("app-offline");let a=Bj(o);return n=Vj(t,a),a}});return n?yield n:r.authToken})}function Lj(t,e){return _(this,null,function*(){let n=yield wS(t.appConfig);for(;n.authToken.requestStatus===1;)yield xS(100),n=yield wS(t.appConfig);let r=n.authToken;return r.requestStatus===0?e_(t,e):r})}function wS(t){return Wd(t,e=>{if(!LS(e))throw ki.create("not-registered");let n=e.authToken;return $j(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Vj(t,e){return _(this,null,function*(){try{let n=yield kj(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield qd(t.appConfig,r),n}catch(n){if(CS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield kS(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield qd(t.appConfig,r)}throw n}})}function LS(t){return t!==void 0&&t.registrationStatus===2}function jj(t){return t.requestStatus===2&&!Uj(t)}function Uj(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fj}function Bj(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $j(t){return t.requestStatus===1&&t.requestTime+ES<Date.now()}function Hj(t){return _(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield Xv(e);return r?r.catch(console.error):e_(e).catch(console.error),n.fid})}function zj(t,e=!1){return _(this,null,function*(){let n=t;return yield qj(n),(yield e_(n,e)).token})}function qj(t){return _(this,null,function*(){let{registrationPromise:e}=yield Xv(t);e&&(yield e)})}function Gj(t){if(!t||!t.options)throw Qv("App Configuration");if(!t.name)throw Qv("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Qv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Qv(t){return ki.create("missing-app-config-values",{valueName:t})}var VS="installations",Wj="installations-internal",Kj=t=>{let e=t.getProvider("app").getImmediate(),n=Gj(e),r=un(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Qj=t=>{let e=t.getProvider("app").getImmediate(),n=un(e,VS).getImmediate();return{getId:()=>Hj(n),getToken:i=>zj(n,i)}};function Yj(){Mt(new nt(VS,Kj,"PUBLIC")),Mt(new nt(Wj,Qj,"PRIVATE"))}Yj();ut(IS,Jv);ut(IS,Jv,"esm2017");var Kd="analytics",Jj="firebase_id",Zj="origin",Xj=60*1e3,eU="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",a_="https://www.googletagmanager.com/gtag/js";var xt=new Mn("@firebase/analytics");var tU={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bt=new jt("analytics","Analytics",tU);function nU(t){if(!t.startsWith(a_)){let e=Bt.create("invalid-gtag-resource",{gtagURL:t});return xt.warn(e.message),""}return t}function qS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rU(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function iU(t,e){let n=rU("firebase-js-sdk-policy",{createScriptURL:nU}),r=document.createElement("script"),i=`${a_}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function oU(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function sU(t,e,n,r,i,o){return _(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield qS(n)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){xt.error(a)}t("config",i,o)})}function aU(t,e,n,r,i){return _(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield qS(n);for(let u of s){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){xt.error(o)}})}function cU(t,e,n,r){function i(o,...s){return _(this,null,function*(){try{if(o==="event"){let[a,u]=s;yield aU(t,e,n,a,u)}else if(o==="config"){let[a,u]=s;yield sU(t,e,n,r,a,u)}else if(o==="consent"){let[a,u]=s;t("consent",a,u)}else if(o==="get"){let[a,u,l]=s;t("get",a,u,l)}else if(o==="set"){let[a]=s;t("set",a)}else t(o,...s)}catch(a){xt.error(a)}})}return i}function uU(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=cU(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function lU(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(a_)&&n.src.includes(t))return n;return null}var dU=30,hU=1e3,n_=class{constructor(e={},n=hU){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},GS=new n_;function fU(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function pU(t){return _(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:fU(r)},o=eU.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Bt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function gU(r){return _(this,arguments,function*(t,e=GS,n){let{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw Bt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Bt.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new r_;return setTimeout(()=>_(this,null,function*(){u.abort()}),n!==void 0?n:Xj),WS({appId:i,apiKey:o,measurementId:s},a,u,e)})}function WS(o,s,a){return _(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=GS){var u;let{appId:l,measurementId:h}=t;try{yield mU(r,e)}catch(p){if(h)return xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield pU(t);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!yU(m)){if(i.deleteThrottleMetadata(l),h)return xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:h};throw p}let y=Number((u=m?.customData)===null||u===void 0?void 0:u.httpStatus)===503?gm(n,i.intervalMillis,dU):gm(n,i.intervalMillis),S={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return i.setThrottleMetadata(l,S),xt.debug(`Calling attemptFetch again in ${y} millis`),WS(t,S,r,i)}})}function mU(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Bt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function yU(t){if(!(t instanceof ct)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var r_=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var i_;function vU(t,e,n,r,i){return _(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}var o_;function _U(t){o_=t}function wU(t){i_=t}function IU(){return _(this,null,function*(){if(Sa())try{yield jl()}catch(t){return xt.warn(Bt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return xt.warn(Bt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function EU(t,e,n,r,i,o,s){return _(this,null,function*(){var a;let u=gU(t);u.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&xt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>xt.error(y)),e.push(u);let l=IU().then(y=>{if(y)return r.getId()}),[h,p]=yield Promise.all([u,l]);lU(o)||iU(o,h.measurementId),o_&&(i("consent","default",o_),_U(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[Zj]="firebase",m.update=!0,p!=null&&(m[Jj]=p),i("config",h.measurementId,m),i_&&(i("set",i_),wU(void 0)),h.measurementId})}var s_=class{constructor(e){this.app=e}_delete(){return delete sc[this.app.options.appId],Promise.resolve()}},sc={},jS=[],US={},t_="dataLayer",DU="gtag",BS,KS,$S=!1;function bU(){let t=[];if(Vl()&&t.push("This is a browser extension environment."),qb()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Bt.create("invalid-analytics-context",{errorInfo:e});xt.warn(n.message)}}function CU(t,e,n){bU();let r=t.options.appId;if(!r)throw Bt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bt.create("no-api-key");if(sc[r]!=null)throw Bt.create("already-exists",{id:r});if(!$S){oU(t_);let{wrappedGtag:o,gtagCore:s}=uU(sc,jS,US,t_,DU);KS=o,BS=s,$S=!0}return sc[r]=EU(t,jS,US,e,BS,t_,n),new s_(t)}function QS(t=wi()){t=tt(t);let e=un(t,Kd);return e.isInitialized()?e.getImmediate():TU(t)}function TU(t,e={}){let n=un(t,Kd);if(n.isInitialized()){let i=n.getImmediate();if(nr(e,n.getOptions()))return i;throw Bt.create("already-initialized")}return n.initialize({options:e})}function c_(t,e,n,r){t=tt(t),vU(KS,sc[t.app.options.appId],e,n,r).catch(i=>xt.error(i))}var HS="@firebase/analytics",zS="0.10.7";function SU(){Mt(new nt(Kd,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return CU(r,i,n)},"PUBLIC")),Mt(new nt("analytics-internal",t,"PRIVATE")),ut(HS,zS),ut(HS,zS,"esm2017");function t(e){try{let n=e.getProvider(Kd).getImmediate();return{logEvent:(r,i,o)=>c_(n,r,i,o)}}catch(n){throw Bt.create("interop-component-reg-failed",{reason:n})}}}SU();var ds=class t{app;analytics;constructor(){_e.log("FirebaseService: Init",this),this.app=Rm(oc.firebaseConfig),this.analytics=QS(this.app),_e.log("FirebaseService: Init Complete",this)}log(e,n=null){let r={url:window.location.href,device:window.navigator.userAgent,timestamp:new Date().toISOString(),event:e};n&&(r.data=n),_e.log("FirebaseService: Sending Event to Analytics: ",e,r),c_(this.analytics,e,r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var jn=class t{constructor(e){this.firebase=e;_e.log("FirestoreService: Init",this),this.firestore=jT(this.firebase.app),_e.log("FirestoreService: Init Complete",this)}firestore;data={};read(r){return _(this,arguments,function*(e,n={order:"order",start:1,end:100,limit:100}){_e.log("FirestoreService: read:: ",e,n);let i=Wt(this.firestore,e),o=Fd(i,KT(n.limit)),s=[];return(yield Ld(o)).forEach(u=>{let l=u.data();l.id=u.id,s.push(l)}),s.sort((u,l)=>u.order-l.order),Promise.resolve(s)})}static \u0275fac=function(n){return new(n||t)(J(ds))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};function AU(t,e){if(t&1){let n=sn();V(0,"tr")(1,"td"),fe(2),U(),V(3,"td")(4,"i",10),Ee("click",function(){let i=ze(n).$implicit,o=De();return qe(o.edit(i))}),fe(5,"edit"),U()()()}if(t&2){let n=e.$implicit;we(2),fi(n.id)}}function MU(t,e){if(t&1){let n=sn();V(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h4",15),fe(5,"Document Data"),U(),V(6,"button",16),Ee("click",function(){ze(n);let i=De();return qe(i.document=void 0)}),U()(),V(7,"div",17)(8,"div",18)(9,"div",19)(10,"textarea",20),bn("ngModelChange",function(i){ze(n);let o=De();return Zn(o.data,i)||(o.data=i),qe(i)}),U()()()(),V(11,"div",21)(12,"i",22),Ee("click",function(){ze(n);let i=De();return qe(i.save())}),fe(13,"save"),U(),V(14,"i",23),Ee("click",function(){ze(n);let i=De();return qe(i.delete())}),fe(15,"delete"),U()()()()()}if(t&2){let n=De();we(10),Dn("ngModel",n.data)}}var ac=class t{constructor(e){this.firestore=e}key;document;data;documents=[];edit(e){this.document=e,this.data=JSON.stringify(this.document?.data(),null,1)}fetch(){if(!this.key)return;this.documents=[];let e=Wt(this.firestore.firestore,this.key),n=Fd(e);Ld(n).then(r=>{r.forEach(i=>{this.documents.push(i)})})}save(){return _(this,null,function*(){if(this.data&&!(!this.key||!this.document)){var e=void 0;try{e=JSON.parse(this.data)}catch(n){console.error(n),alert("Error while parsing document data, please check and retry");return}this.document?.id?(yield Pi(Vn(Wt(this.firestore.firestore,this.key),this.document?.id),e),alert("Document Updated.")):e.id?(yield Pi(Vn(Wt(this.firestore.firestore,this.key),e.id),e),alert("Document Added.")):(yield XT(Wt(this.firestore.firestore,this.key),e),alert("Document Added.")),this.document=void 0}})}delete(){return _(this,null,function*(){this.data&&(!this.key||!this.document||(yield ZT(Vn(Wt(this.firestore.firestore,this.key),this.document?.id)),this.document=void 0))})}static \u0275fac=function(n){return new(n||t)($(jn))};static \u0275cmp=Le({type:t,selectors:[["app-admin"]],standalone:!0,features:[Ve],decls:24,vars:3,consts:[[1,"row","m-0"],[1,"mt-3","col-6","text-end"],["type","text","placeholder","Collection",3,"ngModelChange","ngModel"],[1,"mt-3","col-6"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"p-3"],[1,"table"],[4,"ngFor","ngForOf"],[1,"material-icons","mx-2","text-info","pointer",3,"click"],["class","modal extended",4,"ngIf"],[1,"m-2","material-icons","pointer",3,"click"],[1,"modal","extended"],[1,"modal-dialog","modal-fullscreen"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-12","my-2"],["rows","15",1,"form-control","x",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"m-2","text-primary","material-icons","pointer",3,"click"],[1,"m-2","text-danger","material-icons","pointer",3,"click"]],template:function(n,r){n&1&&(V(0,"div",0)(1,"div",1)(2,"input",2),bn("ngModelChange",function(o){return Zn(r.key,o)||(r.key=o),o}),U()(),V(3,"div",3)(4,"button",4),Ee("click",function(){return r.fetch()}),fe(5,"Fetch"),U()()(),V(6,"div",0)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),fe(12,"Document Key"),U(),V(13,"th"),fe(14,"Action"),U()()(),V(15,"tbody"),bt(16,AU,6,1,"tr",7),V(17,"tr")(18,"th"),fe(19,"Add New Document"),U(),V(20,"th")(21,"i",8),Ee("click",function(){return r.edit({})}),fe(22,"add"),U()()()()()()(),bt(23,MU,16,1,"div",9)),n&2&&(we(2),Dn("ngModel",r.key),we(14),Me("ngForOf",r.documents),we(7),Me("ngIf",r.document))},dependencies:[zd,ls,$d,ic,yl,Tn],styles:[".modal.extended[_ngcontent-%COMP%]{display:block}.modal.extended[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fffaf0}"]})};var u_=(t,e)=>{let n,r=sessionStorage.getItem("user");return r!=null&&(n=JSON.parse(r)),e.url.includes("admin")&&(n==null||n.role!="ADMIN")?(k(gt).navigate(["/unauthorized"]),!1):!0};function dA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hA=dA,fA=new jt("auth","Firebase",dA());var th=new Mn("@firebase/auth");function RU(t,...e){th.logLevel<=le.WARN&&th.warn(`Auth (${Vr}): ${t}`,...e)}function Jd(t,...e){th.logLevel<=le.ERROR&&th.error(`Auth (${Vr}): ${t}`,...e)}function Bn(t,...e){throw S_(t,...e)}function pn(t,...e){return S_(t,...e)}function T_(t,e,n){let r=Object.assign(Object.assign({},hA()),{[e]:n});return new jt("auth","Firebase",r).create(e,{appName:t.name})}function Li(t){return T_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xU(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Bn(t,"argument-error"),T_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function S_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fA.create(t,...e)}function Q(t,e,...n){if(!t)throw S_(e,...n)}function hr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Jd(e),new Error(e)}function pr(t,e){t||hr(e)}function h_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NU(){return JS()==="http:"||JS()==="https:"}function JS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function PU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NU()||Vl()||"connection"in navigator)?navigator.onLine:!0}function OU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Vi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=Bb()||$b()}get(){return PU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function A_(t,e){pr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var nh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var kU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var FU=new Vi(3e4,6e4);function M_(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ps(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return pA(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Vo(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),nh.fetch()(gA(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function pA(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},kU),e);try{let i=new f_(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Yd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Yd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Yd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw T_(t,h,l);Bn(t,h)}}catch(i){if(i instanceof ct)throw i;Bn(t,"network-request-failed",{message:String(i)})}})}function LU(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield ps(t,e,n,r,i);return"mfaPendingCredential"in l&&Bn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function gA(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?A_(t.config,i):`${t.config.apiScheme}://${i}`}var f_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),FU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Yd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=pn(t,e,r);return i.customData._tokenResponse=n,i}function VU(t,e){return _(this,null,function*(){return ps(t,"POST","/v1/accounts:delete",e)})}function mA(t,e){return _(this,null,function*(){return ps(t,"POST","/v1/accounts:lookup",e)})}function cc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function yA(t,e=!1){return _(this,null,function*(){let n=tt(t),r=yield n.getIdToken(e),i=R_(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cc(l_(i.auth_time)),issuedAtTime:cc(l_(i.iat)),expirationTime:cc(l_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function l_(t){return Number(t)*1e3}function R_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{let i=dm(n);return i?JSON.parse(i):(Jd("Failed to decode base64 JWT payload"),null)}catch(i){return Jd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ZS(t){let e=R_(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lc(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ct&&jU(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function jU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var p_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var dc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rh(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield lc(t,mA(n,{idToken:r}));Q(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?_A(o.providerUserInfo):[],a=UU(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new dc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function vA(t){return _(this,null,function*(){let e=tt(t);yield rh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function UU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _A(t){return t.map(e=>{var{providerId:n}=e,r=Kc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function BU(t,e){return _(this,null,function*(){let n=yield pA(t,{},()=>_(this,null,function*(){let r=Vo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=gA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nh.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function $U(t,e){return _(this,null,function*(){return ps(t,"POST","/v2/accounts:revokeToken",M_(t,e))})}var uc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let n=ZS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield BU(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return hr("not implemented")}};function qr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var fs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Kc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new p_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield lc(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return yA(this,e)}reload(){return vA(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield rh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(xn(this.auth.app))return Promise.reject(Li(this.auth));let e=yield this.getIdToken();return yield lc(this,VU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,L=(l=n.createdAt)!==null&&l!==void 0?l:void 0,G=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:H,emailVerified:he,isAnonymous:ke,providerData:ne,stsTokenManager:D}=n;Q(H&&D,e,"internal-error");let v=uc.fromJSON(this.name,D);Q(typeof H=="string",e,"internal-error"),qr(p,e.name),qr(m,e.name),Q(typeof he=="boolean",e,"internal-error"),Q(typeof ke=="boolean",e,"internal-error"),qr(y,e.name),qr(S,e.name),qr(x,e.name),qr(R,e.name),qr(L,e.name),qr(G,e.name);let w=new t({uid:H,auth:e,email:m,emailVerified:he,displayName:p,isAnonymous:ke,photoURL:S,phoneNumber:y,tenantId:x,stsTokenManager:v,createdAt:L,lastLoginAt:G});return ne&&Array.isArray(ne)&&(w.providerData=ne.map(E=>Object.assign({},E))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new uc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?_A(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new uc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var XS=new Map;function fr(t){pr(t instanceof Function,"Expected a class definition");let e=XS.get(t);return e?(pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XS.set(t,e),e)}var HU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),g_=HU;function Zd(t,e,n){return`firebase:${t}:${e}:${n}`}var ih=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Zd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?fs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(fr(g_),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||fr(g_),s=Zd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p=fs._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function eA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CA(e))return"Blackberry";if(TA(e))return"Webos";if(IA(e))return"Safari";if((e.includes("chrome/")||EA(e))&&!e.includes("edge/"))return"Chrome";if(bA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function wA(t=et()){return/firefox\//i.test(t)}function IA(t=et()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EA(t=et()){return/crios\//i.test(t)}function DA(t=et()){return/iemobile/i.test(t)}function bA(t=et()){return/android/i.test(t)}function CA(t=et()){return/blackberry/i.test(t)}function TA(t=et()){return/webos/i.test(t)}function x_(t=et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zU(t=et()){var e;return x_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qU(){return Hb()&&document.documentMode===10}function SA(t=et()){return x_(t)||bA(t)||TA(t)||CA(t)||/windows phone/i.test(t)||DA(t)}function AA(t,e=[]){let n;switch(t){case"Browser":n=eA(et());break;case"Worker":n=`${eA(et())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${r}`}var m_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function GU(n){return _(this,arguments,function*(t,e={}){return ps(t,"GET","/v2/passwordPolicy",M_(t,e))})}var WU=6,y_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:WU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var v_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oh(this),this.idTokenSubscription=new oh(this),this.beforeStateQueue=new m_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ih.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield mA(this,{idToken:e}),r=yield fs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(xn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield rh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=OU()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(xn(this.app))return Promise.reject(Li(this));let n=e?tt(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return xn(this.app)?Promise.reject(Li(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return xn(this.app)?Promise.reject(Li(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(fr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield GU(this),n=new y_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield $U(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&fr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=yield ih.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&RU(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function fh(t){return tt(t)}var oh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Wb(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var N_={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KU(t){N_=t}function QU(t){return N_.loadJS(t)}function YU(){return N_.gapiScript}function MA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function RA(t,e){let n=un(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(nr(o,e??{}))return i;Bn(i,"already-initialized")}return n.initialize({options:e})}function JU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function xA(t,e,n){let r=fh(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=NA(e),{host:s,port:a}=ZU(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||XU()}function NA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZU(t){let e=NA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:tA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:tA(s)}}}function tA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function XU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var hc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}};function hs(t,e){return _(this,null,function*(){return LU(t,"POST","/v1/accounts:signInWithIdp",M_(t,e))})}var eB="http://localhost",sh=class t extends hc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Kc(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return hs(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,hs(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,hs(e,n)}buildRequest(){let e={requestUri:eB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vo(n)}return e}};var fc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ah=class extends fc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var mc=(()=>{class t extends ah{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return sh._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var pc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield fs._fromIdTokenResponse(e,r,i),s=nA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=nA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function nA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var __=class t extends ct{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function PA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?__._fromErrorAndOperation(t,o,e,r):o})}function tB(t,e,n=!1){return _(this,null,function*(){let r=yield lc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return pc._forOperation(t,"link",r)})}function nB(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(xn(r.app))return Promise.reject(Li(r));let i="reauthenticate";try{let o=yield lc(t,PA(r,i,e,t),n);Q(o.idToken,r,"internal-error");let s=R_(o.idToken);Q(s,r,"internal-error");let{sub:a}=s;return Q(t.uid===a,r,"user-mismatch"),pc._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Bn(r,"user-mismatch"),o}})}function rB(t,e,n=!1){return _(this,null,function*(){if(xn(t.app))return Promise.reject(Li(t));let r="signIn",i=yield PA(t,r,e),o=yield pc._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function OA(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function kA(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function P_(t){return tt(t).signOut()}var ch="__sak";var uh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var iB=1e3,oB=10,sB=(()=>{class t extends uh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);qU()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,oB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},iB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield _r(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield _r(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield _r(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),FA=sB;var aB=(()=>{class t extends uh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),O_=aB;function cB(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var uB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield cB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function k_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var w_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=k_("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Un(){return window}function lB(t){Un().location.href=t}function LA(){return typeof Un().WorkerGlobalScope<"u"&&typeof Un().importScripts=="function"}function dB(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function hB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fB(){return LA()?self:null}var VA="firebaseLocalStorageDb",pB=1,lh="firebaseLocalStorage",jA="fbase_key",ji=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ph(t,e){return t.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function gB(){let t=indexedDB.deleteDatabase(VA);return new ji(t).toPromise()}function I_(){let t=indexedDB.open(VA,pB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(lh,{keyPath:jA})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(lh)?e(r):(r.close(),yield gB(),e(yield I_()))}))})}function rA(t,e,n){return _(this,null,function*(){let r=ph(t,!0).put({[jA]:e,value:n});return new ji(r).toPromise()})}function mB(t,e){return _(this,null,function*(){let n=ph(t,!1).get(e),r=yield new ji(n).toPromise();return r===void 0?null:r.value})}function iA(t,e){let n=ph(t,!0).delete(e);return new ji(n).toPromise()}var yB=800,vB=3,_B=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield I_(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>vB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return LA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=uB._getInstance(fB()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield dB(),!this.activeServiceWorker)return;this.sender=new w_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||hB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield I_();return yield rA(n,ch,"1"),yield iA(n,ch),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>rA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>mB(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>iA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=ph(o,!1).getAll();return new ji(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),yB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),UA=_B;var q5=MA("rcb"),G5=new Vi(3e4,6e4);function BA(t,e){return e?fr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var gc=class extends hc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hs(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function wB(t){return rB(t.auth,new gc(t),t.bypassAuthState)}function IB(t){let{auth:e,user:n}=t;return Q(n,e,"internal-error"),nB(n,new gc(t),t.bypassAuthState)}function EB(t){return _(this,null,function*(){let{auth:e,user:n}=t;return Q(n,e,"internal-error"),tB(n,new gc(t),t.bypassAuthState)})}var dh=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wB;case"linkViaPopup":case"linkViaRedirect":return EB;case"reauthViaPopup":case"reauthViaRedirect":return IB;default:Bn(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var DB=new Vi(2e3,1e4);function F_(t,e,n){return _(this,null,function*(){if(xn(t.app))return Promise.reject(pn(t,"operation-not-supported-in-this-environment"));let r=fh(t);xU(t,e,fc);let i=BA(r,n);return new bB(r,"signInViaPopup",e,i).executeNotNull()})}var bB=(()=>{class t extends dh{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return _(this,null,function*(){let n=yield this.execute();return Q(n,this.auth,"internal-error"),n})}onExecution(){return _(this,null,function*(){pr(this.filter.length===1,"Popup operations only handle one event");let n=k_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,DB.get())};n()}}t.currentPopupAction=null;return t})(),CB="pendingRedirect",Xd=new Map,E_=class t extends dh{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Xd.get(this.auth._key());if(!e){try{let r=(yield TB(this.resolver,this.auth))?yield _r(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return _r(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,_r(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function TB(t,e){return _(this,null,function*(){let n=MB(e),r=AB(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function SB(t,e){Xd.set(t._key(),e)}function AB(t){return fr(t._redirectPersistence)}function MB(t){return Zd(CB,t.config.apiKey,t.name)}function RB(t,e,n=!1){return _(this,null,function*(){if(xn(t.app))return Promise.reject(Li(t));let r=fh(t),i=BA(r,e),s=yield new E_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var xB=10*60*1e3,D_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$A(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xB&&this.cachedEventUids.clear(),this.cachedEventUids.has(oA(e))}saveEventToCache(e){this.cachedEventUids.add(oA(e)),this.lastProcessedEventTime=Date.now()}};function oA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $A({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function NB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $A(t);default:return!1}}function PB(n){return _(this,arguments,function*(t,e={}){return ps(t,"GET","/v1/projects",e)})}var OB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kB=/^https?/;function FB(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield PB(t);for(let n of e)try{if(LB(n))return}catch{}Bn(t,"unauthorized-domain")})}function LB(t){let e=h_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!kB.test(n))return!1;if(OB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var VB=new Vi(3e4,6e4);function sA(){let t=Un().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jB(t){return new Promise((e,n)=>{var r,i,o;function s(){sA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sA(),n(pn(t,"network-request-failed"))},timeout:VB.get()})}if(!((i=(r=Un().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Un().gapi)===null||o===void 0)&&o.load)s();else{let a=MA("iframefcb");return Un()[a]=()=>{gapi.load?s():n(pn(t,"network-request-failed"))},QU(`${YU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw eh=null,e})}var eh=null;function UB(t){return eh=eh||jB(t),eh}var BB=new Vi(5e3,15e3),$B="__/auth/iframe",HB="emulator/auth/iframe",zB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GB(t){let e=t.config;Q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?A_(e,HB):`https://${t.config.authDomain}/${$B}`,r={apiKey:e.apiKey,appName:t.name,v:Vr},i=qB.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Vo(r).slice(1)}`}function WB(t){return _(this,null,function*(){let e=yield UB(t),n=Un().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:GB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zB,dontclear:!0},r=>new Promise((i,o)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=pn(t,"network-request-failed"),a=Un().setTimeout(()=>{o(s)},BB.get());function u(){Un().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var KB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QB=500,YB=600,JB="_blank",ZB="http://localhost",hh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function XB(t,e,n,r=QB,i=YB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},KB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=et().toLowerCase();n&&(a=EA(l)?JB:n),wA(l)&&(e=e||ZB,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(zU(l)&&a!=="_self")return e4(e||"",a),new hh(null);let p=window.open(e||"",a,h);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new hh(p)}function e4(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var t4="__/auth/handler",n4="emulator/auth/handler",r4=encodeURIComponent("fac");function aA(t,e,n,r,i,o){return _(this,null,function*(){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vr,eventId:i};if(e instanceof fc){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Gb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof ah){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${r4}=${encodeURIComponent(u)}`:"";return`${i4(t)}?${Vo(a).slice(1)}${l}`})}function i4({config:t}){return t.emulator?A_(t,n4):`https://${t.authDomain}/${t4}`}var d_="webStorageSupport",b_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O_,this._completeRedirectFn=RB,this._overrideRedirectResult=SB}_openPopup(e,n,r,i){return _(this,null,function*(){var o;pr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield aA(e,n,r,h_(),i);return XB(e,s,k_())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield aA(e,n,r,h_(),i);return lB(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(pr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield WB(e),r=new D_(e);return n.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(d_,{type:d_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[d_];s!==void 0&&n(!!s),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SA()||IA()||x_()}},HA=b_;var cA="@firebase/auth",uA="1.7.7";var C_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function o4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s4(t){Mt(new nt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AA(t)},l=new v_(r,i,o,u);return JU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mt(new nt("auth-internal",e=>{let n=fh(e.getProvider("auth").getImmediate());return(r=>new C_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ut(cA,uA,o4(t)),ut(cA,uA,"esm2017")}var a4=5*60,c4=pm("authIdTokenMaxAge")||a4,lA=null,u4=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>c4)return;let i=n?.token;lA!==i&&(lA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function L_(t=wi()){let e=un(t,"auth");if(e.isInitialized())return e.getImmediate();let n=RA(t,{popupRedirectResolver:HA,persistence:[UA,FA,O_]}),r=pm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=u4(o.toString());kA(n,s,()=>s(n.currentUser)),OA(n,a=>s(a))}}let i=hm("auth");return i&&xA(n,`http://${i}`),n}function l4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=pn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",l4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s4("Browser");var Kt=class t{loading=new Ue(!1);count=0;constructor(){_e.log("LoaderService: Init",this),_e.log("LoaderService: Init Complete",this)}show(){this.count++,this.count>0&&this.loading.next(!0)}hide(){this.count--,this.count==0&&this.loading.next(!1)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Qt=class t{constructor(e,n,r){this.firebase=e;this.loader=n;this.firestore=r;_e.log("AuthenticationService: Init",this),this.auth=L_(this.firebase.app),this.intialize(),_e.log("AuthenticationService: Init Complete",this)}auth;user;refresh=new Pe;intialize(){this.auth.onAuthStateChanged(e=>{if(e==null)this.user=void 0,this.refresh.emit(void 0);else{console.log("AuthenticationService:initialize:: Auth State Changed ",e),this.loader.show();let n=e,r={id:n.uid,email:n.email,name:n.displayName,contact:n.phoneNumber,image:n.photoURL,role:"USER"};this.login(r)}})}login(e){return _(this,null,function*(){let n=Vn(this.firestore.firestore,"users",e.id),r=yield JT(n);if(r.exists()){let i=r.data();console.log("AuthenticationService:login:: Existing User :",i),this.user={id:i.id,name:i.name,email:i.email,contact:i.contact,role:i.role,image:i.image},this.refresh.emit(this.user),sessionStorage.setItem("user",JSON.stringify(this.user)),this.firebase.log("login",this.user),this.loader.hide()}else _e.log("AuthenticationService:login:: Registering new user: "+e.email),this.user=e,yield Pi(Vn(Wt(this.firestore.firestore,"users"),e.id),this.user),_e.log("AuthenticationService:login:: Registered new user: "+e.email),this.refresh.emit(this.user),sessionStorage.setItem("user",JSON.stringify(this.user)),this.firebase.log("sign_up",this.user),this.loader.hide()})}logout(){return _(this,null,function*(){_e.log("AuthenticationService:logout:: Logging out user: "+this.user?.email),this.user=void 0,sessionStorage.clear(),this.firebase.log("logout",this.user),this.refresh.emit(this.user)})}static \u0275fac=function(n){return new(n||t)(J(ds),J(Kt),J(jn))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var gh=class t{constructor(e,n,r){this.router=e;this.auth=n;this.loader=r;_e.log("LoginComponent: Init",this),this.init(),_e.log("LoginComponent: Init Complete",this)}provider=new mc;init(){var e=sessionStorage.getItem("redirect");sessionStorage.removeItem("redirect"),this.auth.refresh.subscribe(n=>{n!=null?e?(_e.log("LoginComponent: Login Success, Redirecting to ",e),this.router.navigateByUrl(e)):(_e.log("LoginComponent: Login Success, Redirecting to home"),this.router.navigate(["home"])):(_e.log("LoginComponent: Login Failed, Redirecting to home"),this.router.navigate(["home"]))})}login(){this.loader.show(),F_(this.auth.auth,this.provider).then(e=>{let r=mc.credentialFromResult(e)?.accessToken,i=e.user;_e.log("LoginComponent: SignedIn User:",i),this.loader.hide()}).catch(e=>{this.loader.hide();let n=e.code,r=e.message;console.error(e);let i=e.customData.email,o=mc.credentialFromError(e)})}static \u0275fac=function(n){return new(n||t)($(gt),$(Qt),$(Kt))};static \u0275cmp=Le({type:t,selectors:[["app-login"]],standalone:!0,features:[Ve],decls:19,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-12"],[1,"card"],[1,"card-title"],[1,"mb-3"],["type","text","id","username","placeholder","Email ID","required","",1,"form-control"],["type","password","id","password","placeholder","Password","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"divider","my-4"],["type","button",1,"btn","btn-danger","btn-block",3,"click"],[1,"bi","bi-google","me-2"]],template:function(n,r){n&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),fe(5,"Sign in"),U(),V(6,"form")(7,"div",5),xe(8,"input",6),U(),V(9,"div",5),xe(10,"input",7),U(),V(11,"button",8),fe(12,"Login"),U(),V(13,"div",9)(14,"span"),fe(15,"or"),U()(),V(16,"button",10),Ee("click",function(){return r.login()}),xe(17,"i",11),fe(18,"Login with Google "),U()()()()()())},styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f8f9fa;padding:20px}.card[_ngcontent-%COMP%]{padding:40px;border-radius:8px;border:none;box-shadow:0 4px 12px #0000001a;background-color:#fff;width:100%}.card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#202124;margin-bottom:20px;text-align:center}.form-label[_ngcontent-%COMP%]{display:none}.form-control[_ngcontent-%COMP%]{height:40px;padding:10px 20px;font-size:16px;border:1px solid #dadce0;border-radius:4px;background-color:#fff;transition:border-color .3s ease;box-shadow:none}.form-control[_ngcontent-%COMP%]:focus{border-color:#1a73e8;outline:none}[_ngcontent-%COMP%]::placeholder{color:#5f6368;opacity:1}.btn-primary[_ngcontent-%COMP%]{height:44px;border-radius:4px;font-size:16px;font-weight:600;background-color:#1a73e8;border:none;margin-top:20px;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#1558c7}.btn-danger[_ngcontent-%COMP%]{height:44px;border-radius:4px;font-size:16px;font-weight:600;background-color:#db4437;border:none;margin-top:20px;width:100%}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c23321}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #dadce0}.divider[_ngcontent-%COMP%]:not(:empty):before{margin-right:15px}.divider[_ngcontent-%COMP%]:not(:empty):after{margin-left:15px}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#5f6368;font-size:14px}@media (max-width: 576px){.card[_ngcontent-%COMP%]{padding:30px}.card-title[_ngcontent-%COMP%]{font-size:22px}.form-control[_ngcontent-%COMP%]{height:50px;padding:8px 16px;font-size:15px}.btn-primary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{height:42px;font-size:15px}}']})};var mh=class t{constructor(e,n){this.router=e;this.auth=n;this.auth.refresh.subscribe(r=>{r==null&&this.router.navigate(["home"])})}logout(){P_(this.auth.auth).then(()=>this.auth.logout())}static \u0275fac=function(n){return new(n||t)($(gt),$(Qt))};static \u0275cmp=Le({type:t,selectors:[["app-logout"]],standalone:!0,features:[Ve],decls:7,vars:0,consts:[[1,"row","text-center","p-3"],[1,"col-md-4","col-sm-6","col-xs-12","form"],[2,"font-weight","600","font-size","18px"],[3,"click"]],template:function(n,r){n&1&&(V(0,"div",0)(1,"div",1)(2,"p",2),fe(3," Are you sure you want to log-off? "),xe(4,"br"),U(),V(5,"button",3),Ee("click",function(){return r.logout()}),fe(6,"Logout"),U()()())},styles:["img[_ngcontent-%COMP%]{display:block;width:80px;margin:30px auto;box-shadow:0 5px 10px -7px #333;border-radius:50%}.form[_ngcontent-%COMP%]{background-color:#fff;margin:50px auto 10px;padding:30px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px -3px #333;text-align:center}button[_ngcontent-%COMP%]{border-radius:100px;border:none;background:#719be6;width:50%;padding:10px;color:#fff;box-shadow:0 2px 10px -3px #719be6;display:block;margin:30px auto 10px}"]})};var Gr=class t{constructor(e,n){this.firestore=e;this.loader=n;_e.log("DataService: Init",this),_e.log("DataService: Init Complete",this)}data={};load(){return _(this,null,function*(){let e=["pages","models","rules","menu"];for(var n of e){this.loader.show();let r=window.localStorage.getItem(n),i=yield this.get("config",n),o=window.localStorage.getItem(n+"_refresh_dtm"),s=!0;if(o!=null&&i!=null&&i.refresh!=null&&new Date(o).getTime()>new Date(i.refresh).getTime()&&(s=!1),r==null||s){this.data[n]=yield this.firestore.read(n),this.loader.hide();try{window.localStorage.setItem(n,JSON.stringify(this.data[n])),window.localStorage.setItem(n+"_refresh_dtm",new Date().toISOString())}catch(a){console.error(a)}}else this.data[n]=JSON.parse(r),this.loader.hide()}})}get(e,n){return _(this,null,function*(){let r=null;return this.data[e]==null&&(this.data[e]=yield this.firestore.read(e)),this.data[e]!=null&&Array.isArray(this.data[e])&&(r=this.data[e].filter(i=>i.id==n)[0]),r})}read(e){return this.data[e]}static \u0275fac=function(n){return new(n||t)(J(jn),J(Kt))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var V_=t=>({a:t});function d4(t,e){if(t&1){let n=sn();V(0,"button",6),Ee("click",function(){ze(n);let i=De(2);return qe(i.editPageModal=!0)}),V(1,"i",7),fe(2,"edit"),U()()}}function h4(t,e){if(t&1&&(V(0,"div",3)(1,"div",4),bt(2,d4,3,0,"button",5),U()()),t&2){let n=De();we(2),Me("ngIf",n.page)}}function f4(t,e){if(t&1){let n=sn();V(0,"div",25)(1,"textarea",26),bn("ngModelChange",function(i){ze(n);let o=De(2);return Zn(o.page.html,i)||(o.page.html=i),qe(i)}),U()()}if(t&2){let n=De(2);we(),Dn("ngModel",n.page.html)}}function p4(t,e){if(t&1){let n=sn();V(0,"div",25)(1,"textarea",26),bn("ngModelChange",function(i){ze(n);let o=De(2);return Zn(o.page.script,i)||(o.page.script=i),qe(i)}),U()()}if(t&2){let n=De(2);we(),Dn("ngModel",n.page.script)}}function g4(t,e){if(t&1){let n=sn();V(0,"div",25)(1,"textarea",26),bn("ngModelChange",function(i){ze(n);let o=De(2);return Zn(o.page.style,i)||(o.page.style=i),qe(i)}),U()()}if(t&2){let n=De(2);we(),Dn("ngModel",n.page.style)}}function m4(t,e){if(t&1){let n=sn();V(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"h4",12),fe(5,"Edit Page"),U(),V(6,"button",13),Ee("click",function(){ze(n);let i=De();return qe(i.editPageModal=!1)}),U()(),V(7,"div",14)(8,"div",15)(9,"div",16)(10,"input",17),bn("ngModelChange",function(i){ze(n);let o=De();return Zn(o.page.auth,i)||(o.page.auth=i),qe(i)}),U(),V(11,"label",18),fe(12," Authentication "),U()(),V(13,"div",16)(14,"input",19),bn("ngModelChange",function(i){ze(n);let o=De();return Zn(o.page.header,i)||(o.page.header=i),qe(i)}),U(),V(15,"label",18),fe(16," Header "),U()()(),V(17,"div",15)(18,"div",20)(19,"span",21),Ee("click",function(){ze(n);let i=De();return qe(i.editPageView="html")}),fe(20,"HTML"),U(),V(21,"span",21),Ee("click",function(){ze(n);let i=De();return qe(i.editPageView="script")}),fe(22,"Script"),U(),V(23,"span",21),Ee("click",function(){ze(n);let i=De();return qe(i.editPageView="style")}),fe(24,"Style"),U()()(),V(25,"div",15),bt(26,f4,2,1,"div",22)(27,p4,2,1,"div",22)(28,g4,2,1,"div",22),U()(),V(29,"div",23)(30,"button",24),Ee("click",function(){ze(n);let i=De();return qe(i.save())}),fe(31,"Update"),U()()()()()}if(t&2){let n=De();we(10),Dn("ngModel",n.page.auth),we(4),Dn("ngModel",n.page.header),we(5),Me("ngClass",So(8,V_,n.editPageView=="html")),we(2),Me("ngClass",So(10,V_,n.editPageView=="script")),we(2),Me("ngClass",So(12,V_,n.editPageView=="style")),we(3),Me("ngIf",n.editPageView=="html"),we(),Me("ngIf",n.editPageView=="script"),we(),Me("ngIf",n.editPageView=="style")}}var gs=class t{constructor(e,n,r,i,o,s){this.router=e;this.route=n;this.data=r;this.user=i;this.loader=o;this.firestore=s;e.events.subscribe(a=>{a instanceof cn&&this.init()})}id;page;editPageModal=!1;editPageView="html";ngOnInit(){}init(){let e=this.id?this.id:this.route.snapshot.paramMap.get("id");console.log("Loading Page: "+e),e&&this.refresh(e)}refresh(e){return _(this,null,function*(){var n=yield this.data.get("pages",e);if(console.log(n),n&&n.auth&&this.user.user==null){if(console.log("Redirecting to Login"),this.route.snapshot.url.length>0){let r=[];this.route.snapshot.url.forEach(i=>r.push(i.path)),sessionStorage.setItem("redirect",r.join("/"))}this.router.navigate(["login"])}else n?(this.page=n,n.header||window.postMessage("header"),n.html&&this.updateView(),n.style&&n.style!=""&&this.updateStyle(n.style),n.script&&n.script!=""&&this.updateScript(n.script)):this.router.navigate(["home"])})}updateView(){var e=document.getElementById("3593661b72952004");console.log(e),e&&this.page&&this.page.html&&(e.innerHTML=this.page.html)}updateStyle(e){var n=document.getElementById("3593661b72952004"),r=document.createElement("style");r.innerText=e,n&&n.appendChild(r)}updateScript(e){var n=document.getElementById("3593661b72952004"),r=document.createElement("script");r.innerText=e,n&&n.appendChild(r)}save(){return _(this,null,function*(){this.page&&(this.editPageModal=!1,this.loader.show(),yield Pi(Vn(Wt(this.firestore.firestore,"pages"),this.page.id),this.page),this.loader.hide(),alert("Page Updated"))})}static \u0275fac=function(n){return new(n||t)($(gt),$(An),$(Gr),$(Qt),$(Kt),$(jn))};static \u0275cmp=Le({type:t,selectors:[["app-page"]],inputs:{id:"id"},standalone:!0,features:[Ve],decls:3,vars:2,consts:[["id","3593661b72952004"],["class","floating",4,"ngIf"],["class","modal extended",4,"ngIf"],[1,"floating"],[1,"d-flex","flex-column","bd-highlight","mb-3"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-warning",3,"click"],[1,"material-icons","pointer"],[1,"modal","extended"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[1,"form-check"],["type","checkbox","id","flexCheck1",1,"form-check-input",3,"ngModelChange","ngModel"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","id","flexCheckDefault",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"col-12"],[1,"mx-2","pointer",3,"click","ngClass"],["class","col-12 my-2",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-12","my-2"],["rows","15",1,"form-control","x",3,"ngModelChange","ngModel"]],template:function(n,r){n&1&&(xe(0,"div",0),bt(1,h4,3,1,"div",1)(2,m4,32,14,"div",2)),n&2&&(we(),Me("ngIf",r.user.user&&r.user.user.role=="ADMIN"),we(),Me("ngIf",r.page&&r.editPageModal))},dependencies:[Tn,ml,zd,ls,Gv,$d,ic],styles:[".floating[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;bottom:60px;right:30px}.floating[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50px;width:50px;height:50px;box-shadow:0 .25rem .5rem #000;margin:10px;cursor:pointer;padding:0}.floating[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}.modal.extended[_ngcontent-%COMP%]{display:block}.modal.extended[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fffaf0}span.a[_ngcontent-%COMP%]{color:#00f;font-weight:700;text-decoration:underline}"]})};var yh=class t{constructor(e){this.router=e}page="home";static \u0275fac=function(n){return new(n||t)($(gt))};static \u0275cmp=Le({type:t,selectors:[["app-home"]],standalone:!0,features:[Ve],decls:1,vars:1,consts:[[3,"id"]],template:function(n,r){n&1&&xe(0,"app-page",0),n&2&&Me("id",r.page)},dependencies:[gs]})};var qA=[{path:"admin",component:ac,canActivate:[u_]},{path:"pages",component:ac,canActivate:[u_]},{path:"login",component:gh},{path:"logout",component:mh},{path:"home",component:yh},{path:"p/:id",component:gs}];function y4(t){return()=>t.load()}var GA={providers:[AD({eventCoalescing:!0}),kb(qA),{provide:ll,useFactory:y4,multi:!0,deps:[Gr]}]};function v4(t,e){t&1&&(V(0,"div",1),xe(1,"div",2),U())}var vh=class t{constructor(e){this.loader=e;this.loading=this.loader.loading}loading;static \u0275fac=function(n){return new(n||t)($(Kt))};static \u0275cmp=Le({type:t,selectors:[["app-loader"]],standalone:!0,features:[Ve],decls:2,vars:3,consts:[["class","c d-flex align-items-center justify-content-center",4,"ngIf"],[1,"c","d-flex","align-items-center","justify-content-center"],[1,"loader"]],template:function(n,r){n&1&&(bt(0,v4,2,0,"div",0),DD(1,"async")),n&2&&Me("ngIf",bD(1,1,r.loading))},dependencies:[zD,Tn],styles:[".c[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1000;text-align:center;background:#000;opacity:.5}.loader[_ngcontent-%COMP%]{border:15px solid #f3f3f3;border-radius:50%;border-top:15px solid #3498db;width:100px;height:100px;-webkit-animation:_ngcontent-%COMP%_spin 2s linear infinite;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@-webkit-keyframes _ngcontent-%COMP%_spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}"]})};var _h=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Le({type:t,selectors:[["app-logo"]],standalone:!0,features:[Ve],decls:10,vars:0,consts:[["width","200","height","80","viewBox","0 0 400 150"],["id","SvgjsG6266","featurekey","rootContainer","transform","matrix(1,0,0,1,0,0)","fill","#f9e1cf"],["y","0","height","1","width","1","opacity","0"],["y","122","width","370","height","5"],["id","SvgjsG6267","featurekey","symbolFeature-0","transform","matrix(1.028017879379319,0,0,1.028017879379319,-5.140089396896595,12.444349912652363)","fill","#fdfaa4"],["xmlns","http://www.w3.org/2000/svg","fill-rule","evenodd","clip-rule","evenodd","d","M5,78.067c0-7.466,0-49.264,0-56.729C5,10.333,11.833,5.333,20.933,5.405  c7.466,0,50.264,0,57.729,0c10.837,0,15.933,7.095,15.933,14.933c0,7.466,0,52.264,0,59.729C94.595,90.333,88.667,95,78.662,95  c-7.466,0-50.263,0-57.729,0C11,95,5,88.667,5,78.067z M23.399,12.872c-7.419,0-10.933,2.466-10.933,9.932  c0,7.466,0,34.865,0,34.865h7.466l7.466-14.933l17.976,20.389l11.889-42.787L73,61l3.5-3.331h10.629c0,0,0-26.399,0-33.865  c0-7.466-2.467-10.932-9.933-10.932H23.399z M71.5,71.875l-13.125-29.25L48.25,77.25L28.399,54.669l-4,10.466H12.466  c0,0,0,4,0,11.467c0,7.466,3.466,10.933,10.933,10.933c7.466,0,44.598,0,52.428,0c7.835,0,11.302-3.467,11.302-10.933  c0-7.467,0-11.467,0-11.467L78.125,65L71.5,71.875z"],["id","SvgjsG6268","featurekey","nameFeature-0","transform","matrix(1.5633774866697607,0,0,1.5633774866697607,111.18704373675078,9.114959226611326)","fill","#fde300"],["_ngcontent-ibt-c17","","d","M0.52 40 c0 0 1.88 -2.4 1.88 -4.76 l0 -18.48 c0 -2.36 -1.88 -4.76 -1.88 -4.76 l11.76 0 s-1.88 2.4 -1.88 4.76 l0 18.48 c0 2.36 1.88 4.76 1.88 4.76 l-11.76 0 z M13.32 40 c0 0 1.88 -2.36 1.88 -4.76 l0 -18.44 c0 -2.4 -1.88 -4.8 -1.88 -4.8 l12.16 0 s-0.454 1.5708 0.23641 4.2232 l3.6836 11.817 l3.6836 -11.817 c0.69 -2.6524 0.23641 -4.2232 0.23641 -4.2232 l12.16 0 s-1.88 2.4 -1.88 4.8 l0 18.44 c0 2.4 1.88 4.76 1.88 4.76 l-10.96 0 s1.88 -2.36 1.88 -4.76 l0 -10.76 l-5 11.92 l-4 0 l-5 -11.92 l0 10.76 c0 2.4 1.88 4.76 1.88 4.76 l-10.96 0 z M26.240000000000002 36.4 c0 0 0.36 -1.88 -0.84 -4.76 l2 4.76 l-1.16 0 z M31.400000000000002 36.4 l2 -4.76 c-1.2 2.88 -0.84 4.76 -0.84 4.76 l-1.16 0 z M46.52 40 c0 0 1.88 -2.4 1.88 -4.76 l0 -18.48 c0 -2.36 -1.88 -4.76 -1.88 -4.76 l12.4 0 c6.6 0 12.24 2.68 12.24 8.88 c0 4.16 -2.08 6.84 -5.2 8.4 c-1.8 0.88 -3.92 1.36 -6.24 1.56 c-0.72 0.08 -2.6 0.08 -3.32 0.08 l0 4.32 c0 2.36 1.88 4.76 1.88 4.76 l-11.76 0 z M56.4 25.6 l1.44 0 c2.84 0 4.96 -1.36 4.96 -3.92 c0 -3 -2.44 -3.96 -5.28 -3.96 l-1.12 0 l0 7.88 z M85.92 40.56 c-6.56 0 -11.56 -3.72 -11.56 -10.56 l0 -13.08 c0 -2.48 -1.88 -4.92 -1.88 -4.92 l11.76 0 s-1.88 2.4 -1.88 4.8 l0 13.2 c0 3.24 1.16 4.72 3.56 4.72 c2.44 0 3.6 -1.48 3.6 -4.72 l0 -13.08 c0 -2.48 -1.88 -4.92 -1.88 -4.92 l11.76 0 s-1.88 2.4 -1.88 4.8 l0 13.2 c0 6.84 -5 10.56 -11.6 10.56 z M100.03999999999999 40 c0 0 1.88 -2.4 1.88 -4.8 l0 -18.44 c0 -2.4 -1.88 -4.76 -1.88 -4.76 l11.76 0 s-1.88 2.36 -1.88 4.76 l0 16.84 l6.04 0 c2.36 0 4.76 -1.88 4.76 -1.88 l0 8.28 l-20.68 0 z M130.12 40.64 c-3.44 0 -8.2 -1.48 -8.2 -1.48 l2.8 -7.96 s1.88 3.8 5.2 3.8 c2.68 0 4.36 -1.16 4.36 -2.92 c0 -3.2 -11.76 -3.3984 -11.76 -11.52 c0 -5.96 4.92 -9.12 11.64 -9.12 c3.32 0 7.36 1.8 7.36 1.8 l-2.76 7.52 s-2.24 -3.96 -4.8 -3.96 c-2.16 0 -3.36 1.36 -3.36 2.68 c0 3.12 12.08 3.64 12.08 11.6 c0 5.92 -5.52 9.56 -12.56 9.56 z M144.00000000000003 40 c0 0 1.88 -2.36 1.88 -4.76 l0 -18.44 c0 -2.4 -1.88 -4.8 -1.88 -4.8 l21.48 0 l0 8.28 s-2.4 -1.88 -4.8 -1.88 l-6.8 0 l0 5.2 l2.8 0 c2.4 0 4.8 -1.88 4.8 -1.88 l0 9.36 s-2.4 -1.88 -4.8 -1.88 l-2.8 0 l0 4.4 l6.8 0 c2.4 0 4.8 -1.88 4.8 -1.88 l0 8.28 l-21.48 0 z"],["id","SvgjsG6269","featurekey","sloganFeature-0","transform","matrix(1.2395395249917074,0,0,1.2395395249917074,109.73635290905752,75.94291572161438)","fill","#f4ee39"],["_ngcontent-ibt-c17","","d","M1.8262 20 l0 -14.111 l2.9297 0 l0 14.111 l-2.9297 0 z M18.037265625 5.888999999999999 l2.9199 0 l0 14.111 l-3.3887 0 l-6.25 -10.088 l0 10.088 l-2.9199 0 l0 -14.111 l3.3496 0 l6.2891 10.029 l0 -10.029 z M32.929203125 8.467 l-5.3711 0 l0 3.2031 l4.6387 0 l0 2.5488 l-4.6387 0 l0 5.7813 l-2.9492 0 l0 -14.111 l8.3203 0 l0 2.5781 z M35.429715625 20 l0 -14.111 l2.9297 0 l0 14.111 l-2.9297 0 z M51.64078125 5.888999999999999 l2.9199 0 l0 14.111 l-3.3887 0 l-6.25 -10.088 l0 10.088 l-2.9199 0 l0 -14.111 l3.3496 0 l6.2891 10.029 l0 -10.029 z M58.21291875 20 l0 -14.111 l2.9297 0 l0 14.111 l-2.9297 0 z M72.968984375 5.888999999999999 l0 2.5781 l-3.3496 0 l0 11.533 l-2.9004 0 l0 -11.533 l-3.3691 0 l0 -2.5781 l9.6191 0 z M83.369375 8.467 l-5.2344 0 l0 3.2031 l4.6387 0 l0 2.5488 l-4.6387 0 l0 3.1934 l5.2344 0 l0 2.5879 l-8.1836 0 l0 -14.111 l8.1836 0 l0 2.5781 z M91.582059375 20 l0 -14.111 l2.9297 0 l0 14.111 l-2.9297 0 z M114.326125 20 l-2.9199 0 l-0.92773 -10.635 l-3.5742 10.635 l-1.8945 0 l-3.5742 -10.635 l-0.9375 10.635 l-2.9297 0 l1.1816 -14.111 l4.1797 0 l3.0078 8.8574 l3.0469 -8.8574 l4.1797 0 z M123.26170625 5.888999999999999 c2.7637 0 4.4824 2.0508 4.4824 4.5605 c0 2.5684 -1.7188 4.4922 -4.4824 4.4922 l-2.9395 0 l0 5.0586 l-2.9297 0 l0 -14.111 l5.8691 0 z M122.77340625 12.4902 c1.4648 0 2.1484 -0.81055 2.1484 -2.0801 c0 -1.2207 -0.68359 -2.0703 -2.1484 -2.0703 l-2.4512 0 l0 4.1504 l2.4512 0 z M139.64890625 20 l-1.0254 -2.9102 l-5.9277 0 l-1.0254 2.9102 l-2.998 0 l5.1953 -14.111 l3.584 0 l5.1953 14.111 l-2.998 0 z M133.55470625 14.6387 l4.209 0 l-2.0996 -5.9863 z M151.015653125 20.19531 c-4.1504 0 -7.2168 -2.8223 -7.2168 -7.2559 s3.0664 -7.2461 7.2168 -7.2461 c3.1445 0 5.6641 1.6113 6.6699 4.2871 l-2.7344 0.99609 c-0.625 -1.6406 -2.1191 -2.5879 -3.9355 -2.5879 c-2.4316 0 -4.2969 1.6992 -4.2969 4.5508 s1.8652 4.5605 4.2969 4.5605 c1.8164 0 3.3105 -0.95703 3.9355 -2.5977 l2.7344 0.99609 c-1.0059 2.6758 -3.5254 4.2969 -6.6699 4.2969 z M168.27171875 5.888999999999999 l0 2.5781 l-3.3496 0 l0 11.533 l-2.9004 0 l0 -11.533 l-3.3691 0 l0 -2.5781 l9.6191 0 z"]],template:function(n,r){n&1&&(c0(),V(0,"svg",0)(1,"g",1),xe(2,"rect",2)(3,"rect",3),U(),V(4,"g",4),xe(5,"path",5),U(),V(6,"g",6),xe(7,"path",7),U(),V(8,"g",8),xe(9,"path",9),U()())}})};var _4=t=>({active:t});function w4(t,e){if(t&1&&(V(0,"div",4)(1,"h4",6),fe(2),U()()),t&2){let n=De();we(2),fi(n.auth.user.name)}}function I4(t,e){if(t&1){let n=sn();V(0,"div",7),Ee("click",function(){let i=ze(n).$implicit,o=De();return qe(o.focus(i.route))}),V(1,"i",8),fe(2),U(),V(3,"span",9),fe(4),U()()}if(t&2){let n=e.$implicit,r=De();Me("ngClass",So(3,_4,r.active=="/"+n.route)),we(2),fi(n.icon),we(2),fi(n.name)}}var wh=class t{constructor(e,n,r,i){this.router=e;this.route=n;this.auth=r;this.data=i;_e.log("MenuComponent: Init",this),this.active=this.router.url,this.user=this.auth.user,this.load(),this.router.events.subscribe(o=>{o instanceof cn&&(this.active=this.router.url)}),this.smenus=i.read("menu"),this.auth.refresh.subscribe(o=>{this.user=o,this.load()}),_e.log("MenuComponent: Init Complete",this)}close=new Pe;active="";user;menus=[];smenus=[];load(){this.menus=[],this.menus.push({name:"Home",icon:"home",route:"home"});for(var e in this.smenus){var n=this.smenus[e];(this.user==null&&n.role==null||this.user!=null&&n.role!=null&&n.role.indexOf(this.user.role)>-1)&&this.menus.push({name:this.smenus[e].name,icon:this.smenus[e].icon,route:this.smenus[e].route})}this.user?this.menus.push({name:"Logout",icon:"logout",route:"logout"}):this.menus.push({name:"Login",icon:"login",route:"login"})}focus(e){console.log(e),this.router.navigate([e]),setTimeout(()=>this.close.emit(),100)}static \u0275fac=function(n){return new(n||t)($(gt),$(An),$(Qt),$(Gr))};static \u0275cmp=Le({type:t,selectors:[["app-menu"]],outputs:{close:"close"},standalone:!0,features:[Ve],decls:7,vars:2,consts:[[1,"c"],[1,"text-end"],[1,"material-icons","pointer","m-2",3,"click"],["class","m",4,"ngIf"],[1,"m"],["class","pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[2,"margin-left","10px"],[1,"pointer",3,"click","ngClass"],[1,"material-icons","align-middle","mx-2"],[1,"align-middle"]],template:function(n,r){n&1&&(V(0,"div",0)(1,"div",1)(2,"i",2),Ee("click",function(){return r.close.emit(!0)}),fe(3,"close"),U()(),bt(4,w4,3,1,"div",3),V(5,"div",4),bt(6,I4,5,5,"div",5),U()()),n&2&&(we(4),Me("ngIf",r.auth.user),we(2),Me("ngForOf",r.menus))},dependencies:[yl,ml,Tn],styles:[".c[_ngcontent-%COMP%]{position:fixed;top:68px;left:0;height:-webkit-fill-available;background-color:#252526;width:200px;z-index:100}.c[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff}.c[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:10px 20px 10px 15px;margin-bottom:10px;font-size:20px;border-left:5px solid transparent}.c[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]   div.pointer[_ngcontent-%COMP%]:hover, .c[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]   div.pointer.active[_ngcontent-%COMP%]{border-left:5px solid white;background:#696969}"]})};var Ih=class t{$header=new Ue(!0);constructor(){app=this}header(e){this.$header.next(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};function D4(t,e){t&1&&(V(0,"i",9),fe(1,"menu"),U())}function b4(t,e){if(t&1&&xe(0,"img",10),t&2){let n=De();ng("src",n.auth.user.image,O0)}}var Eh=class t{constructor(e,n){this.app=e;this.auth=n;this.app.$header.subscribe(r=>this.enabled=r)}enabled=!0;menu=!1;home(){window.location.href=window.location.origin}static \u0275fac=function(n){return new(n||t)($(Ih),$(Qt))};static \u0275cmp=Le({type:t,selectors:[["app-header"]],standalone:!0,features:[Ve],decls:9,vars:3,consts:[[1,"c"],[1,"row","m-0"],[1,"position-absolute","col-2","p-2","m-1"],[1,"btn","btn-default","b",3,"click"],["class","material-icons text-light",4,"ngIf"],[3,"src",4,"ngIf"],[1,"col-12","p-0","text-center"],[3,"click"],[3,"close","hidden"],[1,"material-icons","text-light"],[3,"src"]],template:function(n,r){n&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ee("click",function(){return r.menu=!r.menu}),bt(4,D4,2,0,"i",4)(5,b4,1,1,"img",5),U()(),V(6,"div",6)(7,"app-logo",7),Ee("click",function(){return r.home()}),U()()()(),V(8,"app-menu",8),Ee("close",function(){return r.menu=!1}),U()),n&2&&(we(4),Me("ngIf",!r.auth.user),we(),Me("ngIf",r.auth.user&&r.auth.user.image),we(3),Me("hidden",!r.menu))},dependencies:[_h,wh,Tn],styles:[".c[_ngcontent-%COMP%]{top:0;position:sticky;height:70px;background:#252526;color:#fff}.c[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:30px}.c[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]{height:45px;margin:10px 0;font-size:30px;border-right:10px solid #252526;white-space:nowrap;overflow:hidden;display:inline-block;font-weight:500}.c[_ngcontent-%COMP%]   .b[_ngcontent-%COMP%]{padding:0}.c[_ngcontent-%COMP%]   .b[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px}.c[_ngcontent-%COMP%]   .b[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:5px}.a[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_typetext,_ngcontent-%COMP%_blinkcursor;animation-duration:2s,.5s;animation-timing-function:steps(15),steps(15);animation-delay:.5s,0s;animation-iteration-count:1,8;animation-direction:normal;animation-fill-mode:both}@keyframes _ngcontent-%COMP%_typetext{0%{width:.5rem}to{width:8.5rem}}@keyframes _ngcontent-%COMP%_blinkcursor{0%{border-right-color:#fff}to{border-right-color:#252526}}"]})};var Dh=class t{constructor(e){this.router=e}header=!0;static \u0275fac=function(n){return new(n||t)($(gt))};static \u0275cmp=Le({type:t,selectors:[["app-root"]],standalone:!0,features:[Ve],decls:3,vars:0,template:function(n,r){n&1&&xe(0,"app-header")(1,"app-loader")(2,"router-outlet")},dependencies:[Eh,vh,tm]})};XD(Dh,GA).catch(t=>console.error(t));
